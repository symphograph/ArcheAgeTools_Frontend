import{Q as N}from"./QLinearProgress.8c7a4e1f.js";import{b as x,Q as f,a as c}from"./position-engine.7a2cb73f.js";import{I as B,Q as D}from"./ItemIcon.a357d1dd.js";import{r as m,t as n,x as p,Y as t,f as e,af as L,_ as d,$ as _,a0 as b,v as y,F as k,Z as E,a6 as A,l as w,ax as G,u as R,m as U,i as O,o as T,a5 as j,bk as q}from"./index.312bfc2c.js";import{Q as z}from"./QList.2806152c.js";import{Q as K}from"./QScrollArea.e39746d1.js";import{u as W}from"./use-meta.a02570f3.js";import{u as Y}from"./use-quasar.d7abd3d3.js";import{api as M}from"./axios.8ef9e684.js";import{g as Z,n as S,b as H}from"./myFuncts.f85c9e09.js";import{P as J}from"./PriceImagerComponent.be8d8ab8.js";import{_ as X}from"./ServerGroupSelect.80fa408e.js";import"./selection.bedc1144.js";import"./QScrollObserver.a8aa26f4.js";import"./TouchPan.415f66fa.js";import"./format.959830d0.js";import"./price.73894c01.js";import"./QSelect.c60eb851.js";import"./QMenu.3579dee4.js";const ee={__name:"MemberLastItem",props:{member:m(null)},setup(l){return(i,g)=>(n(),p(x,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e(L,{dense:"",flat:"",to:"/item/"+l.member.LastPricedItem.id},{default:t(()=>[e(B,{icon:l.member.LastPricedItem.icon,grade:l.member.LastPricedItem.grade},null,8,["icon","grade"])]),_:1},8,["to"])]),_:1}),e(f,{avatar:""},{default:t(()=>[e(c,{caption:""},{default:t(()=>[d(_(b(Z)(l.member.LastPricedItem.Price.updatedAt)),1)]),_:1}),e(c,null,{default:t(()=>[d(_(l.member.LastPricedItem.name),1)]),_:1}),e(c,null,{default:t(()=>[e(J,{currencyId:500,price:l.member.LastPricedItem.Price.price},null,8,["price"])]),_:1})]),_:1})]),_:1}))}};const te=["src"],ae={__name:"MemberAvaCell",props:{member:m(null)},setup(l){const i=String("https://auth.symphograph.ru/");return(g,s)=>(n(),y(k,null,[e(f,{avatar:""},{default:t(()=>[e(L,{round:"",glossy:"",class:"MemberAva",to:"/prices/"+l.member.accountId},{default:t(()=>[e(E,{size:"40px"},{default:t(()=>[A("img",{class:"MemberAvaImg",src:b(i)+"img/avatars/"+l.member.avaFileName,alt:""},null,8,te)]),_:1})]),_:1},8,["to"])]),_:1}),e(f,{class:"MemberInfo"},{default:t(()=>[e(c,null,{default:t(()=>[d(_(l.member.publicNick),1)]),_:1}),e(c,{caption:""},{default:t(()=>[d("\u0417\u0430\u043F\u0438\u0441\u0435\u0439:"+_(l.member.pricesCount),1)]),_:1}),l.member.followersCount?(n(),p(c,{key:0,caption:""},{default:t(()=>[d(" \u0414\u043E\u0432\u0435\u0440\u044F\u044E\u0442:"+_(l.member.followersCount),1)]),_:1})):w("",!0)]),_:1})],64))}};var re=G(ae,[["__scopeId","data-v-2052e84a"]]);const le={class:"WindowArea column"},oe={__name:"MembersPage",setup(l){R(),U();const i=Y(),g=String("https://api.aa.dllib.ru/"),s=O("curAccount"),v=m([]),I=m(!1),C=m(null);function F(o){M.post(g+"api/set/follow.php",{params:{master:o.id,serverGroupId:s.value.settings.serverGroupId,isFollow:o.isFollow}}).then(a=>{var r,u,Q;if(!((r=a==null?void 0:a.data)!=null&&r.result))throw new Error;i.notify(H((Q=(u=a==null?void 0:a.data)==null?void 0:u.result)!=null?Q:"\u041E\u0439!"))}).catch(a=>{i.notify(S(a))})}T(()=>{h()});function h(){if(s.value.settings.serverGroupId===100){v.value=[];return}I.value=!0,M.post(g+"/api/get/members.php",{params:{serverGroupId:s.value.settings.serverGroupId}}).then(o=>{var a,r,u;if(!((a=o==null?void 0:o.data)!=null&&a.result))throw new Error;v.value=(u=(r=o==null?void 0:o.data)==null?void 0:r.data)!=null?u:[]}).catch(o=>{v.value=[],i.notify(S(o))}).finally(()=>{I.value=!1})}function V(){return I.value}const P=m();function $(){P.value.saveServerGroup()}return W({title:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(o,a)=>(n(),y("div",le,[A("div",{class:"navigator",ref_key:"navigatorRef",ref:C},[e(X,{groupId:b(s).settings.serverGroupId,onOnSelect:a[0]||(a[0]=r=>$()),onOnSave:a[1]||(a[1]=r=>h()),ref_key:"refServerGroupSelect",ref:P},null,8,["groupId"])],512),e(N,{"animation-speed":200,color:"green",indeterminate:V()},null,8,["indeterminate"]),v.value.length?(n(),p(K,{key:0,class:"col"},{default:t(()=>[e(z,{dense:"",separator:""},{default:t(()=>[(n(!0),y(k,null,j(v.value,r=>(n(),p(x,{key:r.id,dense:""},{default:t(()=>[e(re,{member:r},null,8,["member"]),e(f,null,{default:t(()=>[e(ee,{member:r},null,8,["member"])]),_:2},1024),e(f,{side:""},{default:t(()=>[r.accountId!==b(s).id?(n(),p(q,{key:0,modelValue:r.isFollow,"onUpdate:modelValue":[u=>r.isFollow=u,u=>F({id:r.accountId,isFollow:r.isFollow})]},{default:t(()=>[e(D,null,{default:t(()=>a[2]||(a[2]=[d("\u0414\u043E\u0432\u0435\u0440\u044F\u0442\u044C")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):w("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):w("",!0)]))}};var Se=G(oe,[["__scopeId","data-v-ad0ab238"]]);export{Se as default};
