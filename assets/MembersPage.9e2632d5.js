import{Q as D}from"./QLinearProgress.7ddb2c2b.js";import{b as k,Q as d,a as m}from"./position-engine.d4481b10.js";import{I as E,Q as R}from"./ItemIcon.b554a7df.js";import{r as s,s as n,v,X as t,f as e,ae as x,Z as c,_,$ as b,t as y,F as G,Y as U,a5 as C,l as h,av as F,u as O,m as T,i as M,o as j,a4 as q,bi as z}from"./index.d89fa4fe.js";import{Q as K}from"./QList.d6209427.js";import{Q as W}from"./QScrollArea.7b846e1e.js";import{u as X}from"./use-meta.2ddf06b6.js";import{u as Y}from"./use-quasar.957d8cc7.js";import{api as A}from"./axios.71ccf725.js";import"./QSelect.4c6b2588.js";import{g as Z,n as L,b as H}from"./myFuncts.b0c6cefc.js";import{P as J}from"./PriceImagerComponent.4c93a91a.js";import{_ as ee}from"./ServerGroupSelect.b0ec73ae.js";import"./selection.dd4e187a.js";import"./QScrollObserver.0c6f73e9.js";import"./TouchPan.05265af2.js";import"./format.865294d5.js";import"./QMenu.19360e34.js";import"./jwt-decode.esm.81f958e7.js";const te={__name:"MemberLastItem",props:{member:s(null)},setup(l){return(i,p)=>(n(),v(k,{dense:""},{default:t(()=>[e(d,{avatar:""},{default:t(()=>[e(x,{dense:"",flat:"",to:"/item/"+l.member.LastPricedItem.id},{default:t(()=>[e(E,{icon:l.member.LastPricedItem.icon,grade:l.member.LastPricedItem.grade},null,8,["icon","grade"])]),_:1},8,["to"])]),_:1}),e(d,{avatar:""},{default:t(()=>[e(m,{caption:""},{default:t(()=>[c(_(b(Z)(l.member.LastPricedItem.Price.updatedAt)),1)]),_:1}),e(m,null,{default:t(()=>[c(_(l.member.LastPricedItem.name),1)]),_:1}),e(m,null,{default:t(()=>[e(J,{currencyId:500,price:l.member.LastPricedItem.Price.price},null,8,["price"])]),_:1})]),_:1})]),_:1}))}};const ae=["src"],re={__name:"MemberAvaCell",props:{member:s(null)},setup(l){const i=String("https://auth.symphograph.ru/");return(p,w)=>(n(),y(G,null,[e(d,{avatar:""},{default:t(()=>[e(x,{round:"",glossy:"",class:"MemberAva",to:"/prices/"+l.member.accountId},{default:t(()=>[e(U,{size:"40px"},{default:t(()=>[C("img",{class:"MemberAvaImg",src:b(i)+"img/avatars/"+l.member.avaFileName,alt:""},null,8,ae)]),_:1})]),_:1},8,["to"])]),_:1}),e(d,{class:"MemberInfo"},{default:t(()=>[e(m,null,{default:t(()=>[c(_(l.member.publicNick),1)]),_:1}),e(m,{caption:""},{default:t(()=>[c("\u0417\u0430\u043F\u0438\u0441\u0435\u0439:"+_(l.member.pricesCount),1)]),_:1}),l.member.followersCount?(n(),v(m,{key:0,caption:""},{default:t(()=>[c(" \u0414\u043E\u0432\u0435\u0440\u044F\u044E\u0442:"+_(l.member.followersCount),1)]),_:1})):h("",!0)]),_:1})],64))}};var le=F(re,[["__scopeId","data-v-2052e84a"]]);const oe={class:"WindowArea column"},ue={__name:"MembersPage",setup(l){O(),T();const i=Y(),p=String("https://api.aa.dllib.ru/"),w=M("curAccount"),g=M("AccSets"),f=s([]),I=s(!1),V=s(null);function $(o){A.post(p+"api/set/follow.php",{params:{master:o.id,serverGroupId:g.value.serverGroupId,isFollow:o.isFollow}}).then(a=>{var r,u,S;if(!((r=a==null?void 0:a.data)!=null&&r.result))throw new Error;i.notify(H((S=(u=a==null?void 0:a.data)==null?void 0:u.result)!=null?S:"\u041E\u0439!"))}).catch(a=>{i.notify(L(a))})}j(()=>{P()});function P(){if(g.value.serverGroupId===100){f.value=[];return}I.value=!0,A.post(p+"/api/get/members.php",{params:{serverGroupId:g.value.serverGroupId}}).then(o=>{var a,r,u;if(!((a=o==null?void 0:o.data)!=null&&a.result))throw new Error;f.value=(u=(r=o==null?void 0:o.data)==null?void 0:r.data)!=null?u:[]}).catch(o=>{f.value=[],i.notify(L(o))}).finally(()=>{I.value=!1})}function N(){return I.value}const Q=s();function B(){Q.value.saveServerGroup()}return X({title:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(o,a)=>(n(),y("div",oe,[C("div",{class:"navigator",ref_key:"navigatorRef",ref:V},[e(ee,{groupId:b(g).serverGroupId,onOnSelect:a[0]||(a[0]=r=>B()),onOnSave:a[1]||(a[1]=r=>P()),ref_key:"refServerGroupSelect",ref:Q},null,8,["groupId"])],512),e(D,{"animation-speed":200,color:"green",indeterminate:N()},null,8,["indeterminate"]),f.value.length?(n(),v(W,{key:0,class:"col"},{default:t(()=>[e(K,{dense:"",separator:""},{default:t(()=>[(n(!0),y(G,null,q(f.value,r=>(n(),v(k,{key:r.id,dense:""},{default:t(()=>[e(le,{member:r},null,8,["member"]),e(d,null,{default:t(()=>[e(te,{member:r},null,8,["member"])]),_:2},1024),e(d,{side:""},{default:t(()=>[r.accountId!==b(w).id?(n(),v(z,{key:0,modelValue:r.isFollow,"onUpdate:modelValue":[u=>r.isFollow=u,u=>$({id:r.accountId,isFollow:r.isFollow})]},{default:t(()=>[e(R,null,{default:t(()=>[c("\u0414\u043E\u0432\u0435\u0440\u044F\u0442\u044C")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):h("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0)]))}};var Ae=F(ue,[["__scopeId","data-v-2e5701c5"]]);export{Ae as default};
