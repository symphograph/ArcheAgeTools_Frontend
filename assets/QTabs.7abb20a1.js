import{I as _e,ag as O,O as te,r as v,c as d,w as D,p as Re,S as Ae,E as Ie,D as Be,h as R,J as ke,a4 as ne,ah as Me,g as De}from"./index.312bfc2c.js";import{Q as Pe}from"./QScrollObserver.a8aa26f4.js";import{r as $e}from"./QSelect.c60eb851.js";function xe(n,P,$){const b=$===!0?["left","right"]:["top","bottom"];return`absolute-${P===!0?b[0]:b[1]}${n?` text-${n}`:""}`}const Ee=["left","center","right","justify"];var We=_e({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:n=>Ee.includes(n)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(n,{slots:P,emit:$}){const{proxy:b}=De(),{$q:x}=b,{registerTick:oe}=O(),{registerTick:le}=O(),{registerTick:ae}=O(),{registerTimeout:re,removeTimeout:ie}=te(),{registerTimeout:j,removeTimeout:ue}=te(),S=v(null),s=v(null),T=v(n.modelValue),y=v(!1),E=v(!0),F=v(!1),U=v(!1),c=[],Q=v(0),A=v(!1);let w=null,q=null,h;const se=d(()=>({activeClass:n.activeClass,activeColor:n.activeColor,activeBgColor:n.activeBgColor,indicatorClass:xe(n.indicatorColor,n.switchIndicator,n.vertical),narrowIndicator:n.narrowIndicator,inlineLabel:n.inlineLabel,noCaps:n.noCaps})),ce=d(()=>{const e=Q.value,t=T.value;for(let o=0;o<e;o++)if(c[o].name.value===t)return!0;return!1}),fe=d(()=>`q-tabs__content--align-${y.value===!0?"left":U.value===!0?"justify":n.align}`),ve=d(()=>`q-tabs row no-wrap items-center q-tabs--${y.value===!0?"":"not-"}scrollable q-tabs--${n.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${n.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${n.mobileArrows===!0?"":"out"}-arrows`+(n.dense===!0?" q-tabs--dense":"")+(n.shrink===!0?" col-shrink":"")+(n.stretch===!0?" self-stretch":"")),de=d(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+fe.value+(n.contentClass!==void 0?` ${n.contentClass}`:"")),I=d(()=>n.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),B=d(()=>n.vertical!==!0&&x.lang.rtl===!0),V=d(()=>$e===!1&&B.value===!0);D(B,L),D(()=>n.modelValue,e=>{W({name:e,setCurrent:!0,skipEmit:!0})}),D(()=>n.outsideArrows,k);function W({name:e,setCurrent:t,skipEmit:o}){T.value!==e&&(o!==!0&&n["onUpdate:modelValue"]!==void 0&&$("update:modelValue",e),(t===!0||n["onUpdate:modelValue"]===void 0)&&(he(T.value,e),T.value=e))}function k(){oe(()=>{G({width:S.value.offsetWidth,height:S.value.offsetHeight})})}function G(e){if(I.value===void 0||s.value===null)return;const t=e[I.value.container],o=Math.min(s.value[I.value.scroll],Array.prototype.reduce.call(s.value.children,(i,a)=>i+(a[I.value.content]||0),0)),r=t>0&&o>t;y.value=r,r===!0&&le(L),U.value=t<parseInt(n.breakpoint,10)}function he(e,t){const o=e!=null&&e!==""?c.find(i=>i.name.value===e):null,r=t!=null&&t!==""?c.find(i=>i.name.value===t):null;if(M===!0)M=!1;else if(o&&r){const i=o.tabIndicatorRef.value,a=r.tabIndicatorRef.value;w!==null&&(clearTimeout(w),w=null),i.style.transition="none",i.style.transform="none",a.style.transition="none",a.style.transform="none";const l=i.getBoundingClientRect(),u=a.getBoundingClientRect();a.style.transform=n.vertical===!0?`translate3d(0,${l.top-u.top}px,0) scale3d(1,${u.height?l.height/u.height:1},1)`:`translate3d(${l.left-u.left}px,0,0) scale3d(${u.width?l.width/u.width:1},1,1)`,ae(()=>{w=setTimeout(()=>{w=null,a.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",a.style.transform="none"},70)})}r&&y.value===!0&&C(r.rootRef.value)}function C(e){const{left:t,width:o,top:r,height:i}=s.value.getBoundingClientRect(),a=e.getBoundingClientRect();let l=n.vertical===!0?a.top-r:a.left-t;if(l<0){s.value[n.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(l),L();return}l+=n.vertical===!0?a.height-i:a.width-o,l>0&&(s.value[n.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(l),L())}function L(){const e=s.value;if(e===null)return;const t=e.getBoundingClientRect(),o=n.vertical===!0?e.scrollTop:Math.abs(e.scrollLeft);B.value===!0?(E.value=Math.ceil(o+t.width)<e.scrollWidth-1,F.value=o>0):(E.value=o>0,F.value=n.vertical===!0?Math.ceil(o+t.height)<e.scrollHeight:Math.ceil(o+t.width)<e.scrollWidth)}function K(e){q!==null&&clearInterval(q),q=setInterval(()=>{be(e)===!0&&g()},5)}function N(){K(V.value===!0?Number.MAX_SAFE_INTEGER:0)}function X(){K(V.value===!0?0:Number.MAX_SAFE_INTEGER)}function g(){q!==null&&(clearInterval(q),q=null)}function ge(e,t){const o=Array.prototype.filter.call(s.value.children,u=>u===t||u.matches&&u.matches(".q-tab.q-focusable")===!0),r=o.length;if(r===0)return;if(e===36)return C(o[0]),o[0].focus(),!0;if(e===35)return C(o[r-1]),o[r-1].focus(),!0;const i=e===(n.vertical===!0?38:37),a=e===(n.vertical===!0?40:39),l=i===!0?-1:a===!0?1:void 0;if(l!==void 0){const u=B.value===!0?-1:1,f=o.indexOf(t)+l*u;return f>=0&&f<r&&(C(o[f]),o[f].focus({preventScroll:!0})),!0}}const me=d(()=>V.value===!0?{get:e=>Math.abs(e.scrollLeft),set:(e,t)=>{e.scrollLeft=-t}}:n.vertical===!0?{get:e=>e.scrollTop,set:(e,t)=>{e.scrollTop=t}}:{get:e=>e.scrollLeft,set:(e,t)=>{e.scrollLeft=t}});function be(e){const t=s.value,{get:o,set:r}=me.value;let i=!1,a=o(t);const l=e<a?-1:1;return a+=l*5,a<0?(i=!0,a=0):(l===-1&&a<=e||l===1&&a>=e)&&(i=!0,a=e),r(t,a),L(),i}function J(e,t){for(const o in e)if(e[o]!==t[o])return!1;return!0}function Te(){let e=null,t={matchedLen:0,queryDiff:9999,hrefLen:0};const o=c.filter(l=>l.routeData!==void 0&&l.routeData.hasRouterLink.value===!0),{hash:r,query:i}=b.$route,a=Object.keys(i).length;for(const l of o){const u=l.routeData.exact.value===!0;if(l.routeData[u===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:f,query:z,matched:Le,href:Se}=l.routeData.resolvedLink.value,H=Object.keys(z).length;if(u===!0){if(f!==r||H!==a||J(i,z)===!1)continue;e=l.name.value;break}if(f!==""&&f!==r||H!==0&&J(z,i)===!1)continue;const m={matchedLen:Le.length,queryDiff:a-H,hrefLen:Se.length-f.length};if(m.matchedLen>t.matchedLen){e=l.name.value,t=m;continue}else if(m.matchedLen!==t.matchedLen)continue;if(m.queryDiff<t.queryDiff)e=l.name.value,t=m;else if(m.queryDiff!==t.queryDiff)continue;m.hrefLen>t.hrefLen&&(e=l.name.value,t=m)}if(e===null&&c.some(l=>l.routeData===void 0&&l.name.value===T.value)===!0){M=!1;return}W({name:e,setCurrent:!0})}function we(e){if(ie(),A.value!==!0&&S.value!==null&&e.target&&typeof e.target.closest=="function"){const t=e.target.closest(".q-tab");t&&S.value.contains(t)===!0&&(A.value=!0,y.value===!0&&C(t))}}function ye(){re(()=>{A.value=!1},30)}function _(){Z.avoidRouteWatcher===!1?j(Te):ue()}function Y(){if(h===void 0){const e=D(()=>b.$route.fullPath,_);h=()=>{e(),h=void 0}}}function qe(e){c.push(e),Q.value++,k(),e.routeData===void 0||b.$route===void 0?j(()=>{if(y.value===!0){const t=T.value,o=t!=null&&t!==""?c.find(r=>r.name.value===t):null;o&&C(o.rootRef.value)}}):(Y(),e.routeData.hasRouterLink.value===!0&&_())}function Ce(e){c.splice(c.indexOf(e),1),Q.value--,k(),h!==void 0&&e.routeData!==void 0&&(c.every(t=>t.routeData===void 0)===!0&&h(),_())}const Z={currentModel:T,tabProps:se,hasFocus:A,hasActiveTab:ce,registerTab:qe,unregisterTab:Ce,verifyRouteModel:_,updateModel:W,onKbdNavigate:ge,avoidRouteWatcher:!1};Re(Me,Z);function p(){w!==null&&clearTimeout(w),g(),h!==void 0&&h()}let ee,M;return Ae(p),Ie(()=>{ee=h!==void 0,p()}),Be(()=>{ee===!0&&(Y(),M=!0,_()),k()}),()=>R("div",{ref:S,class:ve.value,role:"tablist",onFocusin:we,onFocusout:ye},[R(Pe,{onResize:G}),R("div",{ref:s,class:de.value,onScroll:L},ke(P.default)),R(ne,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(E.value===!0?"":" q-tabs__arrow--faded"),name:n.leftIcon||x.iconSet.tabs[n.vertical===!0?"up":"left"],onMousedownPassive:N,onTouchstartPassive:N,onMouseupPassive:g,onMouseleavePassive:g,onTouchendPassive:g}),R(ne,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:n.rightIcon||x.iconSet.tabs[n.vertical===!0?"down":"right"],onMousedownPassive:X,onTouchstartPassive:X,onMouseupPassive:g,onMouseleavePassive:g,onTouchendPassive:g})])}});export{We as Q};
