import{Q as r,a as s,b as d}from"./position-engine.26aa5e7a.js";import{i as b,r as E,o as M,n as i,q as f,P as V,f as a,G as t,J as u,N as y,H as o,I as c,b9 as I,ba as v,F as _,O as Q,t as D,af as w,l as F,aX as A}from"./index.5f348600.js";import{Q as N}from"./QList.f73218e7.js";import{Q as q}from"./QImg.0433f768.js";import{Q as P}from"./QScrollArea.4c334ca9.js";import{f as U,b as $,n as x}from"./myFuncts.8be67628.js";import{I as B}from"./ItemIcon.c3b6e505.js";import{u as j}from"./use-quasar.d747f14e.js";import{N as G}from"./NickInput.bc0ef131.js";import{api as C}from"./axios.ddc478b8.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import{u as J}from"./use-meta.37690822.js";import"./selection.eefc3e68.js";import"./QScrollObserver.96244c85.js";import"./TouchPan.990df45f.js";import"./format.959830d0.js";const O={class:"navigator"},X={__name:"AccountArea",emits:["onUnlinkAccount"],setup(L,{emit:S}){const h=j(),m=String("https://aa.dllib.ru/tauth/"),p=b("curAccount"),T=b("AccountList"),g=E([]);function z(n){C.post(m+"api/device.php",{params:{method:"unlinkByAccount",accountId:n}}).then(l=>{var e;if(!((e=l==null?void 0:l.data)!=null&&e.result))throw new Error;k()}).catch(l=>{h.notify(x(l))})}function k(){C.post(m+"api/device.php",{params:{method:"otherList"}}).then(n=>{var l,e;if(!((l=n==null?void 0:n.data)!=null&&l.result))throw new Error;g.value=(e=n.data.data)!=null?e:[]}).catch(n=>{g.value=[],h.notify(x(n))})}return M(()=>{k()}),(n,l)=>(i(),f(_,null,[V("div",O,[a(d,null,{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(B,{locIcon:u(m)+u(p).Avatar.src,grade:1,size:"70px"},null,8,["locIcon"])]),_:1}),a(r,null,{default:t(()=>[a(s,null,{default:t(()=>[a(y,{name:"img:/img/auth/"+u(p).authType+".svg"},null,8,["name"]),o(" "+c(u(p).nickName),1)]),_:1}),a(G)]),_:1})]),_:1})]),a(P,{class:"col myScrollArea"},{default:t(()=>[a(I,{class:"MyCard"},{default:t(()=>[a(v,null,{default:t(()=>[a(d,null,{default:t(()=>[a(r,null,{default:t(()=>l[0]||(l[0]=[o(" \u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B, \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u044D\u0442\u0438\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C \u043D\u0430 \u044D\u0442\u043E\u043C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435. ")])),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(N,null,{default:t(()=>[(i(!0),f(_,null,Q(u(T),e=>(i(),f(_,{key:e},[e.id!==u(p).id&&e.authType!=="default"?(i(),D(d,{key:0,clickable:""},{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(B,{locIcon:u(m)+e.Avatar.src,grade:1,size:"70px"},null,8,["locIcon"])]),_:2},1024),a(r,null,{default:t(()=>[a(s,{caption:""},{default:t(()=>[a(y,{size:"1.5em",name:"img:/img/auth/"+e.authType+".svg"},null,8,["name"]),o(" "+c(u(U)(e.visitedAt)),1)]),_:2},1024),a(s,null,{default:t(()=>[o(c(e.nickName),1)]),_:2},1024),a(s,null,{default:t(()=>[o(c(e.settings.publicNick),1)]),_:2},1024)]),_:2},1024),a(r,{side:""},{default:t(()=>[a(w,{label:"\u041E\u0442\u0432\u044F\u0437\u0430\u0442\u044C",class:"DefBtn",onClick:R=>z(e.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)):F("",!0)],64))),128)),a(A)]),_:1})]),_:1})]),_:1}),a(I,{class:"MyCard"},{default:t(()=>[a(v,null,{default:t(()=>[a(d,null,{default:t(()=>[a(r,null,{default:t(()=>l[1]||(l[1]=[o(" \u0421\u0435\u0441\u0441\u0438\u0438 \u043D\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\u0445. ")])),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(N,null,{default:t(()=>[(i(!0),f(_,null,Q(g.value,e=>(i(),f(_,{key:e.marker},[a(d,{style:{padding:"2em 0"}},{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(y,{size:"2em",name:e.ismobiledevice?"smartphone":"ion-desktop"},null,8,["name"])]),_:2},1024),a(r,{avatar:""},{default:t(()=>[a(q,{src:"/img/browser/"+e.browser+".svg",width:"2em"},null,8,["src"])]),_:2},1024),a(r,null,{default:t(()=>[a(s,{caption:""},{default:t(()=>[o(c(u($)(e.visitedAt)),1)]),_:2},1024),a(s,{caption:""},{default:t(()=>[o(c(e.platform),1)]),_:2},1024)]),_:2},1024),a(r,{side:""},{default:t(()=>[a(w,{label:"\u043E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C",class:"DefBtn"})]),_:1})]),_:2},1024),a(A)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})],64))}};var K=H(X,[["__scopeId","data-v-1b4b5ab0"]]);const fa={__name:"AccountsPage",setup(L){return J({title:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(h,m)=>(i(),D(K))}};export{fa as default};
