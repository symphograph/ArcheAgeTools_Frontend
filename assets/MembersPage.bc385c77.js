import{Q as N}from"./QLinearProgress.7a6544ed.js";import{b as A,Q as f,a as d}from"./position-engine.fcb91d72.js";import{I as B,Q as D}from"./ItemIcon.ccf8782e.js";import{r as s,n,t as p,G as a,f as t,af as C,H as c,I as _,J as I,q as y,F as G,Q as O,P as k,l as h,d as T,i as U,o as j,O as q,bj as R}from"./index.cf591b40.js";import{Q as z}from"./QList.c381a4c6.js";import{Q as H}from"./QScrollArea.15a45ecc.js";import{u as J}from"./use-meta.79e5537f.js";import{u as K}from"./use-quasar.df17c2ed.js";import{api as S}from"./axios.c7c3d222.js";import{e as W,n as L,a as X}from"./myFuncts.7b3aa3f0.js";import{P as Y}from"./PriceImagerComponent.100ecfc5.js";import{_ as x}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as Z}from"./ServerGroupSelect.0eebe946.js";import"./selection.cc14137b.js";import"./QScrollObserver.42abb11c.js";import"./TouchPan.dc0265e9.js";import"./format.959830d0.js";import"./price.d927648c.js";import"./QSelect.85e4a152.js";import"./QMenu.5a066f52.js";import"./myAuth.8a31f6b7.js";const ee={__name:"MemberLastItem",props:{member:s(null)},setup(r){return(i,g)=>(n(),p(A,{dense:""},{default:a(()=>[t(f,{avatar:""},{default:a(()=>[t(C,{dense:"",flat:"",to:"/item/"+r.member.LastPricedItem.id},{default:a(()=>[t(B,{icon:r.member.LastPricedItem.icon,grade:r.member.LastPricedItem.grade},null,8,["icon","grade"])]),_:1},8,["to"])]),_:1}),t(f,{avatar:""},{default:a(()=>[t(d,{caption:""},{default:a(()=>[c(_(I(W)(r.member.LastPricedItem.Price.updatedAt)),1)]),_:1}),t(d,null,{default:a(()=>[c(_(r.member.LastPricedItem.name),1)]),_:1}),t(d,null,{default:a(()=>[t(Y,{currencyId:500,price:r.member.LastPricedItem.Price.price},null,8,["price"])]),_:1})]),_:1})]),_:1}))}};const te=["src"],ae={__name:"MemberAvaCell",props:{member:s(null)},setup(r){const i=String("https://auth.symphograph.ru/");return(g,m)=>(n(),y(G,null,[t(f,{avatar:""},{default:a(()=>[t(C,{round:"",glossy:"",class:"MemberAva",to:"/prices/"+r.member.accountId},{default:a(()=>[t(O,{size:"40px"},{default:a(()=>[k("img",{class:"MemberAvaImg",src:I(i)+"img/avatars/"+r.member.avaFileName,alt:""},null,8,te)]),_:1})]),_:1},8,["to"])]),_:1}),t(f,{class:"MemberInfo"},{default:a(()=>[t(d,null,{default:a(()=>[c(_(r.member.publicNick),1)]),_:1}),t(d,{caption:""},{default:a(()=>[c("\u0417\u0430\u043F\u0438\u0441\u0435\u0439:"+_(r.member.pricesCount),1)]),_:1}),r.member.followersCount?(n(),p(d,{key:0,caption:""},{default:a(()=>[c(" \u0414\u043E\u0432\u0435\u0440\u044F\u044E\u0442:"+_(r.member.followersCount),1)]),_:1})):h("",!0)]),_:1})],64))}};var re=x(ae,[["__scopeId","data-v-2052e84a"]]);const le={class:"WindowArea column"},oe=T({__name:"MembersPage",setup(r){const i=K(),g=String("https://api.aa.dllib.ru/"),m=U("curAccount"),v=s([]),b=s(!1),E=s(null);function V(l,o){S.post(g+"api/member.php",{params:{method:"followToggle",master:l,serverGroupId:m.value.settings.serverGroupId,isFollow:o}}).then(e=>{var u,w,M;if(!((u=e==null?void 0:e.data)!=null&&u.result))throw new Error;i.notify(X((M=(w=e==null?void 0:e.data)==null?void 0:w.result)!=null?M:"\u041E\u0439!"))}).catch(e=>{i.notify(L(e))})}j(()=>{P()});function P(){if(m.value.settings.serverGroupId===100){v.value=[];return}b.value=!0,S.post(g+"/api/member.php",{params:{method:"list",serverGroupId:m.value.settings.serverGroupId}}).then(l=>{var o,e,u;if(!((o=l==null?void 0:l.data)!=null&&o.result))throw new Error;v.value=(u=(e=l==null?void 0:l.data)==null?void 0:e.data)!=null?u:[]}).catch(l=>{v.value=[],i.notify(L(l))}).finally(()=>{b.value=!1})}function F(){return b.value}const Q=s();function $(){Q.value.saveServerGroup()}return J({title:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(l,o)=>(n(),y("div",le,[k("div",{class:"navigator",ref_key:"navigatorRef",ref:E},[t(Z,{groupId:I(m).settings.serverGroupId,onOnSelect:o[0]||(o[0]=e=>$()),onOnSave:o[1]||(o[1]=e=>P()),ref_key:"refServerGroupSelect",ref:Q},null,8,["groupId"])],512),t(N,{"animation-speed":200,color:"green",indeterminate:F()},null,8,["indeterminate"]),v.value.length?(n(),p(H,{key:0,class:"col"},{default:a(()=>[t(z,{dense:"",separator:""},{default:a(()=>[(n(!0),y(G,null,q(v.value,e=>(n(),p(A,{key:e.accountId,dense:""},{default:a(()=>[t(re,{member:e},null,8,["member"]),t(f,null,{default:a(()=>[t(ee,{member:e},null,8,["member"])]),_:2},1024),t(f,{side:""},{default:a(()=>[e.accountId!==I(m).id?(n(),p(R,{key:0,modelValue:e.isFollow,"onUpdate:modelValue":[u=>e.isFollow=u,u=>V(e.accountId,e.isFollow)]},{default:a(()=>[t(D,null,{default:a(()=>o[2]||(o[2]=[c("\u0414\u043E\u0432\u0435\u0440\u044F\u0442\u044C")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):h("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0)]))}});var Ae=x(oe,[["__scopeId","data-v-df6e4d3a"]]);export{Ae as default};
