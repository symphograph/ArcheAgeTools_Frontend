import{c as b,bo as Ft,bp as oa,H as _t,aI as Pt,K as Qt,M as Et,bq as Nt,r as T,br as ra,w as ve,h,at as Te,I as Bt,g as Mt,bs as Kt,n as vt,ae as J,ad as ia,aR as sa,aV as da,bt as ca,U as ft,aS as va,bu as fa,bv as ma,aQ as ha,i as ga,s as $e,v as mt,X as P,f as $,Z as Ke,_ as Ze,a1 as ya,a6 as _a,ba as Ma,$ as ba,av as Da,p as wt,o as wa,t as st,a5 as re,bb as pt,bi as pa,a3 as kt,F as xt,a4 as ka,bd as xa,be as Sa}from"./index.5175d5c0.js";import{u as Ca}from"./use-cache.b0833c75.js";import{p as Y}from"./format.865294d5.js";import{Q as qa}from"./QMenu.12801ee8.js";import{u as Ya,e as Ha,Q as ht,a as je,b as gt}from"./position-engine.a34c8035.js";import{T as Ia}from"./TouchPan.f946615c.js";import{Q as Oa}from"./QLinearProgress.810855e4.js";import{Q as Va}from"./QList.a850d90c.js";import{Q as Ta}from"./QScrollArea.fe94460b.js";import{api as St}from"./axios.c53f7cff.js";import{n as Ct}from"./myFuncts.80e53bd5.js";import{Q as $a}from"./QSelect.3b931d71.js";import{u as ja}from"./use-quasar.0c941a1e.js";import"./selection.50e195ba.js";import"./QScrollObserver.cf12e2de.js";const fe=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Aa(e,u,s){return Object.prototype.toString.call(e)==="[object Date]"&&(s=e.getDate(),u=e.getMonth()+1,e=e.getFullYear()),Qa(bt(e,u,s))}function qt(e,u,s){return zt(Pa(e,u,s))}function La(e){return Fa(e)===0}function nt(e,u){return u<=6?31:u<=11||La(e)?30:29}function Fa(e){const u=fe.length;let s=fe[0],i,v,r,D,d;if(e<s||e>=fe[u-1])throw new Error("Invalid Jalaali year "+e);for(d=1;d<u&&(i=fe[d],v=i-s,!(e<i));d+=1)s=i;return D=e-s,v-D<6&&(D=D-v+A(v+4,33)*33),r=G(G(D+1,33)-1,4),r===-1&&(r=4),r}function Zt(e,u){const s=fe.length,i=e+621;let v=-14,r=fe[0],D,d,_,S,f;if(e<r||e>=fe[s-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<s&&(D=fe[f],d=D-r,!(e<D));f+=1)v=v+A(d,33)*8+A(G(d,33),4),r=D;S=e-r,v=v+A(S,33)*8+A(G(S,33)+3,4),G(d,33)===4&&d-S===4&&(v+=1);const w=A(i,4)-A((A(i,100)+1)*3,4)-150,L=20+v-w;return u||(d-S<6&&(S=S-d+A(d+4,33)*33),_=G(G(S+1,33)-1,4),_===-1&&(_=4)),{leap:_,gy:i,march:L}}function Pa(e,u,s){const i=Zt(e,!0);return bt(i.gy,3,i.march)+(u-1)*31-A(u,7)*(u-7)+s-1}function Qa(e){const u=zt(e).gy;let s=u-621,i,v,r;const D=Zt(s,!1),d=bt(u,3,D.march);if(r=e-d,r>=0){if(r<=185)return v=1+A(r,31),i=G(r,31)+1,{jy:s,jm:v,jd:i};r-=186}else s-=1,r+=179,D.leap===1&&(r+=1);return v=7+A(r,30),i=G(r,30)+1,{jy:s,jm:v,jd:i}}function bt(e,u,s){let i=A((e+A(u-8,6)+100100)*1461,4)+A(153*G(u+9,12)+2,5)+s-34840408;return i=i-A(A(e+100100+A(u-8,6),100)*3,4)+752,i}function zt(e){let u=4*e+139361631;u=u+A(A(4*e+183187720,146097)*3,4)*4-3908;const s=A(G(u,1461),4)*5+308,i=A(G(s,153),5)+1,v=G(A(s,153),12)+1;return{gy:A(u,1461)-100100+A(8-v,6),gm:v,gd:i}}function A(e,u){return~~(e/u)}function G(e,u){return e-~~(e/u)*u}const Ea=["gregorian","persian"],Rt={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ea.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ut=["update:modelValue"];function ie(e){return e.year+"/"+Y(e.month)+"/"+Y(e.day)}function Xt(e,u){const s=b(()=>e.disable!==!0&&e.readonly!==!0),i=b(()=>s.value===!0?0:-1),v=b(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function r(){return e.locale!==void 0?{...u.lang.date,...e.locale}:u.lang.date}function D(d){const _=new Date,S=d===!0?null:0;if(e.calendar==="persian"){const f=Aa(_);return{year:f.jy,month:f.jm,day:f.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:S,minute:S,second:S,millisecond:S}}return{editable:s,tabindex:i,headerClass:v,getLocale:r,getCurrentDate:D}}const Wt=864e5,Na=36e5,yt=6e4,Jt="YYYY-MM-DDTHH:mm:ss.SSSZ",Ba=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ka=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,dt={};function Za(e,u){const s="("+u.days.join("|")+")",i=e+s;if(dt[i]!==void 0)return dt[i];const v="("+u.daysShort.join("|")+")",r="("+u.months.join("|")+")",D="("+u.monthsShort.join("|")+")",d={};let _=0;const S=e.replace(Ka,w=>{switch(_++,w){case"YY":return d.YY=_,"(-?\\d{1,2})";case"YYYY":return d.YYYY=_,"(-?\\d{1,4})";case"M":return d.M=_,"(\\d{1,2})";case"MM":return d.M=_,"(\\d{2})";case"MMM":return d.MMM=_,D;case"MMMM":return d.MMMM=_,r;case"D":return d.D=_,"(\\d{1,2})";case"Do":return d.D=_++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return d.D=_,"(\\d{2})";case"H":return d.H=_,"(\\d{1,2})";case"HH":return d.H=_,"(\\d{2})";case"h":return d.h=_,"(\\d{1,2})";case"hh":return d.h=_,"(\\d{2})";case"m":return d.m=_,"(\\d{1,2})";case"mm":return d.m=_,"(\\d{2})";case"s":return d.s=_,"(\\d{1,2})";case"ss":return d.s=_,"(\\d{2})";case"S":return d.S=_,"(\\d{1})";case"SS":return d.S=_,"(\\d{2})";case"SSS":return d.S=_,"(\\d{3})";case"A":return d.A=_,"(AM|PM)";case"a":return d.a=_,"(am|pm)";case"aa":return d.aa=_,"(a\\.m\\.|p\\.m\\.)";case"ddd":return v;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return d.Z=_,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return d.ZZ=_,"(Z|[+-]\\d{2}\\d{2})";case"X":return d.X=_,"(-?\\d+)";case"x":return d.x=_,"(-?\\d{4,})";default:return _--,w[0]==="["&&(w=w.substring(1,w.length-1)),w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:d,regex:new RegExp("^"+S)};return dt[i]=f,f}function Gt(e,u){return e!==void 0?e:u!==void 0?u.date:oa.date}function Yt(e,u=""){const s=e>0?"-":"+",i=Math.abs(e),v=Math.floor(i/60),r=i%60;return s+Y(v)+u+Y(r)}function Be(e,u,s,i,v){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(v!==void 0&&Object.assign(r,v),e==null||e===""||typeof e!="string")return r;u===void 0&&(u=Jt);const D=Gt(s,Ft.props),d=D.months,_=D.monthsShort,{regex:S,map:f}=Za(u,D),w=e.match(S);if(w===null)return r;let L="";if(f.X!==void 0||f.x!==void 0){const Q=parseInt(w[f.X!==void 0?f.X:f.x],10);if(isNaN(Q)===!0||Q<0)return r;const B=new Date(Q*(f.X!==void 0?1e3:1));r.year=B.getFullYear(),r.month=B.getMonth()+1,r.day=B.getDate(),r.hour=B.getHours(),r.minute=B.getMinutes(),r.second=B.getSeconds(),r.millisecond=B.getMilliseconds()}else{if(f.YYYY!==void 0)r.year=parseInt(w[f.YYYY],10);else if(f.YY!==void 0){const Q=parseInt(w[f.YY],10);r.year=Q<0?Q:2e3+Q}if(f.M!==void 0){if(r.month=parseInt(w[f.M],10),r.month<1||r.month>12)return r}else f.MMM!==void 0?r.month=_.indexOf(w[f.MMM])+1:f.MMMM!==void 0&&(r.month=d.indexOf(w[f.MMMM])+1);if(f.D!==void 0){if(r.day=parseInt(w[f.D],10),r.year===null||r.month===null||r.day<1)return r;const Q=i!=="persian"?new Date(r.year,r.month,0).getDate():nt(r.year,r.month);if(r.day>Q)return r}f.H!==void 0?r.hour=parseInt(w[f.H],10)%24:f.h!==void 0&&(r.hour=parseInt(w[f.h],10)%12,(f.A&&w[f.A]==="PM"||f.a&&w[f.a]==="pm"||f.aa&&w[f.aa]==="p.m.")&&(r.hour+=12),r.hour=r.hour%24),f.m!==void 0&&(r.minute=parseInt(w[f.m],10)%60),f.s!==void 0&&(r.second=parseInt(w[f.s],10)%60),f.S!==void 0&&(r.millisecond=parseInt(w[f.S],10)*10**(3-w[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(L=f.Z!==void 0?w[f.Z].replace(":",""):w[f.ZZ],r.timezoneOffset=(L[0]==="+"?-1:1)*(60*L.slice(1,3)+1*L.slice(3,5)))}return r.dateHash=Y(r.year,6)+"/"+Y(r.month)+"/"+Y(r.day),r.timeHash=Y(r.hour)+":"+Y(r.minute)+":"+Y(r.second)+L,r}function Ht(e){const u=new Date(e.getFullYear(),e.getMonth(),e.getDate());u.setDate(u.getDate()-(u.getDay()+6)%7+3);const s=new Date(u.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const i=u.getTimezoneOffset()-s.getTimezoneOffset();u.setHours(u.getHours()-i);const v=(u-s)/(Wt*7);return 1+Math.floor(v)}function se(e,u,s){const i=new Date(e),v=`set${s===!0?"UTC":""}`;switch(u){case"year":case"years":i[`${v}Month`](0);case"month":case"months":i[`${v}Date`](1);case"day":case"days":case"date":i[`${v}Hours`](0);case"hour":case"hours":i[`${v}Minutes`](0);case"minute":case"minutes":i[`${v}Seconds`](0);case"second":case"seconds":i[`${v}Milliseconds`](0)}return i}function at(e,u,s){return(e.getTime()-e.getTimezoneOffset()*yt-(u.getTime()-u.getTimezoneOffset()*yt))/s}function ea(e,u,s="days"){const i=new Date(e),v=new Date(u);switch(s){case"years":case"year":return i.getFullYear()-v.getFullYear();case"months":case"month":return(i.getFullYear()-v.getFullYear())*12+i.getMonth()-v.getMonth();case"days":case"day":case"date":return at(se(i,"day"),se(v,"day"),Wt);case"hours":case"hour":return at(se(i,"hour"),se(v,"hour"),Na);case"minutes":case"minute":return at(se(i,"minute"),se(v,"minute"),yt);case"seconds":case"second":return at(se(i,"second"),se(v,"second"),1e3)}}function It(e){return ea(e,se(e,"year"),"days")+1}function Ot(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Vt={YY(e,u,s){const i=this.YYYY(e,u,s)%100;return i>=0?Y(i):"-"+Y(Math.abs(i))},YYYY(e,u,s){return s!=null?s:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return Y(e.getMonth()+1)},MMM(e,u){return u.monthsShort[e.getMonth()]},MMMM(e,u){return u.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Ot(this.Q(e))},D(e){return e.getDate()},Do(e){return Ot(e.getDate())},DD(e){return Y(e.getDate())},DDD(e){return It(e)},DDDD(e){return Y(It(e),3)},d(e){return e.getDay()},dd(e,u){return this.dddd(e,u).slice(0,2)},ddd(e,u){return u.daysShort[e.getDay()]},dddd(e,u){return u.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ht(e)},ww(e){return Y(Ht(e))},H(e){return e.getHours()},HH(e){return Y(e.getHours())},h(e){const u=e.getHours();return u===0?12:u>12?u%12:u},hh(e){return Y(this.h(e))},m(e){return e.getMinutes()},mm(e){return Y(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Y(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Y(Math.floor(e.getMilliseconds()/10))},SSS(e){return Y(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,u,s,i){const v=i==null?e.getTimezoneOffset():i;return Yt(v,":")},ZZ(e,u,s,i){const v=i==null?e.getTimezoneOffset():i;return Yt(v)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ta(e,u,s,i,v){if(e!==0&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;u===void 0&&(u=Jt);const D=Gt(s,Ft.props);return u.replace(Ba,(d,_)=>d in Vt?Vt[d](r,D,i,v):_===void 0?d:_.split("\\]").join("]"))}const we=20,za=["Calendar","Years","Months"],Tt=e=>za.includes(e),ct=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ve=" \u2014 ";function ce(e){return e.year+"/"+Y(e.month)}var Ra=_t({name:"QDate",props:{...Rt,...Pt,...Qt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ct},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ct},navigationMaxYearMonth:{type:String,validator:ct},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Tt}},emits:[...Ut,"rangeStart","rangeEnd","navigation"],setup(e,{slots:u,emit:s}){const{proxy:i}=Mt(),{$q:v}=i,r=Et(e,v),{getCache:D}=Ca(),{tabindex:d,headerClass:_,getLocale:S,getCurrentDate:f}=Xt(e,v);let w;const L=Nt(e),Q=Kt(L),B=T(null),I=T(He()),O=T(S()),pe=b(()=>He()),V=b(()=>S()),y=b(()=>f()),n=T(et(I.value,O.value)),C=T(e.defaultView),me=v.lang.rtl===!0?"right":"left",te=T(me.value),z=T(me.value),Ae=n.value.year,he=T(Ae-Ae%we-(Ae<0?we:0)),R=T(null),ge=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(r.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ee=b(()=>e.color||"primary"),ae=b(()=>e.textColor||"white"),U=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),oe=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Z=b(()=>oe.value.filter(t=>typeof t=="string").map(t=>Ee(t,I.value,O.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ne=b(()=>{const t=a=>Ee(a,I.value,O.value);return oe.value.filter(a=>ra(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),ke=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=qt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Le=b(()=>e.calendar==="persian"?ie:(t,a,l)=>ta(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?I.value:a,l===void 0?O.value:l,t.year,t.timezoneOffset)),de=b(()=>Z.value.length+ne.value.reduce((t,a)=>t+1+ea(ke.value(a.to),ke.value(a.from)),0)),ye=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(R.value!==null){const l=R.value.init,g=ke.value(l);return O.value.daysShort[g.getDay()]+", "+O.value.monthsShort[l.month-1]+" "+l.day+Ve+"?"}if(de.value===0)return Ve;if(de.value>1)return`${de.value} ${O.value.pluralDay}`;const t=Z.value[0],a=ke.value(t);return isNaN(a.valueOf())===!0?Ve:O.value.headerTitle!==void 0?O.value.headerTitle(a,t):O.value.daysShort[a.getDay()]+", "+O.value.monthsShort[t.month-1]+" "+t.day}),ze=b(()=>Z.value.concat(ne.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),Fe=b(()=>Z.value.concat(ne.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),Re=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(de.value===0)return Ve;if(de.value>1){const t=ze.value,a=Fe.value,l=O.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+Ve+l[a.month-1]+" ":t.month!==a.month?Ve+l[a.month-1]:"")+" "+a.year}return Z.value[0].year}),xe=b(()=>{const t=[v.iconSet.datetime.arrowLeft,v.iconSet.datetime.arrowRight];return v.lang.rtl===!0?t.reverse():t}),Se=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):O.value.firstDayOfWeek),Pe=b(()=>{const t=O.value.daysShort,a=Se.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),le=b(()=>{const t=n.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():nt(t.year,t.month)}),Ue=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),N=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),K=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Qe=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return N.value!==null&&N.value.year>=n.value.year&&(t.year.prev=!1,N.value.year===n.value.year&&N.value.month>=n.value.month&&(t.month.prev=!1)),K.value!==null&&K.value.year<=n.value.year&&(t.year.next=!1,K.value.year===n.value.year&&K.value.month<=n.value.month&&(t.month.next=!1)),t}),Ce=b(()=>{const t={};return Z.value.forEach(a=>{const l=ce(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),Xe=b(()=>{const t={};return ne.value.forEach(a=>{const l=ce(a.from),g=ce(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===g?a.to.day:void 0,range:a}),l<g){let m;const{year:H,month:M}=a.from,x=M<12?{year:H,month:M+1}:{year:H+1,month:1};for(;(m=ce(x))<=g;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===g?a.to.day:void 0,range:a}),x.month++,x.month>12&&(x.year++,x.month=1)}}),t}),_e=b(()=>{if(R.value===null)return;const{init:t,initHash:a,final:l,finalHash:g}=R.value,[m,H]=a<=g?[t,l]:[l,t],M=ce(m),x=ce(H);if(M!==X.value&&x!==X.value)return;const j={};return M===X.value?(j.from=m.day,j.includeFrom=!0):j.from=1,x===X.value?(j.to=H.day,j.includeTo=!0):j.to=le.value,j}),X=b(()=>ce(n.value)),lt=b(()=>{const t={};if(e.options===void 0){for(let l=1;l<=le.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=le.value;l++){const g=X.value+"/"+Y(l);t[l]=a(g)}return t}),ut=b(()=>{const t={};if(e.events===void 0)for(let a=1;a<=le.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=le.value;l++){const g=X.value+"/"+Y(l);t[l]=a(g)===!0&&Ue.value(g)}}return t}),qe=b(()=>{let t,a;const{year:l,month:g}=n.value;if(e.calendar!=="persian")t=new Date(l,g-1,1),a=new Date(l,g-1,0).getDate();else{const m=qt(l,g,1);t=new Date(m.gy,m.gm-1,m.gd);let H=g-1,M=l;H===0&&(H=12,M--),a=nt(M,H)}return{days:t.getDay()-Se.value-1,endDay:a}}),Me=b(()=>{const t=[],{days:a,endDay:l}=qe.value,g=a<0?a+7:a;if(g<6)for(let M=l-g;M<=l;M++)t.push({i:M,fill:!0});const m=t.length;for(let M=1;M<=le.value;M++){const x={i:M,event:ut.value[M],classes:[]};lt.value[M]===!0&&(x.in=!0,x.flat=!0),t.push(x)}if(Ce.value[X.value]!==void 0&&Ce.value[X.value].forEach(M=>{const x=m+M-1;Object.assign(t[x],{selected:!0,unelevated:!0,flat:!1,color:ee.value,textColor:ae.value})}),Xe.value[X.value]!==void 0&&Xe.value[X.value].forEach(M=>{if(M.from!==void 0){const x=m+M.from-1,j=m+(M.to||le.value)-1;for(let Ne=x;Ne<=j;Ne++)Object.assign(t[Ne],{range:M.range,unelevated:!0,color:ee.value,textColor:ae.value});Object.assign(t[x],{rangeFrom:!0,flat:!1}),M.to!==void 0&&Object.assign(t[j],{rangeTo:!0,flat:!1})}else if(M.to!==void 0){const x=m+M.to-1;for(let j=m;j<=x;j++)Object.assign(t[j],{range:M.range,unelevated:!0,color:ee.value,textColor:ae.value});Object.assign(t[x],{flat:!1,rangeTo:!0})}else{const x=m+le.value-1;for(let j=m;j<=x;j++)Object.assign(t[j],{range:M.range,unelevated:!0,color:ee.value,textColor:ae.value})}}),_e.value!==void 0){const M=m+_e.value.from-1,x=m+_e.value.to-1;for(let j=M;j<=x;j++)t[j].color=ee.value,t[j].editRange=!0;_e.value.includeFrom===!0&&(t[M].editRangeFrom=!0),_e.value.includeTo===!0&&(t[x].editRangeTo=!0)}n.value.year===y.value.year&&n.value.month===y.value.month&&(t[m+y.value.day-1].today=!0);const H=t.length%7;if(H>0){const M=7-H;for(let x=1;x<=M;x++)t.push({i:x,fill:!0})}return t.forEach(M=>{let x="q-date__calendar-item ";M.fill===!0?x+="q-date__calendar-item--fill":(x+=`q-date__calendar-item--${M.in===!0?"in":"out"}`,M.range!==void 0&&(x+=` q-date__range${M.rangeTo===!0?"-to":M.rangeFrom===!0?"-from":""}`),M.editRange===!0&&(x+=` q-date__edit-range${M.editRangeFrom===!0?"-from":""}${M.editRangeTo===!0?"-to":""}`),(M.range!==void 0||M.editRange===!0)&&(x+=` text-${M.color}`)),M.classes=x}),t}),Ye=b(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});ve(()=>e.modelValue,t=>{if(w===t)w=0;else{const a=et(I.value,O.value);E(a.year,a.month,a)}}),ve(C,()=>{B.value!==null&&i.$el.contains(document.activeElement)===!0&&B.value.focus()}),ve(()=>n.value.year+"|"+n.value.month,()=>{s("navigation",{year:n.value.year,month:n.value.month})}),ve(pe,t=>{Dt(t,O.value,"mask"),I.value=t}),ve(V,t=>{Dt(I.value,t,"locale"),O.value=t});function We(){const t=y.value,a=Ce.value[ce(t)];(a===void 0||a.includes(t.day)===!1)&&ot(t),be(t.year,t.month)}function Je(t){Tt(t)===!0&&(C.value=t)}function Ge(t,a){["month","year"].includes(t)&&(t==="month"?c:p)(a===!0?-1:1)}function be(t,a){C.value="Calendar",E(t,a)}function De(t,a){if(e.range===!1||!t){R.value=null;return}const l=Object.assign({...n.value},t),g=a!==void 0?Object.assign({...n.value},a):l;R.value={init:l,initHash:ie(l),final:g,finalHash:ie(g)},be(l.year,l.month)}function He(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,a,l){return Be(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function et(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return o();const g=l[l.length-1],m=Ee(g.from!==void 0?g.from:g,t,a);return m.dateHash===null?o():m}function o(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=y.value!==void 0?y.value:f();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+Y(a)+"/01"}}function c(t){let a=n.value.year,l=Number(n.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),E(a,l),U.value===!0&&Ie("month")}function p(t){const a=Number(n.value.year)+t;E(a,n.value.month),U.value===!0&&Ie("year")}function q(t){E(t,n.value.month),C.value=e.defaultView==="Years"?"Months":"Calendar",U.value===!0&&Ie("year")}function F(t){E(n.value.year,t),C.value="Calendar",U.value===!0&&Ie("month")}function W(t,a){const l=Ce.value[a];(l!==void 0&&l.includes(t.day)===!0?rt:ot)(t)}function k(t){return{year:t.year,month:t.month,day:t.day}}function E(t,a,l){if(N.value!==null&&t<=N.value.year&&(t=N.value.year,a<N.value.month&&(a=N.value.month)),K.value!==null&&t>=K.value.year&&(t=K.value.year,a>K.value.month&&(a=K.value.month)),l!==void 0){const{hour:m,minute:H,second:M,millisecond:x,timezoneOffset:j,timeHash:Ne}=l;Object.assign(n.value,{hour:m,minute:H,second:M,millisecond:x,timezoneOffset:j,timeHash:Ne})}const g=t+"/"+Y(a)+"/01";g!==n.value.dateHash&&(te.value=n.value.dateHash<g==(v.lang.rtl!==!0)?"left":"right",t!==n.value.year&&(z.value=te.value),vt(()=>{he.value=t-t%we-(t<0?we:0),Object.assign(n.value,{year:t,month:a,day:1,dateHash:g})}))}function ue(t,a,l){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;w=g;const{reason:m,details:H}=tt(a,l);s("update:modelValue",g,m,H)}function Ie(t){const a=Z.value[0]!==void 0&&Z.value[0].dateHash!==null?{...Z.value[0]}:{...n.value};vt(()=>{a.year=n.value.year,a.month=n.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():nt(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const g=Oe(a);w=g;const{details:m}=tt("",a);s("update:modelValue",g,t,m)})}function tt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...k(a.target),from:k(a.from),to:k(a.to)}}:{reason:`${t}-day`,details:k(a)}}function Oe(t,a,l){return t.from!==void 0?{from:Le.value(t.from,a,l),to:Le.value(t.to,a,l)}:Le.value(t,a,l)}function ot(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=ie(t.from),g=ie(t.to),m=Z.value.filter(M=>M.dateHash<l||M.dateHash>g),H=ne.value.filter(({from:M,to:x})=>x.dateHash<l||M.dateHash>g);a=m.concat(H).concat(t).map(M=>Oe(M))}else{const l=oe.value.slice();l.push(Oe(t)),a=l}else a=Oe(t);ue(a,"add",t)}function rt(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=Oe(t);t.from!==void 0?a=e.modelValue.filter(g=>g.from!==void 0?g.from!==l.from&&g.to!==l.to:!0):a=e.modelValue.filter(g=>g!==l),a.length===0&&(a=null)}ue(a,"remove",t)}function Dt(t,a,l){const g=Z.value.concat(ne.value).map(m=>Oe(m,t,a)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);s("update:modelValue",(e.multiple===!0?g:g[0])||null,l)}function aa(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+_.value},[h("div",{class:"relative-position"},[h(Te,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+Re.value,class:"q-date__header-subtitle q-date__header-link "+(C.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...D("vY",{onClick(){C.value="Years"},onKeyup(t){t.keyCode===13&&(C.value="Years")}})},[Re.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(Te,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+ye.value,class:"q-date__header-title-label q-date__header-link "+(C.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...D("vC",{onClick(){C.value="Calendar"},onKeyup(t){t.keyCode===13&&(C.value="Calendar")}})},[ye.value]))]),e.todayBtn===!0?h(J,{class:"q-date__header-today self-start",icon:v.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:We}):null])])}function it({label:t,type:a,key:l,dir:g,goTo:m,boundaries:H,cls:M}){return[h("div",{class:"row items-center q-date__arrow"},[h(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:xe.value[0],tabindex:d.value,disable:H.prev===!1,...D("go-#"+a,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+M},[h(Te,{name:"q-transition--jump-"+g},()=>h("div",{key:l},[h(J,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...D("view#"+a,{onClick:()=>{C.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:xe.value[1],tabindex:d.value,disable:H.next===!1,...D("go+#"+a,{onClick(){m(1)}})})])]}const na={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},it({label:O.value.months[n.value.month-1],type:"Months",key:n.value.month,dir:te.value,goTo:c,boundaries:Qe.value.month,cls:" col"}).concat(it({label:n.value.year,type:"Years",key:n.value.year,dir:z.value,goTo:p,boundaries:Qe.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Pe.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(Te,{name:"q-transition--slide-"+te.value},()=>h("div",{key:X.value,class:"q-date__calendar-days fit"},Me.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(J,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...D("day#"+t.i,{onClick:()=>{la(t.i)},onMouseover:()=>{ua(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=n.value.year===y.value.year,a=g=>N.value!==null&&n.value.year===N.value.year&&N.value.month>g||K.value!==null&&n.value.year===K.value.year&&K.value.month<g,l=O.value.monthsShort.map((g,m)=>{const H=n.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(J,{class:t===!0&&y.value.month===m+1?"q-date__today":null,flat:H!==!0,label:g,unelevated:H,color:H===!0?ee.value:null,textColor:H===!0?ae.value:null,tabindex:d.value,disable:a(m+1),...D("month#"+m,{onClick:()=>{F(m+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[it({label:n.value.year,type:"Years",key:n.value.year,dir:z.value,goTo:p,boundaries:Qe.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=he.value,a=t+we,l=[],g=m=>N.value!==null&&N.value.year>m||K.value!==null&&K.value.year<m;for(let m=t;m<=a;m++){const H=n.value.year===m;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(J,{key:"yr"+m,class:y.value.year===m?"q-date__today":null,flat:!H,label:m,dense:!0,unelevated:H,color:H===!0?ee.value:null,textColor:H===!0?ae.value:null,tabindex:d.value,disable:g(m),...D("yr#"+m,{onClick:()=>{q(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(J,{round:!0,dense:!0,flat:!0,icon:xe.value[0],tabindex:d.value,disable:g(t),...D("y-",{onClick:()=>{he.value-=we}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(J,{round:!0,dense:!0,flat:!0,icon:xe.value[1],tabindex:d.value,disable:g(a),...D("y+",{onClick:()=>{he.value+=we}})})])])}};function la(t){const a={...n.value,day:t};if(e.range===!1){W(a,X.value);return}if(R.value===null){const l=Me.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&l.range!==void 0){rt({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){rt(a);return}const g=ie(a);R.value={init:a,initHash:g,final:a,finalHash:g},s("rangeStart",k(a))}else{const l=R.value.initHash,g=ie(a),m=l<=g?{from:R.value.init,to:a}:{from:a,to:R.value.init};R.value=null,ot(l===g?a:{target:a,...m}),s("rangeEnd",{from:k(m.from),to:k(m.to)})}}function ua(t){if(R.value!==null){const a={...n.value,day:t};Object.assign(R.value,{final:a,finalHash:ie(a)})}}return Object.assign(i,{setToday:We,setView:Je,offsetCalendar:Ge,setCalendarTo:be,setEditingRange:De}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(Te,{name:"q-transition--fade"},na[C.value])])],a=Bt(u.default);return a!==void 0&&t.push(h("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&Q(t,"push"),h("div",{class:ge.value,...Ye.value},[aa(),h("div",{ref:B,class:"q-date__main col column",tabindex:-1},t)])}}}),$t=_t({name:"QPopupProxy",props:{...Ya,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:u,emit:s,attrs:i}){const{proxy:v}=Mt(),{$q:r}=v,D=T(!1),d=T(null),_=b(()=>parseInt(e.breakpoint,10)),{canShow:S}=Ha({showing:D});function f(){return r.screen.width<_.value||r.screen.height<_.value?"dialog":"menu"}const w=T(f()),L=b(()=>w.value==="menu"?{maxHeight:"99vh"}:{});ve(()=>f(),I=>{D.value!==!0&&(w.value=I)});function Q(I){D.value=!0,s("show",I)}function B(I){D.value=!1,w.value=f(),s("hide",I)}return Object.assign(v,{show(I){S(I)===!0&&d.value.show(I)},hide(I){d.value.hide(I)},toggle(I){d.value.toggle(I)}}),ia(v,"currentComponent",()=>({type:w.value,ref:d.value})),()=>{const I={ref:d,...L.value,...i,onShow:Q,onHide:B};let O;return w.value==="dialog"?O=sa:(O=qa,Object.assign(I,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(O,I,u.default)}}});function Ua(e,u){if(e.hour!==null){if(e.minute===null)return"minute";if(u===!0&&e.second===null)return"second"}return"hour"}function Xa(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var Wa=_t({name:"QTime",props:{...Qt,...Pt,...Rt,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ut,setup(e,{slots:u,emit:s}){const i=Mt(),{$q:v}=i.proxy,r=Et(e,v),{tabindex:D,headerClass:d,getLocale:_,getCurrentDate:S}=Xt(e,v),f=Nt(e),w=Kt(f);let L,Q;const B=T(null),I=b(()=>Re()),O=b(()=>_()),pe=b(()=>xe()),V=Be(e.modelValue,I.value,O.value,e.calendar,pe.value),y=T(Ua(V)),n=T(V),C=T(V.hour===null||V.hour<12),me=b(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(r.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),te=b(()=>{const o=n.value;return{hour:o.hour===null?"--":z.value===!0?Y(o.hour):String(C.value===!0?o.hour===0?12:o.hour:o.hour>12?o.hour-12:o.hour),minute:o.minute===null?"--":Y(o.minute),second:o.second===null?"--":Y(o.second)}}),z=b(()=>e.format24h!==null?e.format24h:v.lang.date.format24h),Ae=b(()=>{const o=y.value==="hour",c=o===!0?12:60,p=n.value[y.value];let F=`rotate(${Math.round(p*(360/c))-180}deg) translateX(-50%)`;return o===!0&&z.value===!0&&n.value.hour>=12&&(F+=" scale(.7)"),{transform:F}}),he=b(()=>n.value.hour!==null),R=b(()=>he.value===!0&&n.value.minute!==null),ge=b(()=>e.hourOptions!==void 0?o=>e.hourOptions.includes(o):e.options!==void 0?o=>e.options(o,null,null):null),ee=b(()=>e.minuteOptions!==void 0?o=>e.minuteOptions.includes(o):e.options!==void 0?o=>e.options(n.value.hour,o,null):null),ae=b(()=>e.secondOptions!==void 0?o=>e.secondOptions.includes(o):e.options!==void 0?o=>e.options(n.value.hour,n.value.minute,o):null),U=b(()=>{if(ge.value===null)return null;const o=ye(0,11,ge.value),c=ye(12,11,ge.value);return{am:o,pm:c,values:o.values.concat(c.values)}}),oe=b(()=>ee.value!==null?ye(0,59,ee.value):null),Z=b(()=>ae.value!==null?ye(0,59,ae.value):null),ne=b(()=>{switch(y.value){case"hour":return U.value;case"minute":return oe.value;case"second":return Z.value}}),ke=b(()=>{let o,c,p=0,q=1;const F=ne.value!==null?ne.value.values:void 0;y.value==="hour"?z.value===!0?(o=0,c=23):(o=0,c=11,C.value===!1&&(p=12)):(o=0,c=55,q=5);const W=[];for(let k=o,E=o;k<=c;k+=q,E++){const ue=k+p,Ie=F!==void 0&&F.includes(ue)===!1,tt=y.value==="hour"&&k===0?z.value===!0?"00":"12":k;W.push({val:ue,index:E,disable:Ie,label:tt})}return W}),Le=b(()=>[[Ia,le,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ve(()=>e.modelValue,o=>{const c=Be(o,I.value,O.value,e.calendar,pe.value);(c.dateHash!==n.value.dateHash||c.timeHash!==n.value.timeHash)&&(n.value=c,c.hour===null?y.value="hour":C.value=c.hour<12)}),ve([I,O],()=>{vt(()=>{He()})});function de(){const o={...S(),...Xa()};He(o),Object.assign(n.value,o),y.value="hour"}function ye(o,c,p){const q=Array.apply(null,{length:c+1}).map((F,W)=>{const k=W+o;return{index:k,val:p(k)===!0}}).filter(F=>F.val===!0).map(F=>F.index);return{min:q[0],max:q[q.length-1],values:q,threshold:c+1}}function ze(o,c,p){const q=Math.abs(o-c);return Math.min(q,p-q)}function Fe(o,{min:c,max:p,values:q,threshold:F}){if(o===c)return c;if(o<c||o>p)return ze(o,c,F)<=ze(o,p,F)?c:p;const W=q.findIndex(ue=>o<=ue),k=q[W-1],E=q[W];return o-k<=E-o?k:E}function Re(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function xe(){if(typeof e.defaultDate!="string"){const o=S(!0);return o.dateHash=ie(o),o}return Be(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Se(){return ca(i)===!0||ne.value!==null&&(ne.value.values.length===0||y.value==="hour"&&z.value!==!0&&U.value[C.value===!0?"am":"pm"].values.length===0)}function Pe(){const o=B.value,{top:c,left:p,width:q}=o.getBoundingClientRect(),F=q/2;return{top:c+F,left:p+F,dist:F*.7}}function le(o){if(Se()!==!0){if(o.isFirst===!0){L=Pe(),Q=N(o.evt,L);return}Q=N(o.evt,L,Q),o.isFinal===!0&&(L=!1,Q=null,Ue())}}function Ue(){y.value==="hour"?y.value="minute":e.withSeconds&&y.value==="minute"&&(y.value="second")}function N(o,c,p){const q=da(o),F=Math.abs(q.top-c.top),W=Math.sqrt(Math.pow(Math.abs(q.top-c.top),2)+Math.pow(Math.abs(q.left-c.left),2));let k,E=Math.asin(F/W)*(180/Math.PI);if(q.top<c.top?E=c.left<q.left?90-E:270+E:E=c.left<q.left?E+90:270-E,y.value==="hour"){if(k=E/30,U.value!==null){const ue=z.value!==!0?C.value===!0:U.value.am.values.length!==0&&U.value.pm.values.length!==0?W>=c.dist:U.value.am.values.length!==0;k=Fe(k+(ue===!0?0:12),U.value[ue===!0?"am":"pm"])}else k=Math.round(k),z.value===!0?W<c.dist?k<12&&(k+=12):k===12&&(k=0):C.value===!0&&k===12?k=0:C.value===!1&&k!==12&&(k+=12);z.value===!0&&(C.value=k<12)}else k=Math.round(E/6)%60,y.value==="minute"&&oe.value!==null?k=Fe(k,oe.value):y.value==="second"&&Z.value!==null&&(k=Fe(k,Z.value));return p!==k&&We[y.value](k),k}const K={hour(){y.value="hour"},minute(){y.value="minute"},second(){y.value="second"}};function Qe(o){o.keyCode===13&&Je()}function Ce(o){o.keyCode===13&&Ge()}function Xe(o){Se()!==!0&&(v.platform.is.desktop!==!0&&N(o,Pe()),Ue())}function _e(o){Se()!==!0&&N(o,Pe())}function X(o){if(o.keyCode===13)y.value="hour";else if([37,39].includes(o.keyCode)){const c=o.keyCode===37?-1:1;if(U.value!==null){const p=z.value===!0?U.value.values:U.value[C.value===!0?"am":"pm"].values;if(p.length===0)return;if(n.value.hour===null)qe(p[0]);else{const q=(p.length+p.indexOf(n.value.hour)+c)%p.length;qe(p[q])}}else{const p=z.value===!0?24:12,q=z.value!==!0&&C.value===!1?12:0,F=n.value.hour===null?-c:n.value.hour;qe(q+(24+F+c)%p)}}}function lt(o){if(o.keyCode===13)y.value="minute";else if([37,39].includes(o.keyCode)){const c=o.keyCode===37?-1:1;if(oe.value!==null){const p=oe.value.values;if(p.length===0)return;if(n.value.minute===null)Me(p[0]);else{const q=(p.length+p.indexOf(n.value.minute)+c)%p.length;Me(p[q])}}else{const p=n.value.minute===null?-c:n.value.minute;Me((60+p+c)%60)}}}function ut(o){if(o.keyCode===13)y.value="second";else if([37,39].includes(o.keyCode)){const c=o.keyCode===37?-1:1;if(Z.value!==null){const p=Z.value.values;if(p.length===0)return;if(n.value.seconds===null)Ye(p[0]);else{const q=(p.length+p.indexOf(n.value.second)+c)%p.length;Ye(p[q])}}else{const p=n.value.second===null?-c:n.value.second;Ye((60+p+c)%60)}}}function qe(o){n.value.hour!==o&&(n.value.hour=o,De())}function Me(o){n.value.minute!==o&&(n.value.minute=o,De())}function Ye(o){n.value.second!==o&&(n.value.second=o,De())}const We={hour:qe,minute:Me,second:Ye};function Je(){C.value===!1&&(C.value=!0,n.value.hour!==null&&(n.value.hour-=12,De()))}function Ge(){C.value===!0&&(C.value=!1,n.value.hour!==null&&(n.value.hour+=12,De()))}function be(o){const c=e.modelValue;y.value!==o&&c!==void 0&&c!==null&&c!==""&&typeof c!="string"&&(y.value=o)}function De(){if(ge.value!==null&&ge.value(n.value.hour)!==!0){n.value=Be(),be("hour");return}if(ee.value!==null&&ee.value(n.value.minute)!==!0){n.value.minute=null,n.value.second=null,be("minute");return}if(e.withSeconds===!0&&ae.value!==null&&ae.value(n.value.second)!==!0){n.value.second=null,be("second");return}n.value.hour===null||n.value.minute===null||e.withSeconds===!0&&n.value.second===null||He()}function He(o){const c=Object.assign({...n.value},o),p=e.calendar==="persian"?Y(c.hour)+":"+Y(c.minute)+(e.withSeconds===!0?":"+Y(c.second):""):ta(new Date(c.year,c.month===null?null:c.month-1,c.day,c.hour,c.minute,c.second,c.millisecond),I.value,O.value,c.year,c.timezoneOffset);c.changed=p!==e.modelValue,s("update:modelValue",p,c)}function Ee(){const o=[h("div",{class:"q-time__link "+(y.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onClick:K.hour,onKeyup:X},te.value.hour),h("div",":"),h("div",he.value===!0?{class:"q-time__link "+(y.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onKeyup:lt,onClick:K.minute}:{class:"q-time__link"},te.value.minute)];e.withSeconds===!0&&o.push(h("div",":"),h("div",R.value===!0?{class:"q-time__link "+(y.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onKeyup:ut,onClick:K.second}:{class:"q-time__link"},te.value.second));const c=[h("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},o)];return z.value===!1&&c.push(h("div",{class:"q-time__header-ampm column items-between no-wrap"},[h("div",{class:"q-time__link "+(C.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onClick:Je,onKeyup:Qe},"AM"),h("div",{class:"q-time__link "+(C.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onClick:Ge,onKeyup:Ce},"PM")])),h("div",{class:"q-time__header flex flex-center no-wrap "+d.value},c)}function et(){const o=n.value[y.value];return h("div",{class:"q-time__content col relative-position"},[h(Te,{name:"q-transition--scale"},()=>h("div",{key:"clock"+y.value,class:"q-time__container-parent absolute-full"},[h("div",{ref:B,class:"q-time__container-child fit overflow-hidden"},[ft(h("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Xe,onMousedown:_e},[h("div",{class:"q-time__clock-circle fit"},[h("div",{class:"q-time__clock-pointer"+(n.value[y.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:Ae.value}),ke.value.map(c=>h("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${c.index}`+(c.val===o?" q-time__clock-position--active "+d.value:c.disable===!0?" q-time__clock-position--disable":"")},[h("span",c.label)]))])]),Le.value)])])),e.nowBtn===!0?h(J,{class:"q-time__now-button absolute",icon:v.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:D.value,onClick:de}):null])}return i.proxy.setNow=de,()=>{const o=[et()],c=Bt(u.default);return c!==void 0&&o.push(h("div",{class:"q-time__actions"},c)),e.name!==void 0&&e.disable!==!0&&w(o,"push"),h("div",{class:me.value,tabindex:-1},[Ee(),h("div",{class:"q-time__main col overflow-auto"},o)])}}});function jt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const u=parseInt(e,10);return isNaN(u)?0:u}var At=va({name:"close-popup",beforeMount(e,{value:u}){const s={depth:jt(u),handler(i){s.depth!==0&&setTimeout(()=>{const v=fa(e);v!==void 0&&ma(v,i,s.depth)})},handlerKey(i){ha(i,13)===!0&&s.handler(i)}};e.__qclosepopup=s,e.addEventListener("click",s.handler),e.addEventListener("keyup",s.handlerKey)},updated(e,{value:u,oldValue:s}){u!==s&&(e.__qclosepopup.depth=jt(u))},beforeUnmount(e){const u=e.__qclosepopup;e.removeEventListener("click",u.handler),e.removeEventListener("keyup",u.handlerKey),delete e.__qclosepopup}});const Lt={__name:"CitySelect",props:{cityList:Array,cLabel:String},emits:["onSelect"],setup(e,{emit:u}){const s=e,i=T("Input"),v=ga("selectOptionsStyle"),r=T([...s.cityList]),D=T();function d(_,S,f){if(_===""){S(()=>{r.value=[...s.cityList]});return}S(()=>{const w=_.toLowerCase();let L=[...s.cityList];_&&(L=[...L].filter(Q=>Q.name.toLowerCase().indexOf(w)>-1)),r.value=L})}return(_,S)=>($e(),mt($a,{options:r.value,borderless:"","option-value":"kladrId","option-label":"name","map-options":"",class:Ma(i.value),onFocus:S[0]||(S[0]=f=>i.value="Input InputActive"),onBlur:S[1]||(S[1]=f=>i.value="Input"),"popup-content-style":ba(v),clearable:"","fill-input":"","hide-selected":"",label:e.cLabel,"use-input":"","input-debounce":0,onFilter:d,modelValue:D.value,"onUpdate:modelValue":[S[2]||(S[2]=f=>D.value=f),S[3]||(S[3]=f=>u("onSelect",D.value))],"emit-value":""},{option:P(f=>[$(gt,ya(_a(f.itemProps)),{default:P(()=>[$(ht,null,{default:P(()=>[$(je,null,{default:P(()=>[Ke(Ze(f.opt.name),1)]),_:2},1024),$(je,{caption:""},{default:P(()=>[Ke(Ze(f.opt.address),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["options","class","popup-content-style","label","modelValue"]))}};const Ja=e=>(xa("data-v-b5b63cb6"),e=e(),Sa(),e),Ga={class:"WindowArea column"},en={class:"navigator",ref:"navigatorRef"},tn={class:"row items-center justify-end"},an={class:"row items-center justify-end"},nn={class:"ItemArea"},ln=Ja(()=>re("span",{style:{color:"red"}},"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u0447\u0443\u0434\u043E\u0432\u0438\u0449\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430",-1)),un={__name:"DeliveryPage",setup(e){const u=String("https://api.delivery.demo.symphograph.ru/"),s=ja(),i=T([]),v=T([]),r=T("5500000100000"),D=T("5400000100000");wt("sourceKladr",r),wt("targetKladr",D),T(0);const d=T(!1),_=b(()=>!r.value||!D.value||r.value===D.value),S=T(!1),f=T(!1),w=T("2023-09-27 17:45"),L=T(2);function Q(){return S.value||f.value}function B(){f.value=!0,St.get(u+"api/city.php",{params:{method:"list"}}).then(V=>{var y,n,C;if(!((y=V==null?void 0:V.data)!=null&&y.result))throw new Error;i.value=(C=(n=V==null?void 0:V.data)==null?void 0:n.data)!=null?C:[]}).catch(V=>{s.notify(Ct(V))}).finally(()=>{f.value=!1})}function I(V){r.value=V}function O(V){D.value=V}function pe(){_.value||(f.value=!0,St.get(u+"api/delivery.php",{params:{method:"list",type:d.value?"fast":"slow",weight:L.value,sourceKladr:r.value,targetKladr:D.value,startedAt:w.value}}).then(V=>{var y,n,C;if(!((y=V==null?void 0:V.data)!=null&&y.result))throw new Error;v.value=(C=(n=V==null?void 0:V.data)==null?void 0:n.data)!=null?C:[]}).catch(V=>{s.notify(Ct(V))}).finally(()=>{f.value=!1}))}return wa(()=>{B()}),(V,y)=>($e(),st("div",Ga,[re("div",en,[re("div",null,[$(Lt,{cityList:i.value,cLabel:"\u041E\u0442\u043A\u0443\u0434\u0430",onOnSelect:y[0]||(y[0]=n=>I(n))},null,8,["cityList"]),$(Lt,{cityList:i.value,cLabel:"\u041A\u0443\u0434\u0430",onOnSelect:y[1]||(y[1]=n=>O(n))},null,8,["cityList"])]),re("div",null,[re("div",null,[$(pt,{type:"number",label:"\u0432\u0435\u0441",min:"1",suffix:"\u043A\u0433",class:"Input",borderless:"",modelValue:L.value,"onUpdate:modelValue":y[2]||(y[2]=n=>L.value=n)},null,8,["modelValue"]),$(pa,{label:"\u0411\u044B\u0441\u0442\u0440\u0430\u044F","model-value":d.value,onClick:y[3]||(y[3]=n=>d.value=!d.value),disable:_.value},null,8,["model-value","disable"])])]),re("div",null,[$(pt,{modelValue:w.value,"onUpdate:modelValue":y[6]||(y[6]=n=>w.value=n),class:"Input",borderless:""},{prepend:P(()=>[$(kt,{name:"event",class:"cursor-pointer"},{default:P(()=>[$($t,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:P(()=>[$(Ra,{modelValue:w.value,"onUpdate:modelValue":y[4]||(y[4]=n=>w.value=n),mask:"YYYY-MM-DD HH:mm"},{default:P(()=>[re("div",tn,[ft($(J,{label:"Close",color:"primary",flat:""},null,512),[[At]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:P(()=>[$(kt,{name:"access_time",class:"cursor-pointer"},{default:P(()=>[$($t,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:P(()=>[$(Wa,{modelValue:w.value,"onUpdate:modelValue":y[5]||(y[5]=n=>w.value=n),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:P(()=>[re("div",an,[ft($(J,{label:"Close",color:"primary",flat:""},null,512),[[At]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),$(J,{icon:"update",class:"Input",flat:"",disable:_.value,label:"\u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044C",onClick:y[7]||(y[7]=n=>pe())},null,8,["disable"])])],512),$(Oa,{"animation-speed":200,color:"green",indeterminate:Q()},null,8,["indeterminate"]),$(Ta,{class:"col myScrollArea"},{default:P(()=>[re("div",nn,[$(Va,{separator:""},{default:P(()=>[($e(!0),st(xt,null,ka(v.value,(n,C)=>($e(),st(xt,{key:C},[n.error?($e(),mt(gt,{key:1},{default:P(()=>[$(ht,null,{default:P(()=>[$(je,null,{default:P(()=>[ln]),_:1}),$(je,{caption:""},{default:P(()=>[Ke("\u0414\u0430\u043D\u043D\u044B\u0435 \u044D\u0442\u043E\u0439 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u0438\u0441\u044C")]),_:1})]),_:1})]),_:1})):($e(),mt(gt,{key:0},{default:P(()=>[$(ht,null,{default:P(()=>[$(je,null,{default:P(()=>{var me,te;return[Ke(Ze((te=(me=n==null?void 0:n.company)==null?void 0:me.name)!=null?te:"kjk"),1)]}),_:2},1024),$(je,{caption:""},{default:P(()=>[Ke(" \u0414\u043E\u0441\u0442\u0430\u0432\u0438\u0442: "+Ze(n==null?void 0:n.deliveredAt)+" \u0437\u0430 "+Ze(n.price)+".\u0440 ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))],64))),128))]),_:1})])]),_:1})]))}};var wn=Da(un,[["__scopeId","data-v-b5b63cb6"]]);export{wn as default};
