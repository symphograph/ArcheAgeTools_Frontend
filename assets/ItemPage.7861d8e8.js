var xe=Object.defineProperty;var we=(p,i,l)=>i in p?xe(p,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[i]=l;var U=(p,i,l)=>(we(p,typeof i!="symbol"?i+"":i,l),l);import{Q as h,a as w,b as T}from"./position-engine.fab5a7b7.js";import{Q as De}from"./QLinearProgress.87b14ffb.js";import{Q as Me}from"./QScrollArea.34a033e9.js";import{api as ue}from"./axios.84dd43a9.js";import{P as ce}from"./LocalStorage.fb478afd.js";import{u as V}from"./use-quasar.bc7896a7.js";import{u as J,a3 as re,i as P,r as I,w as ae,o as te,J as d,n as o,t as b,K as Te,G as t,P as x,f as e,bk as Ue,N as Ee,H as $,I as E,l as B,L as Ne,R as Re,b as Fe,c as q,q as A,F as Q,O as K,af as H,d as be,a0 as ge,Q as he,_ as Ie,aB as ye,p as R,b9 as ke,ba as de,be as me,X as Qe}from"./index.85a18687.js";import{Q as Ve}from"./QSelect.8eed0032.js";import{I as F,Q as oe}from"./ItemIcon.23b1ef6d.js";import{n as le,c as $e,e as se,g as Oe}from"./myFuncts.325243df.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{a as ee}from"./QExpansionItem.a9b6fb0d.js";import{Q as fe}from"./QList.559d0f30.js";import{p as W,a as ne,b as pe}from"./price.2525409f.js";import{I as Ge,P as He}from"./PriceItemInput.99964733.js";import{P as qe}from"./prof.4bf0dcea.js";import{P as z,_ as Be}from"./price.82f4515d.js";import{m as Ce}from"./myAxios.910d7995.js";import{L as Ae}from"./LostList.d74c1e4e.js";import{P as ve}from"./PriceImagerComponent.79c11853.js";import{Q as je}from"./QImg.1e756b76.js";import{_ as ze}from"./ServerGroupSelect.5aff6b35.js";import{D as We}from"./DialogWindow.aef90c80.js";import"./selection.a1f2ef76.js";import"./QScrollObserver.75ce28c9.js";import"./TouchPan.a58a75fc.js";import"./format.959830d0.js";import"./QMenu.a0aa64e9.js";import"./myAuth.dbe1fc94.js";const Je={style:{width:"40px"}},Ke={__name:"SearchSelect",emits:["iAmSelected"],setup(p,{emit:i}){const l=J(),m=re(),n=V(),u=String("https://aa.dllib.ru/be/"),a=P("SearchList"),r=P("selectedItem"),v=I([...a.value]),g=P("Item"),c=P("selCategId");P("selCategNode",null);const s=I(null),f=i;function k(){return g.value&&c.value?g.value.Info.Category.name:"\u0412\u0441\u0435"}function y(){l.params.id=r.value.id,m.push({path:"/item/"+l.params.id}),c.value=r.value.categId,f("iAmSelected")}ae(c,()=>{c.value},{deep:!0}),ae(g,()=>{a.value.length&&l.params.id&&g.value&&(r.value=a.value.find(S=>S.id===g.value.id),c.value=r.value.categId)},{deep:!0});function L(S,D,M){if(S===""){D(()=>{v.value=[...a.value]});return}D(()=>{const Y=S.toLowerCase();let G=[...a.value];S&&(G=[...G].filter(j=>j.name.toLowerCase().indexOf(Y)>-1)),v.value=G})}function C(){ue.post(u+"api/options.php",{params:{method:"getSearchList"}}).then(S=>{var D,M,Y,G,j;if(!((D=S==null?void 0:S.data)!=null&&D.result))throw new Error;N((Y=(M=S==null?void 0:S.data)==null?void 0:M.data)!=null?Y:[]),a.value=(j=(G=S==null?void 0:S.data)==null?void 0:G.data)!=null?j:[]}).catch(S=>{n.notify(le(S))})}function _(){let S=indexedDB.open("prepData",1);S.onupgradeneeded=function(){let D=S.result;D.objectStoreNames.contains("cachedData")||D.createObjectStore("cachedData",{keyPath:"id"})},S.onerror=function(){console.error("Error",S.error)},S.onsuccess=function(){let G=S.result.transaction("cachedData","readonly").objectStore("cachedData").get("searchList");G.onsuccess=j=>{let X=j.target.result;X?a.value=X.content:C()},G.onerror=j=>{console.log("SearchList \u043D\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D")}}}function N(S){let D=indexedDB.open("prepData",1);D.onupgradeneeded=function(){console.log("\u0438\u043D\u0438\u0446\u0438\u043B\u0438\u0430\u0437\u0438\u044F \u0431\u0434");let M=D.result;M.objectStoreNames.contains("cachedData")||M.createObjectStore("cachedData",{keyPath:"id"})},D.onerror=function(){console.error("Error",D.error)},D.onsuccess=function(){let M=D.result;console.log("\u0432\u0438\u0436\u0443 \u0431\u0434");let G=M.transaction("cachedData","readwrite").objectStore("cachedData"),j={id:"searchList",content:S},X=G.add(j);X.onsuccess=function(){console.log("\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435",X.result)},X.onerror=function(){console.log("\u041E\u0448\u0438\u0431\u043A\u0430",X.error)}}}function ie(){r.value=null,c.value=0}return te(()=>{_()}),(S,D)=>d(a).length?(o(),b(Ve,{key:0,options:v.value,modelValue:d(r),"onUpdate:modelValue":[D[0]||(D[0]=M=>Fe(r)?r.value=M:null),y],"option-label":"name","option-value":"id","map-options":"",filled:"","use-input":"",autocomplete:"off","fill-input":"","hide-selected":"",label:k(),"input-debounce":"0",ref_key:"searchInput",ref:s,onFilter:L,"popup-content-style":{backgroundColor:"rgb(181 238 8 / 97%)"}},Te({option:t(M=>[e(T,Ne(Re(M.itemProps)),{default:t(()=>[e(h,{avatar:""},{default:t(()=>[e(F,{icon:M.opt.icon,grade:M.opt.grade},null,8,["icon","grade"])]),_:2},1024),e(h,null,{default:t(()=>[e(w,null,{default:t(()=>[$(E(M.opt.name),1)]),_:2},1024),M.opt.craftable?(o(),b(w,{key:0,caption:""},{default:t(()=>D[1]||(D[1]=[$("\u041A\u0440\u0430\u0444\u0442\u0430\u0431\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})):B("",!0),M.opt.personal?(o(),b(w,{key:1,caption:""},{default:t(()=>D[2]||(D[2]=[$("\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439")])),_:1})):B("",!0)]),_:2},1024)]),_:2},1040)]),_:2},[d(r)?{name:"prepend",fn:t(()=>[x("div",Je,[e(F,{icon:d(r).icon,grade:d(r).grade},null,8,["icon","grade"])])]),key:"0"}:void 0,d(r)?{name:"append",fn:t(()=>[e(Ee,{name:"cancel",onClick:Ue(ie,["stop","prevent"]),class:"cursor-pointer"})]),key:"1"}:void 0]),1032,["options","modelValue","label"])):B("",!0)}};const Xe={class:"upCraftArea"},Ye={__name:"CraftResults",props:{CraftResults:I(null)},setup(p){J(),re(),P("itemId");const i=p,l=(a,r)=>a.id>r.id?1:-1,m=I(0);function n(a,r){return r?a+'<br><span style="color: gray">\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439</span>':a}const u=q(()=>{if(!i.CraftResults.length)return[];switch(m.value){case 0:return[...i.CraftResults].sort(l);default:return l}});return(a,r)=>(o(),A(Q,null,[r[0]||(r[0]=x("div",{class:"MainName"},"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0432 \u0440\u0435\u0446\u0435\u043F\u0442\u0430\u0445:",-1)),x("div",Xe,[(o(!0),A(Q,null,K(u.value,v=>(o(),b(H,{key:v.id,class:"no-padding",dense:"",flat:"",to:"/item/"+v.id},{default:t(()=>[e(F,{toolText:n(v.name,v.personal),icon:v.icon,grade:v.grade},null,8,["toolText","icon","grade"])]),_:2},1032,["to"]))),128))])],64))}};var Ze=O(Ye,[["__scopeId","data-v-fe286c14"]]);class Le{constructor({mainCraft:i,otherCrafts:l=[]}={}){U(this,"mainCraft");U(this,"otherCrafts");this.mainCraft=i,this.otherCrafts=l}}const _e=class{constructor({id:i=-1,craftName:l="\u041D\u043E\u0432\u044B\u0439 \u0438\u0442\u0435\u043C",resultItemId:m=-1,resultAmount:n=0,countData:u,Prof:a,profNeed:r=0,doodName:v="",Mats:g=[],craftTime:c=0}={}){U(this,"id");U(this,"craftName");U(this,"resultItemId");U(this,"resultAmount");U(this,"countData");U(this,"Prof");U(this,"profNeed");U(this,"doodName");U(this,"Mats");U(this,"craftTime");this.id=i,this.craftName=l,this.resultItemId=m,this.resultAmount=n,this.countData=u,this.Mats=g,this.craftTime=c,this.Prof=a||new qe,this.profNeed=r,this.doodName=v}static async getList(i,l){var u,a,r,v,g,c,s;const m=String("https://aa.dllib.ru/be/")+"api/craft.php",n={method:"getList",itemId:l};try{const f=await ue.post(m,{params:n});if(!((u=f==null?void 0:f.data)!=null&&u.result))throw new Error;if((v=(r=(a=f==null?void 0:f.data)==null?void 0:a.data)==null?void 0:r.Lost)!=null&&v.length)return f.data.data.Lost.map(L=>new z(L));const k=(s=(c=(g=f==null?void 0:f.data)==null?void 0:g.data)==null?void 0:c.otherCrafts)!=null?s:[],y=new _e(f.data.data.mainCraft);return new Le({mainCraft:y,otherCrafts:k})}catch(f){return i.notify(le(f)),[]}}static async setAsUBest(i,l){const m={method:"setAsUBest",craftId:l};return Ce.set(i,this.path,m)}static async resetUBest(i,l){const m={method:"resetUBest",craftId:l};return Ce.set(i,this.path,m)}};let Z=_e;U(Z,"path","api/craft.php");const et={key:0,class:"CraftInfo"},tt={class:"InfoCol"},at=["innerHTML"],ut=["innerHTML"],rt={class:"InfoCol"},lt={class:"InfoCol"},nt=be({__name:"CraftInfo",props:{craft:{}},emits:["onSetUBest"],setup(p,{emit:i}){const l=V(),m=p,n=I(!1),u=I(m.craft.countData.isUBest),a=I(m.craft.countData.isBest),r=i,v=P("Item"),g=q(()=>{if(!v.value.Pricing.isGoldable)return 0;if(!v.value.Pricing.Price.price)return!1;let C=v.value.Pricing.Price.price;return C=String(C),C=C.replace(/[^0-9]/g,"")*.9,C=Math.round(C),C-m.craft.countData.craftCost});function c(C){return C?C<1e3?C:Math.round(C/1e3)+"k":""}function s(C){return Math.round(C*100)/100}function f(){Ge.setBuyOnly(l,v.value.id,v.value.isBuyOnly)}function k(){u.value?y():L()}async function y(){n.value=!0,await Z.setAsUBest(l,m.craft.id)&&r("onSetUBest"),n.value=!1}async function L(){n.value=!0,await Z.resetUBest(l,m.craft.id)&&r("onSetUBest"),n.value=!1}return(C,_)=>C.craft?(o(),A("div",et,[x("div",tt,[a.value?(o(),b(T,{key:0,dense:""},{default:t(()=>[e(h,null,{default:t(()=>[$(E(u.value?"\u0412\u044B\u0431\u0440\u0430\u043D \u0432\u0430\u043C\u0438":"\u0412\u044B\u0431\u0440\u0430\u043D \u043A\u0430\u043B\u044C\u043A\u0443\u043B\u044F\u0442\u043E\u0440\u043E\u043C"),1)]),_:1})]),_:1})):B("",!0),e(T,{dense:""},{default:t(()=>[e(h,null,{default:t(()=>_[5]||(_[5]=[$(" Craft Id: ")])),_:1}),e(h,{side:""},{default:t(()=>[e(H,{label:C.craft.id,"icon-right":"content_copy",class:"no-padding",dense:"",flat:"",onClick:_[0]||(_[0]=N=>d($e)(C.craft.id,d(l)))},null,8,["label"])]),_:1})]),_:1}),e(T,{dense:"",class:"listItem"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[6]||(_[6]=[$(" \u041A\u043E\u044D\u0444 SPM: ")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(w,null,{default:t(()=>[$(E(s(C.craft.countData.spmu)),1)]),_:1})]),_:1})]),_:1}),e(T,{dense:"",class:"listItem"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[7]||(_[7]=[$(" \u0421\u0435\u0431\u0435\u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C: ")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(w,null,{default:t(()=>[x("span",{innerHTML:d(W)(C.craft.countData.craftCost)},null,8,at)]),_:1})]),_:1})]),_:1}),g.value!==!1?(o(),b(T,{key:1,dense:"",class:"listItem"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[8]||(_[8]=[$(" \u041F\u0440\u0438\u0431\u044B\u043B\u044C: ")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(w,null,{default:t(()=>[x("span",{innerHTML:d(W)(g.value)},null,8,ut)]),_:1})]),_:1})]),_:1})):B("",!0)]),x("div",rt,[e(fe,{dense:""},{default:t(()=>[e(T,{dense:""},{default:t(()=>[e(h,{avatar:""},{default:t(()=>{var N;return[e(F,{grade:((N=C.craft.Prof)==null?void 0:N.lvl)||0,locIcon:"/img/profs/"+C.craft.Prof.id+".png","tool-text":"\u041F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u044F",size:"30px"},null,8,["grade","locIcon"])]}),_:1}),e(h,null,{default:t(()=>[$(E(C.craft.Prof.name),1)]),_:1}),e(h,{side:""},{default:t(()=>[$(E(c(C.craft.profNeed)),1)]),_:1})]),_:1}),e(T,{dense:""},{default:t(()=>[e(h,{avatar:""},{default:t(()=>[e(F,{grade:1,locIcon:"/img/interface/doodad.png","tool-text":"\u041F\u0440\u0438\u0441\u043F\u043E\u0441\u043E\u0431\u043B\u0435\u043D\u0438\u0435",size:"30px"})]),_:1}),e(h,null,{default:t(()=>[$(E(C.craft.doodName),1)]),_:1}),e(h,{side:""})]),_:1}),a.value&&d(v).isMat&&!d(v).personal?ge((o(),b(T,{key:0,tag:"label",dense:""},{default:t(()=>[e(oe,{class:"bg-tooltip"},{default:t(()=>_[9]||(_[9]=[$(" \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 \u0446\u0435\u043D\u0443 \u043F\u043E\u043A\u0443\u043F\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u043E \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u0438 \u043A\u0440\u0430\u0444\u0442\u0430 ")])),_:1}),e(h,{avatar:""},{default:t(()=>[e(he,{size:"2.5em"},{default:t(()=>_[10]||(_[10]=[x("img",{src:"/img/interface/perdaru.png",alt:""},null,-1)])),_:1})]),_:1}),e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[11]||(_[11]=[$("\u041F\u043E\u043A\u0443\u043F\u0430\u0435\u043C\u044B\u0439")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(Ie,{modelValue:d(v).isBuyOnly,"onUpdate:modelValue":[_[1]||(_[1]=N=>d(v).isBuyOnly=N),_[2]||(_[2]=N=>f())],disable:n.value},null,8,["modelValue","disable"])]),_:1})]),_:1})),[[ye]]):B("",!0),d(v).personal?B("",!0):ge((o(),b(T,{key:1,tag:"label",dense:""},{default:t(()=>[e(oe,{class:"bg-tooltip"},{default:t(()=>_[12]||(_[12]=[$(" \u0412\u044B\u0431\u0438\u0440\u0430\u0442\u044C \u044D\u0442\u043E\u0442 \u0440\u0435\u0446\u0435\u043F\u0442 \u043F\u0440\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 ")])),_:1}),e(h,{avatar:""},{default:t(()=>[e(F,{grade:12,locIcon:"/img/interface/perdaru.png","tool-text":"\u041F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u043C\u044B\u0439",size:"30px"})]),_:1}),e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[13]||(_[13]=[$("\u041F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u043C\u044B\u0439")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(Ie,{modelValue:u.value,"onUpdate:modelValue":[_[3]||(_[3]=N=>u.value=N),_[4]||(_[4]=N=>k())]},null,8,["modelValue"])]),_:1})]),_:1})),[[ye]])]),_:1})]),x("div",lt,[e(fe,{dense:""},{default:t(()=>[e(T,{dense:"",class:"listItem"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[14]||(_[14]=[$(" \u041E\u0420 \u043D\u0430 \u0440\u0435\u0446\u0435\u043F\u0442: ")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(w,null,{default:t(()=>[$(E(s(C.craft.countData.LaborData.forThisCraftBonused))+" ",1),_[15]||(_[15]=x("img",{class:"smallIcon",src:"/img/valuta/2.png",alt:""},null,-1))]),_:1})]),_:1})]),_:1}),e(T,{dense:"",class:"listItem"},{default:t(()=>[e(h,{class:"no-padding"},{default:t(()=>[e(w,null,{default:t(()=>_[16]||(_[16]=[$(" \u041E\u0420 \u043D\u0430 1\u0448\u0442: ")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(w,null,{default:t(()=>[$(E(s(C.craft.countData.LaborData.forOneUnitOfThisCraft))+" ",1),_[17]||(_[17]=x("img",{class:"smallIcon",src:"/img/valuta/2.png",alt:""},null,-1))]),_:1})]),_:1})]),_:1}),e(T,{dense:"",class:"listItem"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,null,{default:t(()=>_[18]||(_[18]=[$(" \u041E\u0420 \u043D\u0430 \u0446\u0435\u043F\u043E\u0447\u043A\u0443: ")])),_:1})]),_:1}),e(h,{side:""},{default:t(()=>[e(w,null,{default:t(()=>[$(E(s(C.craft.countData.laborTotal))+" ",1),_[19]||(_[19]=x("img",{class:"smallIcon",src:"/img/valuta/2.png",alt:""},null,-1))]),_:1})]),_:1})]),_:1})]),_:1})])])):B("",!0)}});var ot=O(nt,[["__scopeId","data-v-3732aa72"]]);const st={class:"MatRow"},it={__name:"MatRow",props:{Craft:I(null)},setup(p){const i=P("itemId"),l=P("Item");function m(u){var a,r;return(a=u==null?void 0:u.Price)!=null&&a.method?u.Item.name+'<br><span style="color: '+ne(((r=u==null?void 0:u.Price)==null?void 0:r.method)||"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")+'">'+pe((u==null?void 0:u.Price)||{})+":</span><br>"+W(u.Price.price,500):"\u041A\u0430\u043A\u0430\u044F-\u0442\u043E \u0444\u0438\u0433\u043D\u044F..."}function n(u){i.value=u}return(u,a)=>(o(),A("div",st,[e(T,{dense:"",class:"matArea"},{default:t(()=>[e(h,{avatar:"",style:{width:"max-content"},class:"no-padding"},{default:t(()=>[e(F,{grade:d(l).grade,icon:d(l).icon,amount:p.Craft.resultAmount,"tool-text":d(l).name,size:"70px",onClick:a[0]||(a[0]=r=>n(d(l).id))},null,8,["grade","icon","amount","tool-text"])]),_:1}),e(h,{class:"no-padding",top:"",thumbnail:""},{default:t(()=>[e(w,null,{default:t(()=>[(o(!0),A(Q,null,K(p.Craft.Mats,r=>(o(),b(H,{key:r.id,class:"no-padding",dense:"",flat:"",to:"/item/"+r.id},{default:t(()=>[e(F,{grade:r.grade?r.grade:r.Item.grade,icon:r.Item.icon,amount:r.need,"tool-text":m(r)},null,8,["grade","icon","amount","tool-text"])]),_:2},1032,["to"]))),128))]),_:1})]),_:1})]),_:1})]))}};var dt=O(it,[["__scopeId","data-v-a7cee79a"]]);const ct={class:"MatPool"},ft={__name:"MatPool",props:{matPool:I(null)},setup(p){const i=P("resultAmount");function l(n){return n.Item.name+"<br>"+m(n.need*i)+'\u0448\u0442<br><span style="color: '+ne(n.Price.method)+'">'+pe(n.Price)+":</span><br>"+W(n.Price.price)+"<br>"}function m(n){return Math.round(n*10)/10}return(n,u)=>(o(),b(ee,{label:"\u0412\u0441\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",popup:""},{default:t(()=>[x("div",ct,[(o(!0),A(Q,null,K(p.matPool,a=>(o(),b(H,{key:a.id,class:"no-padding",dense:"",flat:"",to:"/item/"+a.id},{default:t(()=>[e(F,{grade:a.grade?a.grade:a.Item.grade,icon:a.Item.icon,amount:m(a.need*d(i)),"tool-text":l(a)},null,8,["grade","icon","amount","tool-text"])]),_:2},1032,["to"]))),128))])]),_:1}))}};var mt=O(ft,[["__scopeId","data-v-1e82fef1"]]);const pt={class:"MatPool"},vt={__name:"TrashPool",props:{trashPool:I(null)},setup(p){const i=P("resultAmount");function l(n){return n.Item.name+"<br>"+m(n.need*i)+'\u0448\u0442<br><span style="color: '+ne(n.Price.method)+'">'+pe(n.Price)+":</span><br>"+W(n.Price.price)+"<br>"}function m(n){return Math.round(n*10)/10}return(n,u)=>(o(),b(ee,{label:"\u0412\u0441\u0435 \u043E\u0442\u0445\u043E\u0434\u044B",popup:""},{default:t(()=>[x("div",pt,[(o(!0),A(Q,null,K(p.trashPool,a=>(o(),b(H,{key:a.id,class:"no-padding",dense:"",flat:"",to:"/item/"+a.id},{default:t(()=>[e(F,{grade:a.grade?a.grade:a.Item.grade,icon:a.Item.icon,amount:m(a.need*d(i)),"tool-text":l(a)},null,8,["grade","icon","amount","tool-text"])]),_:2},1032,["to"]))),128))])]),_:1}))}};var _t=O(vt,[["__scopeId","data-v-ba009fcc"]]);const gt={class:"wrapContainer"},It={class:"wrapElement"},yt={__name:"CraftCard",props:{Craft:I(null)},emits:["onSetUBest","delUBest"],setup(p,{emit:i}){V(),P("itemId");const l=P("Item"),m=p,n=P("progress");P("isSingleCraft"),R("resultAmount",m.Craft.resultAmount);const u=i;return(a,r)=>d(l)&&!d(n)?(o(),b(ke,{key:0,class:"CraftCard","transition-show":"jump-down","transition-hide":"jump-up"},{default:t(()=>[e(de,null,{default:t(()=>[e(ot,{craft:p.Craft,onOnSetUBest:r[0]||(r[0]=v=>u("onSetUBest"))},null,8,["craft"])]),_:1}),e(de,null,{default:t(()=>[x("div",gt,[x("div",It,[e(dt,{Craft:p.Craft},null,8,["Craft"])])])]),_:1}),p.Craft.matPool?(o(),b(de,{key:0},{default:t(()=>[e(mt,{matPool:p.Craft.matPool},null,8,["matPool"]),e(_t,{trashPool:p.Craft.trashPool},null,8,["trashPool"])]),_:1})):B("",!0)]),_:1})):B("",!0)}};var Pe=O(yt,[["__scopeId","data-v-394cf200"]]);const Ct={key:1},Pt={__name:"CraftList",setup(p,{expose:i}){const l=V(),m=J();P("Item"),P("itemId");const n=I(null),u=I([]),a=I([]),r=P("CraftProgress"),v=q(()=>!(u.value&&u.value.length));R("isSingleCraft",v),i({loadCrafts:g}),te(()=>{console.log("craftList mounted")});async function g(){a.value=[],r.value=!0;const c=await Z.getList(l,Number(m.params.id));c instanceof Le?(u.value=c.otherCrafts,n.value=c.mainCraft):Array.isArray(c)&&c.length>0&&c[0]instanceof z?(a.value=c,u.value=[],n.value=null):(console.error("\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u0442\u0438\u043F \u0434\u0430\u043D\u043D\u044B\u0445"),u.value=[],n.value=null),r.value=!1}return(c,s)=>(o(),A(Q,null,[n.value?(o(),b(Pe,{Craft:n.value,key:n.value.id,onOnSetUBest:s[0]||(s[0]=f=>g())},null,8,["Craft"])):(o(),A("div",Ct,"\u0420\u0435\u0446\u0435\u043F\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B")),u.value.length?(o(),b(ee,{key:2,label:"\u0414\u0440\u0443\u0433\u0438\u0435 \u0440\u0435\u0446\u0435\u043F\u0442\u044B",popup:""},{default:t(()=>[(o(!0),A(Q,null,K(u.value,f=>(o(),b(Pe,{key:f.id,Craft:f,onOnSetUBest:s[1]||(s[1]=k=>g())},null,8,["Craft"]))),128))]),_:1})):B("",!0),a.value&&a.value.length?(o(),b(Ae,{key:3,Lost:a.value,msg:`<b>\u0420\u0430\u0441\u0447\u0435\u0442 \u043D\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u0441\u044F.</b><br>
    \u0412 \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u0445 \u0440\u0435\u0446\u0435\u043F\u0442\u0430\u0445 \u0435\u0441\u0442\u044C \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0435 \u0446\u0435\u043D\u044B.<br>
    \u0411\u0435\u0437 \u043D\u0438\u0445 \u044F \u043D\u0435 \u043C\u043E\u0433\u0443 \u043F\u043E\u0441\u0447\u0438\u0442\u0430\u0442\u044C \u0438 \u0441\u0440\u0430\u0432\u043D\u0438\u0442\u044C.`},null,8,["Lost"])):B("",!0)],64))}};var bt=O(Pt,[["__scopeId","data-v-31a42703"]]);const ht={class:"itemIconsArea"},kt={__name:"CurrencyTradable",setup(p){V(),J(),P("progress"),P("Item");const i=P("TradableItems"),l=(u,a)=>u.categId>a.categId?1:-1,m=I(0),n=q(()=>{if(!i.value)return[];switch(m.value){case 0:return[...i.value].sort(l);default:return l}});return(u,a)=>(o(),A("div",ht,[(o(!0),A(Q,null,K(n.value,r=>(o(),b(H,{key:r.id,class:"no-padding",dense:"",flat:"",to:"/item/"+r.id},{default:t(()=>[e(F,{icon:r.icon,grade:r.grade,"tool-text":r.name},null,8,["icon","grade","tool-text"])]),_:2},1032,["to"]))),128))]))}};const $t=["src"],Bt=["innerHTML"],At={__name:"PriceCurrencyItem",props:{CurItem:I(null),itemId:Number,authorNick:String,updatedAt:String,itemName:String},emits:["delPrice","updated"],setup(p,{emit:i}){const l=V(),m=re(),n=p,u=i,a=I(n.CurItem.Item.Price.price),r=I(null),v=I(!1),g=P("curAccount");function c(y){m.push({path:"/item/"+y})}async function s(){r.value.blur(),await z.del(l,n.CurItem.Item.id)&&u("updated")}async function f(){r.value.blur(),await z.set(l,n.CurItem.Item.id,a.value)&&u("updated")}function k(y){Oe(y).then(()=>{l.notify({color:"positive",position:"center",message:"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E",icon:"content_copy",timeout:1})}).catch(()=>{})}return(y,L)=>(o(),b(T,{dense:"",class:"PriceCell"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,{lines:1},{default:t(()=>[x("div",{class:"PriceLabel",onClick:L[0]||(L[0]=C=>k(p.CurItem.Item.name))},E(p.CurItem.Item.name),1)]),_:1}),e(me,{mask:"## ## ##",class:"PriceInput",label:d(se)(p.CurItem.Item.Price.updatedAt)+" - "+p.CurItem.Item.Price.author,"label-color":d(ne)(p.CurItem.Item.Price.method),dense:"",filled:"",borderless:"","reverse-fill-mask":"",ref_key:"priceRef",ref:r,modelValue:a.value,"onUpdate:modelValue":L[2]||(L[2]=C=>a.value=C),onFocus:L[3]||(L[3]=C=>v.value=!0),onBlur:L[4]||(L[4]=C=>v.value=!1)},{before:t(()=>[e(H,{class:"no-padding",dense:"",flat:"",to:"/item/"+p.CurItem.Item.Price.itemId,onClick:L[1]||(L[1]=C=>c(p.CurItem.Item.Price.itemId))},{default:t(()=>[e(F,{icon:p.CurItem.Item.icon,grade:p.CurItem.Item.grade,"tool-text":p.CurItem.Item.name},null,8,["icon","grade","tool-text"])]),_:1},8,["to"])]),append:t(()=>[v.value?(o(),b(H,{key:0,label:"Ok",class:"DefBtn",dense:"","no-caps":"",flat:"",onClick:f})):B("",!0)]),after:t(()=>[e(oe,null,{default:t(()=>L[5]||(L[5]=[$("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")])),_:1}),e(Be,{onOnOk:s,disable:p.CurItem.Item.Price.accountId!==d(g).id},null,8,["disable"])]),_:1},8,["label","label-color","modelValue"]),e(w,{style:{"font-size":"14px",padding:"3px 0"}},{default:t(()=>[L[6]||(L[6]=$(" 1")),x("img",{class:"imgValut",src:"/img/valuta/"+p.CurItem.Item.currencyId+".png",alt:""},null,8,$t),L[7]||(L[7]=$(" = ")),x("span",{innerHTML:d(W)(p.CurItem.currencyPrice)},null,8,Bt)]),_:1})]),_:1})]),_:1}))}};var Lt=O(At,[["__scopeId","data-v-e2d42824"]]);const St=["innerHTML"],xt=be({__name:"MainPriceItem",props:{itemName:{},itemId:{},icon:{},grade:{},val:{default:0},updatedAt:{},author:{},method:{}},setup(p){const i=V(),l=re(),m=I(),n=p,u=I(n.val),a=I(!1);function r(c){l.push({path:`/item/${c}`})}function v(){m.value.blur(),z.set(i,n.itemId,u.value)}function g(){m.value.blur(),z.del(i,n.itemId)}return(c,s)=>(o(),b(T,{dense:"",class:"PriceCell"},{default:t(()=>[e(h,null,{default:t(()=>[e(w,{lines:1},{default:t(()=>[a.value?(o(),A("div",{key:0,innerHTML:d(W)(u.value)},null,8,St)):(o(),A("div",{key:1,class:"PriceLabel",onClick:s[0]||(s[0]=f=>d($e)(c.itemName,d(i)))},E(c.itemName),1))]),_:1}),e(me,{mask:"## ## ##",class:"PriceInput",label:`${d(se)(c.updatedAt)} - ${c.author}`,"label-color":d(z).color(c.method),dense:"",filled:"",borderless:"","reverse-fill-mask":"",ref_key:"priceRef",ref:m,modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=f=>u.value=f),onFocus:s[3]||(s[3]=f=>a.value=!0),onBlur:s[4]||(s[4]=f=>a.value=!1)},{before:t(()=>[e(H,{class:"no-padding",dense:"",flat:"",to:`/item/${c.itemId}`,onClick:s[1]||(s[1]=f=>r(c.itemId))},{default:t(()=>[e(F,{icon:c.icon,grade:c.grade,"tool-text":c.itemName},null,8,["icon","grade","tool-text"])]),_:1},8,["to"])]),append:t(()=>[a.value?(o(),b(H,{key:0,label:"Ok",class:"DefBtn",dense:"","no-caps":"",flat:"",onClick:v})):B("",!0)]),after:t(()=>[e(oe,null,{default:t(()=>s[5]||(s[5]=[$("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")])),_:1}),e(Be,{onOnOk:g})]),_:1},8,["label","label-color","modelValue"])]),_:1})]),_:1}))}});var wt=O(xt,[["__scopeId","data-v-7ce29ccd"]]);const Dt={key:0},Mt={class:"MainName"},Tt=["src"],Ut={key:1},Et=["src"],Nt={key:2,class:"PricesArea"},Rt={key:0},Ft={key:1},Qt=["src"],Vt={__name:"CurrencyArea",setup(p){const i=V(),l=String("https://aa.dllib.ru/be/");J();const m=P("progress"),n=P("CurrencyProgress"),u=P("Item"),a=I(null),r=q(()=>a.value?a.value.TradableItems:[]),v=q(()=>u.value.categId===173?u.value.id:u.value.currencyId);R("TradableItems",r),ae(u,()=>{u.value&&g()},{deep:!0}),te(()=>{g()});function g(){n.value=!0,ue.post(l+"api/price.php",{params:{method:"getCurrency",id:v.value}}).then(c=>{var s,f,k;if(!((s=c==null?void 0:c.data)!=null&&s.result))throw new Error;a.value=(k=(f=c==null?void 0:c.data)==null?void 0:f.data)!=null?k:null}).catch(c=>{a.value=null,i.notify(le(c,"\u041E\u0439! Currency \u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 :("))}).finally(()=>{m.value=!1,n.value=!1})}return(c,s)=>a.value?(o(),A("div",Dt,[e(ee,{label:"\u041A\u043E\u043D\u0432\u0435\u0440\u0442\u043E\u0440 \u0432\u0430\u043B\u044E\u0442\u044B","default-opened":"",icon:"img:/img/valuta/"+a.value.id+".png"},{default:t(()=>[x("div",Mt,[s[0]||(s[0]=$("\u041F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u044B \u0437\u0430 ")),x("img",{class:"imgValut",src:"/img/valuta/"+a.value.id+".png",alt:""},null,8,Tt)]),r.value.length?(o(),b(kt,{key:0})):B("",!0),a.value.median?(o(),A("div",Ut,[s[1]||(s[1]=$(" \u0421\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430 ")),x("img",{class:"imgValut",src:"/img/valuta/"+a.value.id+".png",alt:""},null,8,Et),s[2]||(s[2]=$(": ")),e(ve,{price:a.value.median,"currency-id":500},null,8,["price"])])):B("",!0),e(He,{price:a.value.Price},null,8,["price"]),e(wt,{itemId:a.value.id,val:a.value.Price.price,itemName:a.value.name,icon:`${a.value.icon}`,updatedAt:a.value.Price.updatedAt,grade:a.value.Price.grade,author:a.value.Price.author,method:a.value.Price.method},null,8,["itemId","val","itemName","icon","updatedAt","grade","author","method"]),a.value.MonetisationItems.length?(o(),A("div",Nt,[(o(!0),A(Q,null,K(a.value.MonetisationItems,f=>(o(),b(Lt,{key:f.id,CurItem:f,onUpdated:g,onDelPrice:g},null,8,["CurItem"]))),128))])):B("",!0),a.value.lost.length?(o(),A(Q,{key:3},[a.value.MonetisationItems.length?(o(),A("div",Rt,s[3]||(s[3]=[$(" \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043C\u043E\u0436\u043D\u043E \u0443\u0442\u043E\u0447\u043D\u0438\u0442\u044C."),x("br",null,null,-1)]))):(o(),A("div",Ft,[s[4]||(s[4]=$(" \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0440\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044C \u0441\u0440\u0435\u0434\u043D\u044E\u044E \u0446\u0435\u043D\u0443 ")),x("img",{class:"imgValut",src:"/img/valuta/"+a.value.id+".png",alt:""},null,8,Qt),s[5]||(s[5]=x("br",null,null,-1))])),e(ee,{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u044B",icon:"add"},{default:t(()=>[e(Ae,{Lost:a.value.lost,msg:"\u0427\u0435\u043C \u0431\u043E\u043B\u044C\u0448\u0435 \u0446\u0435\u043D \u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E \u043A\u0430\u043B\u044C\u043A\u0443\u043B\u044F\u0442\u043E\u0440\u0443, \u0442\u0435\u043C \u0442\u043E\u0447\u043D\u0435\u0435 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"},null,8,["Lost"])]),_:1})],64)):B("",!0)]),_:1},8,["icon"])])):B("",!0)}},Ot={__name:"PriceInput",props:{Price:I(null)},emits:["delPrice","updated"],setup(p,{emit:i}){const l=V(),m=P("curAccount"),n=p,u=I({...n.Price}),a=P("Item"),r=I(null);ae(n,()=>{u.value={...n.Price}});const v=q(()=>{switch(!0){case!m.value.settings.serverGroupId:return!0;case!a.value.Pricing.isGoldable:return!0;default:return!1}}),g=q(()=>{if(!m.value.settings.serverGroupId)return"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";switch(!0){case u.value.price===0:return"";case u.value.price>0:return"";case u.value.price==="":return"\u041D\u0435 \u0432\u0438\u0436\u0443";case u.value.price===void 0:return"\u041D\u0435 \u0432\u0438\u0436\u0443";case u.value.price===null:return"\u041D\u0435 \u0432\u0438\u0436\u0443";default:return""}}),c=q(()=>{switch(!0){case!a.value.Pricing.isGoldable:return"\u041D\u0435\u043B\u044C\u0437\u044F \u043F\u0440\u043E\u0434\u0430\u0442\u044C";case u.value.method==="byToNPC":return"\u041D\u041F\u0421 \u043A\u0443\u043F\u0438\u0442 \u0437\u0430";case u.value.method==="empty":return"\u0426\u0435\u043D\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430";case!u.value.author:return"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439";case!m.value.settings.serverGroupId:return"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";case!v.value:return se(u.value.updatedAt)+" - "+u.value.author;default:return"\u0426\u0435\u043D\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"}});function s(){r.value.blur(),z.set(l,a.value.id,u.value.price)}return(f,k)=>(o(),b(me,{modelValue:u.value.price,"onUpdate:modelValue":k[1]||(k[1]=y=>u.value.price=y),filled:"",label:c.value,"label-color":d(ne)(u.value.method),mask:"## ## ##",ref_key:"priceRef",ref:r,disable:!d(a).Pricing.isGoldable||v.value,"reverse-fill-mask":"",rules:[y=>!g.value.length||g.value]},{append:t(()=>[g.value===""&&!v.value?(o(),b(H,{key:0,label:"Ok",class:"DefBtn",dense:"","no-caps":"",onClick:k[0]||(k[0]=y=>s())})):B("",!0)]),_:1},8,["modelValue","label","label-color","disable","rules"]))}};const Gt={style:{width:"100%"}},Ht={key:0},qt={key:1},jt=["innerHTML"],zt={__name:"PriceCard",emits:["updated"],setup(p,{emit:i}){const l=P("Item"),m=i;return(n,u)=>(o(),A("div",Gt,[d(l)?(o(),b(ke,{key:0,class:"PriceCard"},{default:t(()=>[e(Ot,{Price:d(l).Pricing.Price,onUpdated:u[0]||(u[0]=a=>m("updated"))},null,8,["Price"]),d(l).isTradeNPC?(o(),A("div",Ht,[u[1]||(u[1]=$("\u041F\u0440\u043E\u0434\u0430\u0435\u0442\u0441\u044F \u0443 NPC: ")),e(ve,{price:d(l).Pricing.priceFromNPC,currencyId:d(l).Pricing.currencyId},null,8,["price","currencyId"])])):d(l).Pricing.goldable?(o(),A("div",qt,[x("span",{innerHTML:d(W)(d(l).Pricing.Price.price)},null,8,jt)])):B("",!0)]),_:1})):B("",!0)]))}};var Se=O(zt,[["__scopeId","data-v-4b833810"]]);const Wt={__name:"PriceHistory",setup(p){const i=V(),l=String("https://aa.dllib.ru/be/"),m=String("https://auth.symphograph.ru/"),n=J(),u=P("curAccount"),a=P("PriceHistoryProgress");R("progress",a);const r=I([]),v=P("ServerGroupList"),g=I(u.value.settings.serverGroupId);q(()=>{var k;return(k=r.value)!=null&&k.length?g.value===100?r.value:r.value.filter(y=>y.serverGroupId===g.value):[]});function c(f){g.value=f,s()}function s(){a.value=!0,ue.post(l+"/api/price.php",{params:{method:"history",itemId:n.params.id,serverGroupId:g.value}}).then(f=>{var k,y;if(!((k=f==null?void 0:f.data)!=null&&k.result))throw new Error;r.value=((y=f==null?void 0:f.data)==null?void 0:y.data)||[]}).catch(f=>{i.notify(le(f))}).finally(()=>{a.value=!1})}return te(()=>{}),(f,k)=>(o(),b(ee,{label:"\u0422\u0435\u043A\u0443\u0449\u0438\u0435 \u0446\u0435\u043D\u044B",onBeforeShow:k[1]||(k[1]=y=>s()),popup:""},{default:t(()=>[e(fe,{dense:"",separator:""},{default:t(()=>[e(T,null,{default:t(()=>[e(h,null,{default:t(()=>[e(w,null,{default:t(()=>[e(ze,{groupId:g.value,onOnSelect:k[0]||(k[0]=y=>c(y)),ref:"refServerGroupSelect"},null,8,["groupId"])]),_:1})]),_:1})]),_:1}),(o(!0),A(Q,null,K(r.value,y=>(o(),b(T,{key:String(y.accountId)+String(y.serverGroupId)+y.updatedAt,style:{padding:"1em"}},{default:t(()=>[e(h,{avatar:""},{default:t(()=>[e(he,null,{default:t(()=>[e(je,{src:d(m)+"img/avatars/"+y.avaFileName},null,8,["src"])]),_:2},1024)]),_:2},1024),e(h,null,{default:t(()=>[e(w,{caption:""},{default:t(()=>[$(E(d(se)(y.updatedAt)+" - "+y.publicNick),1)]),_:2},1024),g.value===100?(o(),b(w,{key:0,caption:""},{default:t(()=>[$(E(d(v).find(L=>L.id===y.serverGroupId).label),1)]),_:2},1024)):B("",!0),e(w,null,{default:t(()=>[e(ve,{price:y.price},null,8,["price"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}};const Jt={key:0,class:"ItemArea"},Kt={key:4},Xt={key:5},Yt={__name:"ItemArea",setup(p,{expose:i}){const l=V(),m=String("https://aa.dllib.ru/be/"),n=J(),u=P("Item");P("itemId");const a=P("progress"),r=P("ItemProgress"),v=I(!1);R("PriceHistoryProgress",v);const g=I(null);i({loadItem:c}),te(()=>{n.params.id&&c()});function c(){r.value=!0,ue.post(m+"/api/item.php",{params:{method:"get",id:n.params.id}}).then(s=>{var f,k,y;if(!((f=s==null?void 0:s.data)!=null&&f.result))throw new Error;u.value=(y=(k=s==null?void 0:s.data)==null?void 0:k.data)!=null?y:null,r.value=!1,console.log("Item loaded"),Qe(()=>{u.value.craftable&&g.value.loadCrafts()}),ce.set("lastItem",u.value.id)}).catch(s=>{u.value=null,l.notify(le(s))}).finally(()=>{a.value=!1,r.value=!1})}return(s,f)=>{var k,y;return d(u)?(o(),A("div",Jt,[d(u)&&((k=d(u).Info)==null?void 0:k.CraftResults)?(o(),b(Ze,{key:0,CraftResults:d(u).Info.CraftResults},null,8,["CraftResults"])):B("",!0),d(l).platform.is.mobile?(o(),b(Se,{key:1,onUpdated:c})):B("",!0),d(r)?B("",!0):(o(),A(Q,{key:2},[d(u).currencyId&&d(u).currencyId!==500||d(u).categId===173?(o(),b(Vt,{key:0})):B("",!0)],64)),(y=d(u))!=null&&y.craftable?(o(),b(bt,{key:3,ref_key:"refCraftList",ref:g},null,512)):B("",!0),d(u).craftable?B("",!0):(o(),A("div",Kt,"\u041D\u0435\u043A\u0440\u0430\u0444\u0442\u0430\u0431\u0435\u043B\u044C\u043D\u043E")),!d(r)&&d(u).Pricing.isGoldable?(o(),A("div",Xt,[e(Wt)])):B("",!0)])):B("",!0)}}};var Zt=O(Yt,[["__scopeId","data-v-2bce3e0f"]]);const ea={class:"WindowArea column"},ta={style:{"min-width":"20em",width:"calc(100% - 20em)"}},aa={key:0,style:{width:"20em"}},ua={__name:"ItemPage",setup(p){const i=J(),l=re(),m=V(),n=P("curAccount");I(122345678);const u=P("categMode"),a=I(null),r=P("progress"),v=I(!1);R("ItemProgress",v);const g=I(!1);R("CraftProgress",g);const c=I(!1);R("CurrencyProgress",c);const s=I(0);R("itemId",s);const f=I(null);R("Item",f);const k=I(!1);R("needUpdate",k);const y=I(null);R("selectedItem",y);const L=I([]);R("SearchList",L);const C=I(null);function _(){return r.value||v.value||g.value||c.value}P("CategoriesList"),ae(i,()=>{i.params.id&&L.value.length&&C.value.loadItem()},{deep:!0}),te(()=>{(!n.value.settings.serverGroupId||n.value.settings.serverGroupId===100)&&ie(),i.params.id?s.value=i.params.id*1:ce.getItem("lastItem")&&(i.params.id=ce.getItem("lastItem"),l.push({path:"/item/"+i.params.id}))});function N(){u.value=!1}function ie(){m.dialog({component:We,componentProps:{text:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D.<br>\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438?",okBtnText:"\u0412 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",cancelBtnText:"\u041D\u0435 \u0441\u0435\u0439\u0447\u0430\u0441"},cancel:!0,persistent:!0}).onOk(()=>{}).onOk(()=>{l.push("/settings")}).onCancel(()=>{}).onDismiss(()=>{})}return(S,D)=>(o(),A("div",ea,[x("div",{class:"navigator",ref_key:"navigatorRef",ref:a},[x("div",ta,[e(Ke,{onIAmSelected:N}),e(w,{style:{padding:"0 1em"},caption:""},{default:t(()=>[$(E(f.value&&f.value.personal?"\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439":"\u041F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0439"),1)]),_:1})]),d(m).platform.is.desktop?(o(),A("div",aa,[e(Se)])):B("",!0)],512),e(De,{"animation-speed":200,color:"green",indeterminate:_()},null,8,["indeterminate"]),e(Me,{class:"col myScrollArea"},{default:t(()=>[L.value.length?(o(),b(Zt,{key:0,ref_key:"refItemArea",ref:C},null,512)):B("",!0)]),_:1})]))}};var Ta=O(ua,[["__scopeId","data-v-584e5b5c"]]);export{Ta as default};
