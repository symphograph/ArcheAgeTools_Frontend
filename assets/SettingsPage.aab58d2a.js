import{i as I,a8 as J,r as y,c as S,ab as Ae,o as H,b4 as we,a0 as Te,aB as $e,h as q,$ as O,ao as Be,Y as Ve,N as de,ak as Le,g as ne,aG as Qe,aW as Re,S as oe,b6 as Ne,A as D,x as Ee,b7 as Me,aq as G,b8 as Z,a_ as ve,ar as ee,a7 as De,w as Oe,aR as Ue,bh as Ke,a4 as re,bi as Ge,U as We,V as Fe,ac as je,n as C,t as $,G as g,f as m,L as ye,R as he,H as W,I as ie,P as le,J as k,bd as xe,q as E,F as se,O as ke,a3 as ze,l as U,be as Ye,af as pe,p as He}from"./index.cf591b40.js";import{Q as Xe}from"./QTabs.b92369b3.js";import{g as fe,s as me}from"./TouchPan.dc0265e9.js";import{c as Je}from"./selection.cc14137b.js";import{u as Ze}from"./use-render-cache.3aae9b27.js";import{Q as et}from"./QScrollArea.15a45ecc.js";import{api as F}from"./axios.c7c3d222.js";import{u as tt}from"./use-meta.79e5537f.js";import{u as M}from"./use-quasar.df17c2ed.js";import{N as at}from"./NickInput.c9f4691b.js";import{_ as nt}from"./ServerGroupSelect.0eebe946.js";import{b as ue,Q as j,a as z}from"./position-engine.fcb91d72.js";import{Q as Ce}from"./QSelect.85e4a152.js";import{a as te,n as Y}from"./myFuncts.7b3aa3f0.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import{I as ae,Q as be}from"./ItemIcon.ccf8782e.js";import{P as ot}from"./prof.0442639e.js";import{_ as rt}from"./DelBtn.a67cfcf4.js";import{a as it}from"./price.d927648c.js";import"./QScrollObserver.42abb11c.js";import"./format.959830d0.js";import"./myAuth.8a31f6b7.js";import"./QMenu.5a066f52.js";import"./DialogWindow.ce8755d6.js";let lt=0;const st=["click","keydown"],ut={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${lt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ct(e,r,s,i){const n=I(we,J);if(n===J)return console.error("QTab/QRouteTab component needs to be child of QTabs"),J;const{proxy:t}=ne(),o=y(null),a=y(null),c=y(null),_=S(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),u=S(()=>n.currentModel.value===e.name),v=S(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(u.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(i!==void 0?i.linkClass.value:"")),l=S(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),A=S(()=>e.disable===!0||n.hasFocus.value===!0||u.value===!1&&n.hasActiveTab.value===!0?-1:e.tabindex||0);function p(f,x){if(x!==!0&&o.value!==null&&o.value.focus(),e.disable===!0){i!==void 0&&i.hasRouterLink.value===!0&&O(f);return}if(i===void 0){n.updateModel({name:e.name}),s("click",f);return}if(i.hasRouterLink.value===!0){const T=(B={})=>{let R;const N=B.to===void 0||Qe(B.to,e.to)===!0?n.avoidRouteWatcher=Re():null;return i.navigateToRouterLink(f,{...B,returnRouterError:!0}).catch(V=>{R=V}).then(V=>{if(N===n.avoidRouteWatcher&&(n.avoidRouteWatcher=!1,R===void 0&&(V===void 0||V.message!==void 0&&V.message.startsWith("Avoided redundant navigation")===!0)&&n.updateModel({name:e.name})),B.returnRouterError===!0)return R!==void 0?Promise.reject(R):V})};s("click",f,T),f.defaultPrevented!==!0&&T();return}s("click",f)}function b(f){Be(f,[13,32])?p(f,!0):Ve(f)!==!0&&f.keyCode>=35&&f.keyCode<=40&&f.altKey!==!0&&f.metaKey!==!0&&n.onKbdNavigate(f.keyCode,t.$el)===!0&&O(f),s("keydown",f)}function h(){const f=n.tabProps.value.narrowIndicator,x=[],T=q("div",{ref:c,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});e.icon!==void 0&&x.push(q(de,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&x.push(q("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&x.push(e.alertIcon!==void 0?q(de,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):q("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),f===!0&&x.push(T);const B=[q("div",{class:"q-focus-helper",tabindex:-1,ref:o}),q("div",{class:l.value},Le(r.default,x))];return f===!1&&B.push(T),B}const w={name:S(()=>e.name),rootRef:a,tabIndicatorRef:c,routeData:i};Ae(()=>{n.unregisterTab(w)}),H(()=>{n.registerTab(w)});function Q(f,x){const T={ref:a,class:v.value,tabindex:A.value,role:"tab","aria-selected":u.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:b,...x};return Te(q(f,T,h()),[[$e,_.value]])}return{renderTab:Q,$tabs:n}}var ge=oe({name:"QTab",props:ut,emits:st,setup(e,{slots:r,emit:s}){const{renderTab:i}=ct(e,r,s);return()=>i("div")}});function dt(e){const r=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((s,i)=>{const n=parseFloat(s);n&&(r[i]=n)}),r}var vt=Ne({name:"touch-swipe",beforeMount(e,{value:r,arg:s,modifiers:i}){if(i.mouse!==!0&&D.has.touch!==!0)return;const n=i.mouseCapture===!0?"Capture":"",t={handler:r,sensitivity:dt(s),direction:fe(i),noop:Ee,mouseStart(o){me(o,t)&&Me(o)&&(G(t,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(o,!0))},touchStart(o){if(me(o,t)){const a=o.target;G(t,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","notPassiveCapture"],[a,"touchend","end","notPassiveCapture"]]),t.start(o)}},start(o,a){D.is.firefox===!0&&Z(e,!0);const c=ve(o);t.event={x:c.left,y:c.top,time:Date.now(),mouse:a===!0,dir:!1}},move(o){if(t.event===void 0)return;if(t.event.dir!==!1){O(o);return}const a=Date.now()-t.event.time;if(a===0)return;const c=ve(o),_=c.left-t.event.x,u=Math.abs(_),v=c.top-t.event.y,l=Math.abs(v);if(t.event.mouse!==!0){if(u<t.sensitivity[1]&&l<t.sensitivity[1]){t.end(o);return}}else if(window.getSelection().toString()!==""){t.end(o);return}else if(u<t.sensitivity[2]&&l<t.sensitivity[2])return;const A=u/a,p=l/a;t.direction.vertical===!0&&u<l&&u<100&&p>t.sensitivity[0]&&(t.event.dir=v<0?"up":"down"),t.direction.horizontal===!0&&u>l&&l<100&&A>t.sensitivity[0]&&(t.event.dir=_<0?"left":"right"),t.direction.up===!0&&u<l&&v<0&&u<100&&p>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&u<l&&v>0&&u<100&&p>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&u>l&&_<0&&l<100&&A>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&u>l&&_>0&&l<100&&A>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(O(o),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Je(),t.styleCleanup=b=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const h=()=>{document.body.classList.remove("no-pointer-events--children")};b===!0?setTimeout(h,50):h()}),t.handler({evt:o,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:a,distance:{x:u,y:l}})):t.end(o)},end(o){t.event!==void 0&&(ee(t,"temp"),D.is.firefox===!0&&Z(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),o!==void 0&&t.event.dir!==!1&&O(o),t.event=void 0)}};if(e.__qtouchswipe=t,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";G(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}D.has.touch===!0&&G(t,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,r){const s=e.__qtouchswipe;s!==void 0&&(r.oldValue!==r.value&&(typeof r.value!="function"&&s.end(),s.handler=r.value),s.direction=fe(r.modifiers))},beforeUnmount(e){const r=e.__qtouchswipe;r!==void 0&&(ee(r,"main"),ee(r,"temp"),D.is.firefox===!0&&Z(e,!1),r.styleCleanup!==void 0&&r.styleCleanup(),delete e.__qtouchswipe)}});const pt={name:{required:!0},disable:Boolean},_e={setup(e,{slots:r}){return()=>q("div",{class:"q-panel scroll",role:"tabpanel"},re(r.default))}},ft={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},mt=["update:modelValue","beforeTransition","transition"];function bt(){const{props:e,emit:r,proxy:s}=ne(),{getCache:i}=Ze(),{registerTimeout:n}=De();let t,o;const a=y(null),c=y(null);function _(d){const P=e.vertical===!0?"up":"left";N((s.$q.lang.rtl===!0?-1:1)*(d.direction===P?1:-1))}const u=S(()=>[[vt,_,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),v=S(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),l=S(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),A=S(()=>`--q-transition-duration: ${e.transitionDuration}ms`),p=S(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),b=S(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=S(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Oe(()=>e.modelValue,(d,P)=>{const L=x(d)===!0?T(d):-1;o!==!0&&R(L===-1?0:L<T(P)?-1:1),a.value!==L&&(a.value=L,r("beforeTransition",d,P),n(()=>{r("transition",d,P)},e.transitionDuration))});function w(){N(1)}function Q(){N(-1)}function f(d){r("update:modelValue",d)}function x(d){return d!=null&&d!==""}function T(d){return t.findIndex(P=>P.props.name===d&&P.props.disable!==""&&P.props.disable!==!0)}function B(){return t.filter(d=>d.props.disable!==""&&d.props.disable!==!0)}function R(d){const P=d!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(d===-1?v.value:l.value):null;c.value!==P&&(c.value=P)}function N(d,P=a.value){let L=P+d;for(;L!==-1&&L<t.length;){const K=t[L];if(K!==void 0&&K.props.disable!==""&&K.props.disable!==!0){R(d),o=!0,r("update:modelValue",K.props.name),setTimeout(()=>{o=!1});return}L+=d}e.infinite===!0&&t.length!==0&&P!==-1&&P!==t.length&&N(d,d===-1?t.length:-1)}function V(){const d=T(e.modelValue);return a.value!==d&&(a.value=d),!0}function ce(){const d=x(e.modelValue)===!0&&V()&&t[a.value];return e.keepAlive===!0?[q(Ge,b.value,[q(h.value===!0?i(p.value,()=>({..._e,name:p.value})):_e,{key:p.value,style:A.value},()=>d)])]:[q("div",{class:"q-panel scroll",style:A.value,key:p.value,role:"tabpanel"},[d])]}function Se(){if(t.length!==0)return e.animated===!0?[q(Ue,{name:c.value},ce)]:ce()}function Ie(d){return t=Ke(re(d.default,[])).filter(P=>P.props!==null&&P.props.slot===void 0&&x(P.props.name)===!0),t.length}function qe(){return t}return Object.assign(s,{next:w,previous:Q,goTo:f}),{panelIndex:a,panelDirectives:u,updatePanelsList:Ie,updatePanelIndex:V,getPanelContent:Se,getEnabledPanels:B,getPanels:qe,isValidPanelName:x,keepAliveProps:b,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:N,goToPanel:f,nextPanel:w,previousPanel:Q}}var Pe=oe({name:"QTabPanel",props:pt,setup(e,{slots:r}){return()=>q("div",{class:"q-tab-panel",role:"tabpanel"},re(r.default))}}),gt=oe({name:"QTabPanels",props:{...ft,...We},emits:mt,setup(e,{slots:r}){const s=ne(),i=Fe(e,s.proxy.$q),{updatePanelsList:n,getPanelContent:t,panelDirectives:o}=bt(),a=S(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(n(r),je("div",{class:a.value},t(),"pan",e.swipeable,()=>o.value))}});const _t=["innerHTML"],Pt={__name:"ModeSelect",emits:["saved"],setup(e,{emit:r}){const s=M(),i=String("https://api.aa.dllib.ru/"),n=I("curAccount"),t=y("Input"),o=r,a=I("progress"),c=y([{mode:1,name:"\u0421 \u043C\u0438\u0440\u0443 \u043F\u043E \u043D\u0438\u0442\u043A\u0435",description:"\u041F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u0442 \u0412\u0430\u0448\u0438 \u0446\u0435\u043D\u044B \u0438\u043B\u0438 \u0431\u043E\u043B\u0435\u0435 \u043D\u043E\u0432\u044B\u0435 \u0438\u0437 \u0434\u043E\u0432\u0435\u0440\u0435\u043D\u043D\u044B\u0445.<br>\u0415\u0441\u043B\u0438 \u0438\u0445 \u043D\u0435\u0442, \u0438\u0449\u0435\u0442 \u0443 \u0434\u0440\u0443\u0433\u0438\u0445.<br>\u0421\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0442\u043E\u043B\u044C\u043A\u043E, \u0435\u0441\u043B\u0438 \u043D\u0438\u043A\u0442\u043E \u0438 \u043D\u0438\u043A\u043E\u0433\u0434\u0430 \u043D\u0435 \u0443\u043A\u0430\u0437\u044B\u0432\u0430\u043B \u0446\u0435\u043D\u0443."},{mode:2,name:"\u0414\u043E\u0432\u0435\u0440\u0438\u0435",description:"\u041D\u0435 \u0432\u0438\u0434\u0438\u0442 \u043D\u0438\u0447\u044C\u0438\u0445 \u0446\u0435\u043D, \u043A\u0440\u043E\u043C\u0435 \u0412\u0430\u0448\u0438\u0445 \u0438 \u0442\u0435\u0445, \u043A\u043E\u043C\u0443 \u0412\u044B \u0434\u043E\u0432\u0435\u0440\u044F\u0435\u0442\u0435.<br>\u041F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u0442 \u0431\u043E\u043B\u0435\u0435 \u043D\u043E\u0432\u044B\u0435.<br>\u041E\u0420, \u0420\u0420, \u0427\u0435\u0441\u0442\u044C \u0438 \u043F\u0440\u043E\u0447\u0438\u0435 \u0441\u0443\u0431\u044A\u0435\u043A\u0442\u0438\u0432\u043D\u044B\u0435 \u043F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u0442 \u0412\u0430\u0448\u0438 \u043D\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E \u043E\u0442 \u0438\u0445 \u043D\u043E\u0432\u0438\u0437\u043D\u044B."},{mode:3,name:"\u0425\u0430\u0440\u0434\u043A\u043E\u0440",description:"\u0412\u0438\u0434\u0438\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0412\u0430\u0448\u0438 \u0446\u0435\u043D\u044B.<br>\u0412 \u043B\u044E\u0431\u043E\u0439 \u043D\u0435\u043F\u043E\u043D\u044F\u0442\u043D\u043E\u0439 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438 \u0431\u0443\u0434\u0435\u0442 \u0441\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044C."}]);function _(){a.value=!0,F.post(i+"api/settings.php",{params:{method:"setMode",mode:n.value.settings.mode}}).then(u=>{var v;if(!((v=u==null?void 0:u.data)!=null&&v.result))throw new Error;s.notify(te(u.data.result)),o("saved")}).catch(u=>{s.notify(Y(u))}).finally(()=>{a.value=!1})}return(u,v)=>(C(),$(Ce,{modelValue:k(n).settings.mode,"onUpdate:modelValue":[v[0]||(v[0]=l=>k(n).settings.mode=l),v[3]||(v[3]=l=>_())],options:c.value,borderless:"","option-value":"mode","option-label":"name","options-html":"",loading:k(a),"popup-content-style":{backgroundColor:"rgb(181 238 8 / 93%)",color:"#4B3A23"},onFocus:v[1]||(v[1]=l=>t.value="Input InputActive"),onBlur:v[2]||(v[2]=l=>t.value="Input"),class:xe(t.value),label:"\u0420\u0435\u0436\u0438\u043C \u0432\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u0438 \u0446\u0435\u043D","map-options":"","emit-value":""},{option:g(l=>[m(ue,ye(he(l.itemProps)),{default:g(()=>[m(j,null,{default:g(()=>[m(z,null,{default:g(()=>[W(ie(l.opt.name),1)]),_:2},1024),m(z,{caption:""},{default:g(()=>[le("div",{innerHTML:l.opt.description},null,8,_t)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading","class"]))}};const yt={__name:"AccountSets",emits:["saved"],setup(e,{emit:r}){M(),I("progress");const s=I("curAccount"),i=r,n=y();function t(){n.value.saveServerGroup()}return(o,a)=>(C(),E(se,null,[m(at),m(nt,{groupId:k(s).settings.serverGroupId,onOnSelect:a[0]||(a[0]=c=>t()),onOnSave:a[1]||(a[1]=c=>i("saved")),ref_key:"refServerGroupSelect",ref:n},null,8,["groupId"]),m(Pt,{onSaved:a[2]||(a[2]=c=>i("saved"))})],64))}};var ht=X(yt,[["__scopeId","data-v-61be8ddf"]]);const xt={__name:"ProfSelect",props:{prof:y(null)},setup(e){const r=M(),s=y(!1),i=e;y(1);const n=I("ProfLvls"),t=y(null),o=y("Input"),a=I("curAccount"),c=I("selectOptionsStyle");async function _(){t.value.blur(),s.value=!0;const u=a.value.settings.Profs.find(v=>v.id===i.prof.id).lvl;await ot.setLvl(r,i.prof.id,u),s.value=!1}return(u,v)=>(C(),$(Ce,{label:e.prof.name,class:xe(o.value),options:k(n),loading:s.value,"option-value":"lvl",modelValue:k(a).settings.Profs.find(l=>l.id===e.prof.id).lvl,"onUpdate:modelValue":[v[0]||(v[0]=l=>k(a).settings.Profs.find(A=>A.id===e.prof.id).lvl=l),_],"map-options":"","emit-value":"",borderless:"",ref_key:"profRef",ref:t,"popup-content-style":k(c)},{prepend:g(()=>[m(ae,{"loc-icon":"/img/profs/"+e.prof.id+".png",grade:k(a).settings.Profs.find(l=>l.id===e.prof.id).lvl},null,8,["loc-icon","grade"])]),option:g(l=>[m(ue,ye(he(l.itemProps)),{default:g(()=>[m(j,{avatar:""},{default:g(()=>[m(ae,{"loc-icon":"/img/profs/"+e.prof.id+".png",grade:l.opt.lvl},null,8,["loc-icon","grade"])]),_:2},1024),m(j,null,{default:g(()=>[m(z,null,{default:g(()=>[W(ie(l.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["label","class","options","loading","modelValue","popup-content-style"]))}};const kt={class:"ProfList"},Ct={__name:"ProfList",setup(e){const r=I("curAccount");return(s,i)=>(C(),E("div",kt,[(C(!0),E(se,null,ke(k(r).settings.Profs,n=>(C(),$(xt,{key:n.id,prof:n},null,8,["prof"]))),128))]))}};var St=X(Ct,[["__scopeId","data-v-7f713b21"]]);const It={class:"PriceLabel"},qt={__name:"BasedPriceItem",props:{price:y(null)},emits:["delPrice"],setup(e,{emit:r}){const s=M(),i=String("https://api.aa.dllib.ru/"),n=ze(),t=I("curAccount"),o=e,a=y(o.price),c=y(null),_=y(!1),u=I("disable");function v(p){n.push({path:"/item/"+p})}function l(){F.post(i+"api/price.php",{params:{method:"del",itemId:o.price.itemId}}).then(p=>{var b,h,w;if(!((b=p==null?void 0:p.data)!=null&&b.result))throw new Error;s.notify(te((w=(h=p==null?void 0:p.data)==null?void 0:h.result)!=null?w:"\u041E\u0439!"))}).catch(p=>{s.notify(Y(p))})}function A(){c.value.blur(),F.post(i+"api/price.php",{params:{method:"set",price:a.value.price,itemId:o.price.itemId}}).then(p=>{var b,h,w,Q,f,x;if(!((b=p==null?void 0:p.data)!=null&&b.result))throw new Error;s.notify(te()),a.value.accountId=(w=(h=t==null?void 0:t.value)==null?void 0:h.id)!=null?w:0,a.value.author=(x=(f=(Q=t.value)==null?void 0:Q.settings)==null?void 0:f.publicNick)!=null?x:"Error",a.value.method="bySolo"}).catch(p=>{s.notify(Y(p))})}return H(()=>{}),(p,b)=>(C(),$(ue,{dense:"",class:"PriceCell"},{default:g(()=>[m(j,null,{default:g(()=>[m(z,{lines:1},{default:g(()=>[le("div",It,ie(e.price.name),1)]),_:1}),k(u)?(C(),$(be,{key:0},{default:g(()=>b[4]||(b[4]=[W("\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D")])),_:1})):U("",!0),m(Ye,{mask:"## ## ##",class:"PriceInput",dense:"",filled:"",borderless:"",disable:!!k(u),"label-color":k(it)(e.price.method),"stack-label":"",label:e.price.accountId===1?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":e.price.author,"reverse-fill-mask":"",ref_key:"priceRef",ref:c,modelValue:a.value.price,"onUpdate:modelValue":b[1]||(b[1]=h=>a.value.price=h),onFocus:b[2]||(b[2]=h=>_.value=!0),onBlur:b[3]||(b[3]=h=>_.value=!1)},{before:g(()=>[m(pe,{class:"no-padding",dense:"",flat:"",to:"/item/"+e.price.itemId,onClick:b[0]||(b[0]=h=>v(e.price.itemId))},{default:g(()=>[m(ae,{icon:e.price.icon,grade:e.price.grade,"tool-text":e.price.name},null,8,["icon","grade","tool-text"])]),_:1},8,["to"])]),append:g(()=>[_.value?(C(),$(pe,{key:0,label:"Ok",class:"DefBtn",dense:"","no-caps":"",flat:"",onClick:A})):U("",!0)]),after:g(()=>[m(be,null,{default:g(()=>b[5]||(b[5]=[W("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")])),_:1}),m(rt,{onOnOk:l,disable:e.price.accountId!==k(t).id},null,8,["disable"])]),_:1},8,["disable","label-color","label","modelValue"])]),_:1})]),_:1}))}};var At=X(qt,[["__scopeId","data-v-7645e5a3"]]);const wt={class:"PricesArea"},Tt={__name:"BasedPrices",setup(e,{expose:r}){const s=M(),i=String("https://api.aa.dllib.ru/"),n=I("curAccount");I("progress");const t=S(()=>n.value.settings.serverGroupId===100);He("disable",t);const o=y(null);H(()=>{a()}),r({loadPrices:a});function a(){F.post(i+"/api/price.php",{params:{method:"getBasedList"}}).then(c=>{var _,u,v,l;if(!((_=c==null?void 0:c.data)!=null&&_.result))throw new Error;o.value=(l=(v=(u=c==null?void 0:c.data)==null?void 0:u.data)==null?void 0:v.Prices)!=null?l:[]}).catch(c=>{o.value=[],s.notify(Y(c))})}return(c,_)=>(C(),E("div",wt,[(C(!0),E(se,null,ke(o.value,u=>(C(),$(At,{key:u.itemId,price:u},null,8,["price"]))),128))]))}};const $t={class:"WindowArea column"},Bt={class:"navigator"},Vt={__name:"SettingsPage",setup(e){M();const r=y(null),s=I("curAccount"),i=y("basedPrices"),n=I("progress");return H(()=>{console.log("AccountPage mounted")}),tt({title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(o,a)=>{var c;return C(),E("div",$t,[le("div",Bt,[(c=k(s).settings)!=null&&c.serverGroupId?(C(),$(ht,{key:0})):U("",!0)]),k(s)?(C(),$(et,{key:0,class:"col"},{default:g(()=>[m(Xe,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=_=>i.value=_)},{default:g(()=>[m(ge,{name:"basedPrices",label:"\u0411\u0430\u0437\u043E\u0432\u044B\u0435 \u0446\u0435\u043D\u044B"}),m(ge,{name:"profs",label:"\u041F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u0438"})]),_:1},8,["modelValue"]),m(gt,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=_=>i.value=_),animated:"",class:"TabPanels"},{default:g(()=>[m(Pe,{name:"basedPrices"},{default:g(()=>[k(n)?U("",!0):(C(),$(Tt,{key:0,ref_key:"refBasedPrices",ref:r},null,512))]),_:1}),m(Pe,{name:"profs"},{default:g(()=>[m(St)]),_:1})]),_:1},8,["modelValue"])]),_:1})):U("",!0)])}}};var oa=X(Vt,[["__scopeId","data-v-63eeeb06"]]);export{oa as default};
