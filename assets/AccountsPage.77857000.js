import{Q as r,a as i,b as d}from"./position-engine.7a2cb73f.js";import{ax as E,i as Q,r as M,o as V,t as s,v as f,a6 as $,f as a,Y as t,a0 as u,a4 as y,_ as o,$ as c,ba as b,bb as v,F as _,a5 as I,x as L,af as w,l as F,b2 as A}from"./index.312bfc2c.js";import{Q as x}from"./QList.2806152c.js";import{Q as U}from"./QImg.0a6cd497.js";import{Q as j}from"./QScrollArea.e39746d1.js";import{f as q,c as P,n as B}from"./myFuncts.f85c9e09.js";import{I as C}from"./ItemIcon.a357d1dd.js";import{u as Y}from"./use-quasar.d7abd3d3.js";import{_ as G}from"./NickInput.d02de2ef.js";import{api as D}from"./axios.8ef9e684.js";import{u as H}from"./use-meta.a02570f3.js";import"./selection.bedc1144.js";import"./QScrollObserver.a8aa26f4.js";import"./TouchPan.415f66fa.js";import"./format.959830d0.js";const J={class:"navigator"},K={__name:"AccountArea",emits:["onUnlinkAccount"],setup(N,{emit:S}){const h=Y(),m=String("https://auth.symphograph.ru/"),p=Q("curAccount"),T=Q("AccountList"),g=M([]);function z(n){D.post(m+"api/device.php",{params:{method:"unlinkByAccount",accountId:n}}).then(l=>{var e;if(!((e=l==null?void 0:l.data)!=null&&e.result))throw new Error;k()}).catch(l=>{h.notify(B(l))})}function k(){D.post(m+"api/device.php",{params:{method:"otherList"}}).then(n=>{var l,e;if(!((l=n==null?void 0:n.data)!=null&&l.result))throw new Error;g.value=(e=n.data.data)!=null?e:[]}).catch(n=>{g.value=[],h.notify(B(n))})}return V(()=>{k()}),(n,l)=>(s(),f(_,null,[$("div",J,[a(d,null,{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(C,{locIcon:u(m)+u(p).Avatar.src,grade:1,size:"70px"},null,8,["locIcon"])]),_:1}),a(r,null,{default:t(()=>[a(i,null,{default:t(()=>[a(y,{name:"img:/img/auth/"+u(p).authType+".svg"},null,8,["name"]),o(" "+c(u(p).nickName),1)]),_:1}),a(G)]),_:1})]),_:1})]),a(j,{class:"col myScrollArea"},{default:t(()=>[a(b,{class:"MyCard"},{default:t(()=>[a(v,null,{default:t(()=>[a(d,null,{default:t(()=>[a(r,null,{default:t(()=>l[0]||(l[0]=[o(" \u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B, \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u044D\u0442\u0438\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C \u043D\u0430 \u044D\u0442\u043E\u043C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435. ")])),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(x,null,{default:t(()=>[(s(!0),f(_,null,I(u(T),e=>(s(),f(_,{key:e},[e.id!==u(p).id&&e.authType!=="default"?(s(),L(d,{key:0,clickable:""},{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(C,{locIcon:u(m)+e.Avatar.src,grade:1,size:"70px"},null,8,["locIcon"])]),_:2},1024),a(r,null,{default:t(()=>[a(i,{caption:""},{default:t(()=>[a(y,{size:"1.5em",name:"img:/img/auth/"+e.authType+".svg"},null,8,["name"]),o(" "+c(u(q)(e.visitedAt)),1)]),_:2},1024),a(i,null,{default:t(()=>[o(c(e.nickName),1)]),_:2},1024),a(i,null,{default:t(()=>[o(c(e.settings.publicNick),1)]),_:2},1024)]),_:2},1024),a(r,{side:""},{default:t(()=>[a(w,{label:"\u041E\u0442\u0432\u044F\u0437\u0430\u0442\u044C",class:"DefBtn",onClick:R=>z(e.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)):F("",!0)],64))),128)),a(A)]),_:1})]),_:1})]),_:1}),a(b,{class:"MyCard"},{default:t(()=>[a(v,null,{default:t(()=>[a(d,null,{default:t(()=>[a(r,null,{default:t(()=>l[1]||(l[1]=[o(" \u0421\u0435\u0441\u0441\u0438\u0438 \u043D\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\u0445. ")])),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(x,null,{default:t(()=>[(s(!0),f(_,null,I(g.value,e=>(s(),f(_,{key:e.marker},[a(d,{style:{padding:"2em 0"}},{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(y,{size:"2em",name:e.ismobiledevice?"smartphone":"ion-desktop"},null,8,["name"])]),_:2},1024),a(r,{avatar:""},{default:t(()=>[a(U,{src:"/img/browser/"+e.browser+".svg",width:"2em"},null,8,["src"])]),_:2},1024),a(r,null,{default:t(()=>[a(i,{caption:""},{default:t(()=>[o(c(u(P)(e.visitedAt)),1)]),_:2},1024),a(i,{caption:""},{default:t(()=>[o(c(e.platform),1)]),_:2},1024)]),_:2},1024),a(r,{side:""},{default:t(()=>[a(w,{label:"\u043E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C",class:"DefBtn"})]),_:1})]),_:2},1024),a(A)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})],64))}};var O=E(K,[["__scopeId","data-v-3c8db019"]]);const da={__name:"AccountsPage",setup(N){return H({title:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(h,m)=>(s(),L(O))}};export{da as default};
