import{Q as N}from"./QLinearProgress.4407f396.js";import{b as L,Q as f,a as c}from"./position-engine.c21b03aa.js";import{I as B,Q as D}from"./ItemIcon.fe913ccd.js";import{r as m,q as i,v as p,Y as t,f as e,af as A,_ as d,$ as _,a0 as b,t as y,F as k,Z as E,a6 as x,l as w,u as R,m as U,i as O,o as T,a5 as j,bj as q}from"./index.be968432.js";import{Q as z}from"./QList.94ac3282.js";import{Q as K}from"./QScrollArea.b5e345b1.js";import{u as W}from"./use-meta.7ad3f80c.js";import{u as Y}from"./use-quasar.fb03a9a8.js";import{api as M}from"./axios.b332e97b.js";import{e as Z,n as S,a as H}from"./myFuncts.cb4da9fc.js";import{P as J}from"./PriceImagerComponent.f6dd7c48.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as X}from"./ServerGroupSelect.d6d78223.js";import"./selection.aacd3f71.js";import"./QScrollObserver.6c220ff6.js";import"./TouchPan.291d6ccd.js";import"./format.959830d0.js";import"./price.8aed5ca0.js";import"./QSelect.9f8f8695.js";import"./QMenu.6a6c9ff8.js";const ee={__name:"MemberLastItem",props:{member:m(null)},setup(l){return(n,g)=>(i(),p(L,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e(A,{dense:"",flat:"",to:"/item/"+l.member.LastPricedItem.id},{default:t(()=>[e(B,{icon:l.member.LastPricedItem.icon,grade:l.member.LastPricedItem.grade},null,8,["icon","grade"])]),_:1},8,["to"])]),_:1}),e(f,{avatar:""},{default:t(()=>[e(c,{caption:""},{default:t(()=>[d(_(b(Z)(l.member.LastPricedItem.Price.updatedAt)),1)]),_:1}),e(c,null,{default:t(()=>[d(_(l.member.LastPricedItem.name),1)]),_:1}),e(c,null,{default:t(()=>[e(J,{currencyId:500,price:l.member.LastPricedItem.Price.price},null,8,["price"])]),_:1})]),_:1})]),_:1}))}};const te=["src"],ae={__name:"MemberAvaCell",props:{member:m(null)},setup(l){const n=String("https://auth.symphograph.ru/");return(g,s)=>(i(),y(k,null,[e(f,{avatar:""},{default:t(()=>[e(A,{round:"",glossy:"",class:"MemberAva",to:"/prices/"+l.member.accountId},{default:t(()=>[e(E,{size:"40px"},{default:t(()=>[x("img",{class:"MemberAvaImg",src:b(n)+"img/avatars/"+l.member.avaFileName,alt:""},null,8,te)]),_:1})]),_:1},8,["to"])]),_:1}),e(f,{class:"MemberInfo"},{default:t(()=>[e(c,null,{default:t(()=>[d(_(l.member.publicNick),1)]),_:1}),e(c,{caption:""},{default:t(()=>[d("\u0417\u0430\u043F\u0438\u0441\u0435\u0439:"+_(l.member.pricesCount),1)]),_:1}),l.member.followersCount?(i(),p(c,{key:0,caption:""},{default:t(()=>[d(" \u0414\u043E\u0432\u0435\u0440\u044F\u044E\u0442:"+_(l.member.followersCount),1)]),_:1})):w("",!0)]),_:1})],64))}};var re=G(ae,[["__scopeId","data-v-2052e84a"]]);const le={class:"WindowArea column"},oe={__name:"MembersPage",setup(l){R(),U();const n=Y(),g=String("https://api.aa.dllib.ru/"),s=O("curAccount"),v=m([]),I=m(!1),C=m(null);function F(o){M.post(g+"api/set/follow.php",{params:{master:o.id,serverGroupId:s.value.settings.serverGroupId,isFollow:o.isFollow}}).then(a=>{var r,u,Q;if(!((r=a==null?void 0:a.data)!=null&&r.result))throw new Error;n.notify(H((Q=(u=a==null?void 0:a.data)==null?void 0:u.result)!=null?Q:"\u041E\u0439!"))}).catch(a=>{n.notify(S(a))})}T(()=>{h()});function h(){if(s.value.settings.serverGroupId===100){v.value=[];return}I.value=!0,M.post(g+"/api/get/members.php",{params:{serverGroupId:s.value.settings.serverGroupId}}).then(o=>{var a,r,u;if(!((a=o==null?void 0:o.data)!=null&&a.result))throw new Error;v.value=(u=(r=o==null?void 0:o.data)==null?void 0:r.data)!=null?u:[]}).catch(o=>{v.value=[],n.notify(S(o))}).finally(()=>{I.value=!1})}function V(){return I.value}const P=m();function $(){P.value.saveServerGroup()}return W({title:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(o,a)=>(i(),y("div",le,[x("div",{class:"navigator",ref_key:"navigatorRef",ref:C},[e(X,{groupId:b(s).settings.serverGroupId,onOnSelect:a[0]||(a[0]=r=>$()),onOnSave:a[1]||(a[1]=r=>h()),ref_key:"refServerGroupSelect",ref:P},null,8,["groupId"])],512),e(N,{"animation-speed":200,color:"green",indeterminate:V()},null,8,["indeterminate"]),v.value.length?(i(),p(K,{key:0,class:"col"},{default:t(()=>[e(z,{dense:"",separator:""},{default:t(()=>[(i(!0),y(k,null,j(v.value,r=>(i(),p(L,{key:r.id,dense:""},{default:t(()=>[e(re,{member:r},null,8,["member"]),e(f,null,{default:t(()=>[e(ee,{member:r},null,8,["member"])]),_:2},1024),e(f,{side:""},{default:t(()=>[r.accountId!==b(s).id?(i(),p(q,{key:0,modelValue:r.isFollow,"onUpdate:modelValue":[u=>r.isFollow=u,u=>F({id:r.accountId,isFollow:r.isFollow})]},{default:t(()=>[e(D,null,{default:t(()=>a[2]||(a[2]=[d("\u0414\u043E\u0432\u0435\u0440\u044F\u0442\u044C")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):w("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):w("",!0)]))}};var Le=G(oe,[["__scopeId","data-v-6d41b37a"]]);export{Le as default};
