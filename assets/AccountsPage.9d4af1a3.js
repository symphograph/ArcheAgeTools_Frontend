import{Q as r,a as s,b as d}from"./position-engine.c21b03aa.js";import{i as k,r as E,o as M,q as i,t as f,a6 as V,f as a,Y as t,a0 as u,a4 as y,_ as o,$ as c,b9 as Q,ba as v,F as _,a5 as I,v as L,af as w,l as $,b1 as A}from"./index.be968432.js";import{Q as x}from"./QList.94ac3282.js";import{Q as F}from"./QImg.6da176f4.js";import{Q as q}from"./QScrollArea.b5e345b1.js";import{f as U,b as j,n as B}from"./myFuncts.cb4da9fc.js";import{I as C}from"./ItemIcon.fe913ccd.js";import{u as P}from"./use-quasar.fb03a9a8.js";import{_ as Y}from"./NickInput.6a4a82d2.js";import{api as D}from"./axios.b332e97b.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{u as H}from"./use-meta.7ad3f80c.js";import"./selection.aacd3f71.js";import"./QScrollObserver.6c220ff6.js";import"./TouchPan.291d6ccd.js";import"./format.959830d0.js";const J={class:"navigator"},K={__name:"AccountArea",emits:["onUnlinkAccount"],setup(N,{emit:S}){const h=P(),m=String("https://auth.symphograph.ru/"),p=k("curAccount"),T=k("AccountList"),g=E([]);function z(n){D.post(m+"api/device.php",{params:{method:"unlinkByAccount",accountId:n}}).then(l=>{var e;if(!((e=l==null?void 0:l.data)!=null&&e.result))throw new Error;b()}).catch(l=>{h.notify(B(l))})}function b(){D.post(m+"api/device.php",{params:{method:"otherList"}}).then(n=>{var l,e;if(!((l=n==null?void 0:n.data)!=null&&l.result))throw new Error;g.value=(e=n.data.data)!=null?e:[]}).catch(n=>{g.value=[],h.notify(B(n))})}return M(()=>{b()}),(n,l)=>(i(),f(_,null,[V("div",J,[a(d,null,{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(C,{locIcon:u(m)+u(p).Avatar.src,grade:1,size:"70px"},null,8,["locIcon"])]),_:1}),a(r,null,{default:t(()=>[a(s,null,{default:t(()=>[a(y,{name:"img:/img/auth/"+u(p).authType+".svg"},null,8,["name"]),o(" "+c(u(p).nickName),1)]),_:1}),a(Y)]),_:1})]),_:1})]),a(q,{class:"col myScrollArea"},{default:t(()=>[a(Q,{class:"MyCard"},{default:t(()=>[a(v,null,{default:t(()=>[a(d,null,{default:t(()=>[a(r,null,{default:t(()=>l[0]||(l[0]=[o(" \u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B, \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u044D\u0442\u0438\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C \u043D\u0430 \u044D\u0442\u043E\u043C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435. ")])),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(x,null,{default:t(()=>[(i(!0),f(_,null,I(u(T),e=>(i(),f(_,{key:e},[e.id!==u(p).id&&e.authType!=="default"?(i(),L(d,{key:0,clickable:""},{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(C,{locIcon:u(m)+e.Avatar.src,grade:1,size:"70px"},null,8,["locIcon"])]),_:2},1024),a(r,null,{default:t(()=>[a(s,{caption:""},{default:t(()=>[a(y,{size:"1.5em",name:"img:/img/auth/"+e.authType+".svg"},null,8,["name"]),o(" "+c(u(U)(e.visitedAt)),1)]),_:2},1024),a(s,null,{default:t(()=>[o(c(e.nickName),1)]),_:2},1024),a(s,null,{default:t(()=>[o(c(e.settings.publicNick),1)]),_:2},1024)]),_:2},1024),a(r,{side:""},{default:t(()=>[a(w,{label:"\u041E\u0442\u0432\u044F\u0437\u0430\u0442\u044C",class:"DefBtn",onClick:R=>z(e.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)):$("",!0)],64))),128)),a(A)]),_:1})]),_:1})]),_:1}),a(Q,{class:"MyCard"},{default:t(()=>[a(v,null,{default:t(()=>[a(d,null,{default:t(()=>[a(r,null,{default:t(()=>l[1]||(l[1]=[o(" \u0421\u0435\u0441\u0441\u0438\u0438 \u043D\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\u0445. ")])),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(x,null,{default:t(()=>[(i(!0),f(_,null,I(g.value,e=>(i(),f(_,{key:e.marker},[a(d,{style:{padding:"2em 0"}},{default:t(()=>[a(r,{avatar:""},{default:t(()=>[a(y,{size:"2em",name:e.ismobiledevice?"smartphone":"ion-desktop"},null,8,["name"])]),_:2},1024),a(r,{avatar:""},{default:t(()=>[a(F,{src:"/img/browser/"+e.browser+".svg",width:"2em"},null,8,["src"])]),_:2},1024),a(r,null,{default:t(()=>[a(s,{caption:""},{default:t(()=>[o(c(u(j)(e.visitedAt)),1)]),_:2},1024),a(s,{caption:""},{default:t(()=>[o(c(e.platform),1)]),_:2},1024)]),_:2},1024),a(r,{side:""},{default:t(()=>[a(w,{label:"\u043E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C",class:"DefBtn"})]),_:1})]),_:2},1024),a(A)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})],64))}};var O=G(K,[["__scopeId","data-v-1b4b5ab0"]]);const fa={__name:"AccountsPage",setup(N){return H({title:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(h,m)=>(i(),L(O))}};export{fa as default};
