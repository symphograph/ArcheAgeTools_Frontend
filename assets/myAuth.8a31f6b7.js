var p=Object.defineProperty;var h=(r,t,e)=>t in r?p(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>(h(r,typeof t!="symbol"?t+"":t,e),e);import{api as y}from"./axios.c7c3d222.js";import{a as P,n as m}from"./myFuncts.7b3aa3f0.js";class T{constructor(t="",e=""){s(this,"AccessToken");s(this,"SessionToken");this.AccessToken=t,this.SessionToken=e}powers(){return c.powers(this.AccessToken)}authType(){return c.authType(this.AccessToken)}id(){return c.userId(this.AccessToken)}persId(){return c.persId(this.AccessToken)}accountId(){return c.accountId(this.AccessToken)}isPermit(t){return t.length?t.some(e=>this.powers().includes(e)):!0}}s(T,"self");class c{static powers(t){var a;return(a=this.getPayload(t).powers)!=null?a:[]}static userId(t){var a;return(a=this.getPayload(t).uid)!=null?a:0}static getExploded(t){let[e,a,i]=t.split(".");return{header:e,payload:JSON.parse(atob(a)),Signature:i}}static getPayload(t){return this.getExploded(t).payload}static authType(t){return this.getPayload(t).authType}static persId(t){return this.getPayload(t).persId}static accountId(t){return this.getPayload(t).accountId}}class g{constructor({accountId:t=-1,publicNick:e="",grade:a=1,mode:i=1,old_id:n=null,siol:o=!1,authType:d="default",avaFileName:l=null,serverGroupId:u=100}={}){s(this,"accountId");s(this,"publicNick");s(this,"grade");s(this,"mode");s(this,"old_id");s(this,"siol");s(this,"authType");s(this,"avaFileName");s(this,"serverGroupId");this.accountId=t,this.publicNick=e,this.grade=a,this.mode=i,this.old_id=n,this.siol=o,this.authType=d,this.avaFileName=l,this.serverGroupId=u}static async setServerGroup(t,e){var n;const a=String("https://api.aa.dllib.ru/")+"api/settings.php",i={method:"setServerGroup",serverGroupId:e,name:this.name};try{const o=await y.post(a,{params:i});if(!((n=o==null?void 0:o.data)!=null&&n.result))throw new Error;return t.notify(P()),!0}catch(o){return t.notify(m(o)),!1}}}s(g,"self");export{g as a,T as m};
