import{Q as C,a as B,b as q}from"./position-engine.f1958f74.js";import{Q as Ee}from"./QLinearProgress.07d8843d.js";import{Q as He}from"./QScrollArea.fb12cf50.js";import{api as z}from"./axios.969454b1.js";import{P as fe}from"./LocalStorage.77bd63ca.js";import{u as W}from"./use-quasar.cf2a594d.js";import{u as ee,m as ce,i as y,r as h,w as Y,o as oe,$ as f,s as u,v as k,a0 as Ge,X as a,a5 as A,f as t,b3 as je,a3 as me,Z as w,_ as N,l as $,a1 as Fe,a6 as ze,b as Ke,c as R,t as T,F as j,a4 as te,ae as Z,b4 as ke,b5 as Le,av as J,b6 as We,H as Je,aW as we,J as Xe,K as Ye,L as Ze,M as et,b7 as be,Q as tt,S as at,h as V,g as lt,b8 as Ce,U as ve,ac as nt,I as rt,ab as ot,Y as $e,aa as Pe,aG as xe,p as H,b9 as Te,ba as de,bb as Ae,n as ut}from"./index.cb444a0d.js";import{Q as it}from"./QSelect.4d222dc6.js";import{I as G,Q as _e}from"./ItemIcon.e08f3581.js";import{n as K,p as le,c as Be,b as ne,e as ue,f as pe,g as Ie}from"./myFuncts.ea488a6b.js";import{a as ct,Q as st}from"./QSlideTransition.61d21438.js";import{Q as ge}from"./QList.912e573f.js";import"./jwt-decode.esm.81f958e7.js";import{L as De}from"./LostList.9299a28e.js";import{P as dt}from"./PriceItemInput.d2559c1f.js";import{P as he}from"./PriceImagerComponent.f0b76ac8.js";import{_ as ft}from"./DelBtn.7c93a7e2.js";import"./SalaryCard.434ae648.js";/* empty css                                                                   */import{_ as mt}from"./ServerGroupSelect.6b61896c.js";import{D as vt}from"./DialogWindow.55d4637d.js";import"./selection.b38de182.js";import"./QScrollObserver.732fd9cf.js";import"./TouchPan.11d69318.js";import"./format.865294d5.js";import"./QMenu.f06e4780.js";const _t={style:{width:"40px"}},gt={__name:"SearchSelect",emits:["iAmSelected"],setup(e,{emit:g}){const c=ee(),m=ce(),d=W(),r=String("https://api.aa.dllib.ru/"),l=y("SearchList"),n=y("selectedItem"),P=h([...l.value]),x=y("Item"),b=y("selCategId");y("selCategNode",null);const I=h(null);function v(){return x.value&&b.value?x.value.Info.Category.name:"\u0412\u0441\u0435"}function _(){c.params.id=n.value.id,m.push({path:"/item/"+c.params.id}),b.value=n.value.categId,g("iAmSelected")}Y(b,()=>{b.value},{deep:!0}),Y(x,()=>{l.value.length&&c.params.id&&x.value&&(n.value=l.value.find(p=>p.id===x.value.id),b.value=n.value.categId)},{deep:!0});function i(p,D,M){if(p===""){D(()=>{P.value=[...l.value]});return}D(()=>{const F=p.toLowerCase();let O=[...l.value];p&&(O=[...O].filter(Q=>Q.name.toLowerCase().indexOf(F)>-1)),P.value=O})}function s(){z.post(r+"api/get/search.php").then(p=>{var D,M,F,O,Q;if(!((D=p==null?void 0:p.data)!=null&&D.result))throw new Error;L((F=(M=p==null?void 0:p.data)==null?void 0:M.data)!=null?F:[]),l.value=(Q=(O=p==null?void 0:p.data)==null?void 0:O.data)!=null?Q:[]}).catch(p=>{d.notify(K(p))})}function o(){let p=indexedDB.open("prepData",1);p.onupgradeneeded=function(){let D=p.result;D.objectStoreNames.contains("cachedData")||D.createObjectStore("cachedData",{keyPath:"id"})},p.onerror=function(){console.error("Error",p.error)},p.onsuccess=function(){let O=p.result.transaction("cachedData","readonly").objectStore("cachedData").get("searchList");O.onsuccess=Q=>{let E=Q.target.result;E?l.value=E.content:s()},O.onerror=Q=>{console.log("SearchList \u043D\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D")}}}function L(p){let D=indexedDB.open("prepData",1);D.onupgradeneeded=function(){console.log("\u0438\u043D\u0438\u0446\u0438\u043B\u0438\u0430\u0437\u0438\u044F \u0431\u0434");let M=D.result;M.objectStoreNames.contains("cachedData")||M.createObjectStore("cachedData",{keyPath:"id"})},D.onerror=function(){console.error("Error",D.error)},D.onsuccess=function(){let M=D.result;console.log("\u0432\u0438\u0436\u0443 \u0431\u0434");let O=M.transaction("cachedData","readwrite").objectStore("cachedData"),Q={id:"searchList",content:p},E=O.add(Q);E.onsuccess=function(){console.log("\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435",E.result)},E.onerror=function(){console.log("\u041E\u0448\u0438\u0431\u043A\u0430",E.error)}}}function U(){n.value=null,b.value=0}return oe(()=>{o()}),(p,D)=>f(l).length?(u(),k(it,{key:0,options:P.value,modelValue:f(n),"onUpdate:modelValue":[D[0]||(D[0]=M=>Ke(n)?n.value=M:null),_],"option-label":"name","option-value":"id","map-options":"",filled:"","use-input":"",autocomplete:"off","fill-input":"","hide-selected":"",label:v(),"input-debounce":"0",ref_key:"searchInput",ref:I,onFilter:i,"popup-content-style":{backgroundColor:"rgb(181 238 8 / 97%)"}},Ge({option:a(M=>[t(q,Fe(ze(M.itemProps)),{default:a(()=>[t(C,{avatar:""},{default:a(()=>[t(G,{icon:M.opt.icon,grade:M.opt.grade},null,8,["icon","grade"])]),_:2},1024),t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w(N(M.opt.name),1)]),_:2},1024),M.opt.craftable?(u(),k(B,{key:0,caption:""},{default:a(()=>[w("\u041A\u0440\u0430\u0444\u0442\u0430\u0431\u0435\u043B\u044C\u043D\u044B\u0439")]),_:1})):$("",!0),M.opt.personal?(u(),k(B,{key:1,caption:""},{default:a(()=>[w("\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439")]),_:1})):$("",!0)]),_:2},1024)]),_:2},1040)]),_:2},[f(n)?{name:"prepend",fn:a(()=>[A("div",_t,[t(G,{icon:f(n).icon,grade:f(n).grade},null,8,["icon","grade"])])]),key:"0"}:void 0,f(n)?{name:"append",fn:a(()=>[t(me,{name:"cancel",onClick:je(U,["stop","prevent"]),class:"cursor-pointer"},null,8,["onClick"])]),key:"1"}:void 0]),1032,["options","modelValue","label","popup-content-style"])):$("",!0)}};const pt=e=>(ke("data-v-fe286c14"),e=e(),Le(),e),It=pt(()=>A("div",{class:"MainName"},"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0432 \u0440\u0435\u0446\u0435\u043F\u0442\u0430\u0445:",-1)),ht={class:"upCraftArea"},yt={__name:"CraftResults",props:{CraftResults:h(null)},setup(e){const g=e;ee(),ce(),y("itemId");const c=(l,n)=>l.id>n.id?1:-1,m=h(0);function d(l,n){return n?l+'<br><span style="color: gray">\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439</span>':l}const r=R(()=>{if(!g.CraftResults.length)return[];switch(m.value){case 0:return[...g.CraftResults].sort(c);default:return c}});return(l,n)=>(u(),T(j,null,[It,A("div",ht,[(u(!0),T(j,null,te(r.value,P=>(u(),k(Z,{key:P.id,class:"no-padding",dense:"",flat:"",to:"/item/"+P.id},{default:a(()=>[t(G,{toolText:d(P.name,P.personal),icon:P.icon,grade:P.grade},null,8,["toolText","icon","grade"])]),_:2},1032,["to"]))),128))])],64))}};var bt=J(yt,[["__scopeId","data-v-fe286c14"]]);const ae=We({}),Ct=Object.keys(we);var re=Je({name:"QExpansionItem",props:{...we,...Xe,...Ye,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ze,"click","afterShow","afterHide"],setup(e,{slots:g,emit:c}){const{proxy:{$q:m}}=lt(),d=et(e,m),r=h(e.modelValue!==null?e.modelValue:e.defaultOpened),l=h(null),n=be(),{show:P,hide:x,toggle:b}=tt({showing:r});let I,v;const _=R(()=>`q-expansion-item q-item-type q-expansion-item--${r.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),i=R(()=>{if(e.contentInsetLevel===void 0)return null;const S=m.lang.rtl===!0?"Right":"Left";return{["padding"+S]:e.contentInsetLevel*56+"px"}}),s=R(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),o=R(()=>{const S={};return Ct.forEach(X=>{S[X]=e[X]}),S}),L=R(()=>s.value===!0||e.expandIconToggle!==!0),U=R(()=>e.expandedIcon!==void 0&&r.value===!0?e.expandedIcon:e.expandIcon||m.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),p=R(()=>e.disable!==!0&&(s.value===!0||e.expandIconToggle===!0)),D=R(()=>({expanded:r.value===!0,detailsId:e.targetUid,toggle:b,show:P,hide:x})),M=R(()=>{const S=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:m.lang.label[r.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":r.value===!0?"true":"false","aria-controls":n,"aria-label":S}});Y(()=>e.group,S=>{v!==void 0&&v(),S!==void 0&&ye()});function F(S){s.value!==!0&&b(S),c("click",S)}function O(S){S.keyCode===13&&Q(S,!0)}function Q(S,X){X!==!0&&l.value!==null&&l.value.focus(),b(S),ot(S)}function E(){c("afterShow")}function Ue(){c("afterHide")}function ye(){I===void 0&&(I=be()),r.value===!0&&(ae[e.group]=I);const S=Y(r,ie=>{ie===!0?ae[e.group]=I:ae[e.group]===I&&delete ae[e.group]}),X=Y(()=>ae[e.group],(ie,Ne)=>{Ne===I&&ie!==void 0&&ie!==I&&x()});v=()=>{S(),X(),ae[e.group]===I&&delete ae[e.group],v=void 0}}function Re(){const S={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},X=[V(me,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&r.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:U.value})];return p.value===!0&&(Object.assign(S,{tabindex:0,...M.value,onClick:Q,onKeyup:O}),X.unshift(V("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),V(C,S,()=>X)}function qe(){let S;return g.header!==void 0?S=[].concat(g.header(D.value)):(S=[V(C,()=>[V(B,{lines:e.labelLines},()=>e.label||""),e.caption?V(B,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&S[e.switchToggleSide===!0?"push":"unshift"](V(C,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>V(me,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&S[e.switchToggleSide===!0?"unshift":"push"](Re()),S}function Oe(){const S={ref:"item",style:e.headerStyle,class:e.headerClass,dark:d.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return L.value===!0&&(S.clickable=!0,S.onClick=F,Object.assign(S,s.value===!0?o.value:M.value)),V(q,S,qe)}function Qe(){return ve(V("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:i.value,id:n},rt(g.default)),[[nt,r.value]])}function Ve(){const S=[Oe(),V(ct,{duration:e.duration,onShow:E,onHide:Ue},Qe)];return e.expandSeparator===!0&&S.push(V(Ce,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:d.value}),V(Ce,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:d.value})),S}return e.group!==void 0&&ye(),at(()=>{v!==void 0&&v()}),()=>V("div",{class:_.value},[V("div",{class:"q-expansion-item__container relative-position"},Ve())])}});const se=e=>(ke("data-v-5601a48f"),e=e(),Le(),e),Pt={key:0,class:"CraftInfo"},xt={class:"InfoCol"},St=["innerHTML"],kt=["innerHTML"],Lt={class:"InfoCol"},wt=se(()=>A("img",{src:"/img/interface/perdaru.png",alt:""},null,-1)),$t={class:"InfoCol"},Tt=se(()=>A("img",{class:"smallIcon",src:"/img/valuta/2.png",alt:""},null,-1)),At=se(()=>A("img",{class:"smallIcon",src:"/img/valuta/2.png",alt:""},null,-1)),Bt=se(()=>A("img",{class:"smallIcon",src:"/img/valuta/2.png",alt:""},null,-1)),Dt={__name:"CraftInfo",props:{Craft:h(null)},emits:["onSetUBest"],setup(e,{emit:g}){const c=e,m=W(),d=String("https://api.aa.dllib.ru/"),r=h(c.Craft.countData.isUBest),l=h(c.Craft.countData.isBest);h(c.Craft.countData.isBuyOnly);const n=y("Item"),P=R(()=>{if(!n.value.Pricing.isGoldable)return 0;if(!n.value.Pricing.Price.price)return!1;let o=n.value.Pricing.Price.price+"";return o=o.replace(/[^0-9]/g,"")*.9,o=Math.round(o),o-c.Craft.countData.craftCost});function x(o){Be(o).then(()=>{m.notify({color:"positive",position:"center",message:"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E",icon:"content_copy",timeout:1})}).catch(()=>{})}function b(o){return o?o<1e3?o:Math.round(o/1e3)+"k":""}function I(o){return Math.round(o*100)/100}function v(){z.post(d+"api/set/price/buyable.php",{params:{buyable:n.value.isBuyOnly,itemId:n.value.id}}).then(o=>{var L,U,p;if(!((L=o==null?void 0:o.data)!=null&&L.result))throw new Error;m.notify(ne((p=(U=o==null?void 0:o.data)==null?void 0:U.result)!=null?p:"\u041E\u0439!"))}).catch(o=>{m.notify(K(o))})}function _(){r.value?i():s()}function i(){z.post(d+"api/set/craft/ubest.php",{params:{craftId:c.Craft.id}}).then(o=>{var L,U,p;if(!((L=o==null?void 0:o.data)!=null&&L.result))throw new Error;m.notify(ne((p=(U=o==null?void 0:o.data)==null?void 0:U.result)!=null?p:"\u041E\u0439!")),g("onSetUBest")}).catch(o=>{m.notify(K(o))})}function s(){z.post(d+"api/set/craft/delubest.php",{params:{craftId:c.Craft.id}}).then(o=>{var L,U,p;if(!((L=o==null?void 0:o.data)!=null&&L.result))throw new Error;m.notify(ne((p=(U=o==null?void 0:o.data)==null?void 0:U.result)!=null?p:"\u041E\u0439!")),g("onSetUBest")}).catch(o=>{m.notify(K(o))})}return(o,L)=>e.Craft?(u(),T("div",Pt,[A("div",xt,[l.value?(u(),k(q,{key:0,dense:""},{default:a(()=>[t(C,null,{default:a(()=>[w(N(r.value?"\u0412\u044B\u0431\u0440\u0430\u043D \u0432\u0430\u043C\u0438":"\u0412\u044B\u0431\u0440\u0430\u043D \u043A\u0430\u043B\u044C\u043A\u0443\u043B\u044F\u0442\u043E\u0440\u043E\u043C"),1)]),_:1})]),_:1})):$("",!0),t(q,{dense:""},{default:a(()=>[t(C,null,{default:a(()=>[w(" Craft Id: ")]),_:1}),t(C,{side:""},{default:a(()=>[t(Z,{label:e.Craft.id,"icon-right":"content_copy",class:"no-padding",dense:"",flat:"",onClick:L[0]||(L[0]=U=>x(e.Craft.id))},null,8,["label"])]),_:1})]),_:1}),t(q,{dense:"",class:"listItem"},{default:a(()=>[t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w(" \u041A\u043E\u044D\u0444 SPM: ")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(B,null,{default:a(()=>[w(N(I(e.Craft.countData.spmu)),1)]),_:1})]),_:1})]),_:1}),t(q,{dense:"",class:"listItem"},{default:a(()=>[t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w(" \u0421\u0435\u0431\u0435\u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C: ")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(B,null,{default:a(()=>[A("span",{innerHTML:f(le)(e.Craft.countData.craftCost)},null,8,St)]),_:1})]),_:1})]),_:1}),P.value!==!1?(u(),k(q,{key:1,dense:"",class:"listItem"},{default:a(()=>[t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w(" \u041F\u0440\u0438\u0431\u044B\u043B\u044C: ")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(B,null,{default:a(()=>[A("span",{innerHTML:f(le)(P.value)},null,8,kt)]),_:1})]),_:1})]),_:1})):$("",!0)]),A("div",Lt,[t(ge,{dense:""},{default:a(()=>[t(q,{dense:""},{default:a(()=>[t(C,{avatar:""},{default:a(()=>[t(G,{grade:e.Craft.Prof.lvl,locIcon:"/img/profs/"+e.Craft.Prof.id+".png","tool-text":"\u041F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u044F",size:"30px"},null,8,["grade","locIcon"])]),_:1}),t(C,null,{default:a(()=>[w(N(e.Craft.Prof.name),1)]),_:1}),t(C,{side:""},{default:a(()=>[w(N(b(e.Craft.profNeed)),1)]),_:1})]),_:1}),t(q,{dense:""},{default:a(()=>[t(C,{avatar:""},{default:a(()=>[t(G,{grade:1,locIcon:"/img/interface/doodad.png","tool-text":"\u041F\u0440\u0438\u0441\u043F\u043E\u0441\u043E\u0431\u043B\u0435\u043D\u0438\u0435",size:"30px"},null,8,["locIcon"])]),_:1}),t(C,null,{default:a(()=>[w(N(e.Craft.doodName),1)]),_:1}),t(C,{side:""})]),_:1}),l.value&&f(n).isMat&&!f(n).personal?ve((u(),k(q,{key:0,tag:"label",dense:""},{default:a(()=>[t(_e,{class:"bg-tooltip"},{default:a(()=>[w(" \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 \u0446\u0435\u043D\u0443 \u043F\u043E\u043A\u0443\u043F\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u043E \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u0438 \u043A\u0440\u0430\u0444\u0442\u0430 ")]),_:1}),t(C,{avatar:""},{default:a(()=>[t($e,{size:"2.5em"},{default:a(()=>[wt]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w("\u041F\u043E\u043A\u0443\u043F\u0430\u0435\u043C\u044B\u0439")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(Pe,{modelValue:f(n).isBuyOnly,"onUpdate:modelValue":[L[1]||(L[1]=U=>f(n).isBuyOnly=U),L[2]||(L[2]=U=>v())]},null,8,["modelValue"])]),_:1})]),_:1})),[[xe]]):$("",!0),f(n).personal?$("",!0):ve((u(),k(q,{key:1,tag:"label",dense:""},{default:a(()=>[t(_e,{class:"bg-tooltip"},{default:a(()=>[w(" \u0412\u044B\u0431\u0438\u0440\u0430\u0442\u044C \u044D\u0442\u043E\u0442 \u0440\u0435\u0446\u0435\u043F\u0442 \u043F\u0440\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 ")]),_:1}),t(C,{avatar:""},{default:a(()=>[t(G,{grade:12,locIcon:"/img/interface/perdaru.png","tool-text":"\u041F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u043C\u044B\u0439",size:"30px"},null,8,["locIcon"])]),_:1}),t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w("\u041F\u0440\u0435\u0434\u043F\u043E\u0447\u0438\u0442\u0430\u0435\u043C\u044B\u0439")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(Pe,{modelValue:r.value,"onUpdate:modelValue":[L[3]||(L[3]=U=>r.value=U),L[4]||(L[4]=U=>_())]},null,8,["modelValue"])]),_:1})]),_:1})),[[xe]])]),_:1})]),A("div",$t,[t(ge,{dense:""},{default:a(()=>[t(q,{dense:"",class:"listItem"},{default:a(()=>[t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w(" \u041E\u0420 \u043D\u0430 \u0440\u0435\u0446\u0435\u043F\u0442: ")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(B,null,{default:a(()=>[w(N(I(e.Craft.countData.LaborData.forThisCraftBonused))+" ",1),Tt]),_:1})]),_:1})]),_:1}),t(q,{dense:"",class:"listItem"},{default:a(()=>[t(C,{class:"no-padding"},{default:a(()=>[t(B,null,{default:a(()=>[w(" \u041E\u0420 \u043D\u0430 1\u0448\u0442: ")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(B,null,{default:a(()=>[w(N(I(e.Craft.countData.LaborData.forOneUnitOfThisCraft))+" ",1),At]),_:1})]),_:1})]),_:1}),t(q,{dense:"",class:"listItem"},{default:a(()=>[t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[w(" \u041E\u0420 \u043D\u0430 \u0446\u0435\u043F\u043E\u0447\u043A\u0443: ")]),_:1})]),_:1}),t(C,{side:""},{default:a(()=>[t(B,null,{default:a(()=>[w(N(I(e.Craft.countData.laborTotal))+" ",1),Bt]),_:1})]),_:1})]),_:1})]),_:1})])])):$("",!0)}};var Mt=J(Dt,[["__scopeId","data-v-5601a48f"]]);const Ut={class:"MatRow"},Rt={__name:"MatRow",props:{Craft:h(null)},setup(e){const g=y("itemId"),c=y("Item");function m(r){var l,n;return(l=r==null?void 0:r.Price)!=null&&l.method?r.Item.name+'<br><span style="color: '+ue(((n=r==null?void 0:r.Price)==null?void 0:n.method)||"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")+'">'+pe((r==null?void 0:r.Price)||{})+":</span><br>"+le(r.Price.price,500):"\u041A\u0430\u043A\u0430\u044F-\u0442\u043E \u0444\u0438\u0433\u043D\u044F..."}function d(r){g.value=r}return(r,l)=>(u(),T("div",Ut,[t(q,{dense:"",class:"matArea"},{default:a(()=>[t(C,{avatar:"",style:{width:"max-content"},class:"no-padding"},{default:a(()=>[t(G,{grade:f(c).grade,icon:f(c).icon,amount:e.Craft.resultAmount,"tool-text":f(c).name,size:"70px",onClick:l[0]||(l[0]=n=>d(f(c).id))},null,8,["grade","icon","amount","tool-text"])]),_:1}),t(C,{class:"no-padding",top:"",thumbnail:""},{default:a(()=>[t(B,null,{default:a(()=>[(u(!0),T(j,null,te(e.Craft.Mats,n=>(u(),k(Z,{key:n.id,class:"no-padding",dense:"",flat:"",to:"/item/"+n.id},{default:a(()=>[t(G,{grade:n.grade?n.grade:n.Item.grade,icon:n.Item.icon,amount:n.need,"tool-text":m(n)},null,8,["grade","icon","amount","tool-text"])]),_:2},1032,["to"]))),128))]),_:1})]),_:1})]),_:1})]))}};var qt=J(Rt,[["__scopeId","data-v-49e16e53"]]);const Ot={class:"MatPool"},Qt={__name:"MatPool",props:{matPool:h(null)},setup(e){const g=y("resultAmount");function c(d){return d.Item.name+"<br>"+m(d.need*g)+'\u0448\u0442<br><span style="color: '+ue(d.Price.method)+'">'+pe(d.Price)+":</span><br>"+le(d.Price.price)+"<br>"}function m(d){return Math.round(d*10)/10}return(d,r)=>(u(),k(re,{label:"\u0412\u0441\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",popup:""},{default:a(()=>[A("div",Ot,[(u(!0),T(j,null,te(e.matPool,l=>(u(),k(Z,{key:l.id,class:"no-padding",dense:"",flat:"",to:"/item/"+l.id},{default:a(()=>[t(G,{grade:l.grade?l.grade:l.Item.grade,icon:l.Item.icon,amount:m(l.need*f(g)),"tool-text":c(l)},null,8,["grade","icon","amount","tool-text"])]),_:2},1032,["to"]))),128))])]),_:1}))}};var Vt=J(Qt,[["__scopeId","data-v-7e1c3691"]]);const Nt={class:"MatPool"},Et={__name:"TrashPool",props:{trashPool:h(null)},setup(e){const g=y("resultAmount");function c(d){return d.Item.name+"<br>"+m(d.need*g)+'\u0448\u0442<br><span style="color: '+ue(d.Price.method)+'">'+pe(d.Price)+":</span><br>"+le(d.Price.price)+"<br>"}function m(d){return Math.round(d*10)/10}return(d,r)=>(u(),k(re,{label:"\u0412\u0441\u0435 \u043E\u0442\u0445\u043E\u0434\u044B",popup:""},{default:a(()=>[A("div",Nt,[(u(!0),T(j,null,te(e.trashPool,l=>(u(),k(Z,{key:l.id,class:"no-padding",dense:"",flat:"",to:"/item/"+l.id},{default:a(()=>[t(G,{grade:l.grade?l.grade:l.Item.grade,icon:l.Item.icon,amount:m(l.need*f(g)),"tool-text":c(l)},null,8,["grade","icon","amount","tool-text"])]),_:2},1032,["to"]))),128))])]),_:1}))}};var Ht=J(Et,[["__scopeId","data-v-7f0d400c"]]);const Gt={class:"wrapContainer"},jt={class:"wrapElement"},Ft={__name:"CraftCard",props:{Craft:h(null)},emits:["onSetUBest","delUBest"],setup(e,{emit:g}){const c=e;W(),y("itemId");const m=y("Item"),d=y("progress");return y("isSingleCraft"),H("resultAmount",c.Craft.resultAmount),(r,l)=>f(m)&&!f(d)?(u(),k(Te,{key:0,class:"CraftCard","transition-show":"jump-down","transition-hide":"jump-up"},{default:a(()=>[t(de,null,{default:a(()=>[t(Mt,{Craft:e.Craft,onOnSetUBest:l[0]||(l[0]=n=>g("onSetUBest"))},null,8,["Craft"])]),_:1}),t(de,null,{default:a(()=>[A("div",Gt,[A("div",jt,[t(qt,{Craft:e.Craft},null,8,["Craft"])])])]),_:1}),e.Craft.matPool?(u(),k(de,{key:0},{default:a(()=>[t(Vt,{matPool:e.Craft.matPool},null,8,["matPool"]),t(Ht,{trashPool:e.Craft.trashPool},null,8,["trashPool"])]),_:1})):$("",!0)]),_:1})):$("",!0)}};var Se=J(Ft,[["__scopeId","data-v-c6579b48"]]);const zt={key:1},Kt={__name:"CraftList",setup(e,{expose:g}){const c=W(),m=String("https://api.aa.dllib.ru/"),d=ee(),r=y("Item");y("itemId");const l=h(null),n=h([]),P=h([]),x=y("CraftProgress"),b=R(()=>!(n.value&&n.value.length));H("isSingleCraft",b),g({loadCrafts:I}),Y(r,()=>{r.value&&r.value.craftable},{deep:!0}),oe(()=>{console.log("craftList mounted")});function I(){!r.value.craftable||(P.value=[],x.value=!0,z.post(m+"api/get/crafts.php",{params:{itemId:d.params.id}}).then(v=>{var _,i,s,o,L,U,p,D,M,F,O,Q,E;if(!((_=v==null?void 0:v.data)!=null&&_.result))throw new Error;if((o=(s=(i=v==null?void 0:v.data)==null?void 0:i.data)==null?void 0:s.Lost)!=null&&o.length){P.value=(p=(U=(L=v==null?void 0:v.data)==null?void 0:L.data)==null?void 0:U.Lost)!=null?p:[],n.value=[],l.value=null;return}n.value=(F=(M=(D=v==null?void 0:v.data)==null?void 0:D.data)==null?void 0:M.otherCrafts)!=null?F:[],l.value=(E=(Q=(O=v==null?void 0:v.data)==null?void 0:O.data)==null?void 0:Q.mainCraft)!=null?E:null}).catch(v=>{n.value=[],l.value=null,c.notify(K(v,"\u041E\u0439! CraftList \u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 :("))}).finally(()=>{x.value=!1}))}return(v,_)=>(u(),T(j,null,[l.value?(u(),k(Se,{Craft:l.value,key:l.value.id,onOnSetUBest:_[0]||(_[0]=i=>I())},null,8,["Craft"])):(u(),T("div",zt,"\u0420\u0435\u0446\u0435\u043F\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B")),n.value.length?(u(),k(re,{key:2,label:"\u0414\u0440\u0443\u0433\u0438\u0435 \u0440\u0435\u0446\u0435\u043F\u0442\u044B",popup:""},{default:a(()=>[(u(!0),T(j,null,te(n.value,i=>(u(),k(Se,{key:i.id,Craft:i,onOnSetUBest:_[1]||(_[1]=s=>I())},null,8,["Craft"]))),128))]),_:1})):$("",!0),P.value&&P.value.length?(u(),k(De,{key:3,Lost:P.value,msg:`<b>\u0420\u0430\u0441\u0447\u0435\u0442 \u043D\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u0441\u044F.</b><br>
    \u0412 \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u0445 \u0440\u0435\u0446\u0435\u043F\u0442\u0430\u0445 \u0435\u0441\u0442\u044C \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0435 \u0446\u0435\u043D\u044B.<br>
    \u0411\u0435\u0437 \u043D\u0438\u0445 \u044F \u043D\u0435 \u043C\u043E\u0433\u0443 \u043F\u043E\u0441\u0447\u0438\u0442\u0430\u0442\u044C \u0438 \u0441\u0440\u0430\u0432\u043D\u0438\u0442\u044C.`},null,8,["Lost"])):$("",!0)],64))}};var Wt=J(Kt,[["__scopeId","data-v-1e8937b4"]]);const Jt={class:"itemIconsArea"},Xt={__name:"CurrencyTradable",setup(e){W(),ee(),y("progress"),y("Item");const g=y("TradableItems"),c=(r,l)=>r.categId>l.categId?1:-1,m=h(0),d=R(()=>{if(!g.value)return[];switch(m.value){case 0:return[...g.value].sort(c);default:return c}});return(r,l)=>(u(),T("div",Jt,[(u(!0),T(j,null,te(d.value,n=>(u(),k(Z,{key:n.id,class:"no-padding",dense:"",flat:"",to:"/item/"+n.id},{default:a(()=>[t(G,{icon:n.icon,grade:n.grade,"tool-text":n.name},null,8,["icon","grade","tool-text"])]),_:2},1032,["to"]))),128))]))}};const Yt=["src"],Zt=["innerHTML"],ea={__name:"PriceCurrencyItem",props:{CurItem:h(null)},emits:["delPrice","updated"],setup(e,{emit:g}){const c=e,m=W(),d=String("https://api.aa.dllib.ru/"),r=ce(),l=h(c.CurItem.Item.Price.price),n=h(null),P=h(!1);h(c.CurItem.Item.Price.buyOnly);const x=y("curAccount");function b(i){r.push({path:"/item/"+i})}function I(){z.post(d+"api/set/price/del.php",{params:{itemId:c.CurItem.Item.id}}).then(i=>{var s,o,L;if(!((s=i==null?void 0:i.data)!=null&&s.result))throw new Error;m.notify(ne((L=(o=i==null?void 0:i.data)==null?void 0:o.result)!=null?L:"\u041E\u0439!"))}).catch(i=>{m.notify(K(i))})}function v(){n.value.blur(),z.post(d+"api/set/price/price.php",{params:{price:l.value,itemId:c.CurItem.Item.id}}).then(i=>{var s,o,L;if(!((s=i==null?void 0:i.data)!=null&&s.result))throw new Error;m.notify(ne((L=(o=i==null?void 0:i.data)==null?void 0:o.result)!=null?L:"\u041E\u0439!")),g("updated")}).catch(i=>{m.notify(K(i))})}function _(i){Be(i).then(()=>{m.notify({color:"positive",position:"center",message:"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E",icon:"content_copy",timeout:1})}).catch(()=>{})}return(i,s)=>(u(),k(q,{dense:"",class:"PriceCell"},{default:a(()=>[t(C,null,{default:a(()=>[t(B,{lines:1},{default:a(()=>[A("div",{class:"PriceLabel",onClick:s[0]||(s[0]=o=>_(e.CurItem.Item.name))},N(e.CurItem.Item.name),1)]),_:1}),t(Ae,{mask:"## ## ##",class:"PriceInput",label:f(Ie)(e.CurItem.Item.Price.updatedAt)+" - "+e.CurItem.Item.Price.author,"label-color":f(ue)(e.CurItem.Item.Price.method),dense:"",filled:"",borderless:"","reverse-fill-mask":"",ref_key:"priceRef",ref:n,modelValue:l.value,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value=o),onFocus:s[3]||(s[3]=o=>P.value=!0),onBlur:s[4]||(s[4]=o=>P.value=!1)},{before:a(()=>[t(Z,{class:"no-padding",dense:"",flat:"",to:"/item/"+e.CurItem.Item.Price.itemId,onClick:s[1]||(s[1]=o=>b(e.CurItem.Item.Price.itemId))},{default:a(()=>[t(G,{icon:e.CurItem.Item.icon,grade:e.CurItem.Item.grade,"tool-text":e.CurItem.Item.name},null,8,["icon","grade","tool-text"])]),_:1},8,["to"])]),append:a(()=>[P.value?(u(),k(Z,{key:0,label:"Ok",class:"DefBtn",dense:"","no-caps":"",flat:"",onClick:v})):$("",!0)]),after:a(()=>[t(_e,null,{default:a(()=>[w("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")]),_:1}),t(ft,{onOnOk:I,disable:e.CurItem.Item.Price.accountId!==f(x).id},null,8,["disable"])]),_:1},8,["label","label-color","modelValue"]),t(B,{style:{"font-size":"14px",padding:"3px 0"}},{default:a(()=>[w(" 1"),A("img",{class:"imgValut",src:"/img/valuta/"+e.CurItem.Item.currencyId+".png",alt:""},null,8,Yt),w(" = "),A("span",{innerHTML:f(le)(e.CurItem.currencyPrice)},null,8,Zt)]),_:1})]),_:1})]),_:1}))}};var ta=J(ea,[["__scopeId","data-v-6bf97801"]]);const aa={key:0},la={class:"MainName"},na=["src"],ra={key:1},oa=["src"],ua={key:2,class:"PricesArea"},ia={key:0},ca=A("br",null,null,-1),sa={key:1},da=["src"],fa=A("br",null,null,-1),ma={__name:"CurrencyArea",setup(e){const g=W(),c=String("https://api.aa.dllib.ru/");ee();const m=y("progress"),d=y("CurrencyProgress"),r=y("Item"),l=h(null),n=R(()=>l.value?l.value.TradableItems:[]),P=R(()=>r.value.categId===173?r.value.id:r.value.currencyId);H("TradableItems",n),Y(r,()=>{r.value&&x()},{deep:!0}),oe(()=>{x()});function x(){d.value=!0,z.post(c+"api/get/currency.php",{params:{id:P.value}}).then(b=>{var I,v,_;if(!((I=b==null?void 0:b.data)!=null&&I.result))throw new Error;m.value=!1,l.value=(_=(v=b==null?void 0:b.data)==null?void 0:v.data)!=null?_:null}).catch(b=>{l.value=null,m.value=!1,g.notify(K(b,"\u041E\u0439! Currency \u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 :("))}).finally(()=>{d.value=!1})}return(b,I)=>l.value?(u(),T("div",aa,[t(re,{label:"\u041A\u043E\u043D\u0432\u0435\u0440\u0442\u043E\u0440 \u0432\u0430\u043B\u044E\u0442\u044B",icon:"img:/img/valuta/"+l.value.id+".png"},{default:a(()=>[t(dt,{price:l.value.Price},null,8,["price"]),A("div",la,[w("\u041F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u044B \u0437\u0430 "),A("img",{class:"imgValut",src:"/img/valuta/"+l.value.id+".png",alt:""},null,8,na)]),n.value.length?(u(),k(Xt,{key:0})):$("",!0),l.value.median?(u(),T("div",ra,[w(" \u0421\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430 "),A("img",{class:"imgValut",src:"/img/valuta/"+l.value.id+".png",alt:""},null,8,oa),w(": "),t(he,{price:l.value.median,"currency-id":500},null,8,["price"])])):$("",!0),l.value.MonetisationItems.length?(u(),T("div",ua,[(u(!0),T(j,null,te(l.value.MonetisationItems,v=>(u(),k(ta,{key:v.id,CurItem:v,onUpdated:x,onDelPrice:x},null,8,["CurItem"]))),128))])):$("",!0),l.value.lost.length?(u(),T(j,{key:3},[l.value.MonetisationItems.length?(u(),T("div",ia,[w(" \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043C\u043E\u0436\u043D\u043E \u0443\u0442\u043E\u0447\u043D\u0438\u0442\u044C."),ca])):(u(),T("div",sa,[w(" \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0440\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044C \u0441\u0440\u0435\u0434\u043D\u044E\u044E \u0446\u0435\u043D\u0443 "),A("img",{class:"imgValut",src:"/img/valuta/"+l.value.id+".png",alt:""},null,8,da),fa])),t(re,{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u044B",icon:"add"},{default:a(()=>[t(De,{Lost:l.value.lost,msg:"\u0427\u0435\u043C \u0431\u043E\u043B\u044C\u0448\u0435 \u0446\u0435\u043D \u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E \u043A\u0430\u043B\u044C\u043A\u0443\u043B\u044F\u0442\u043E\u0440\u0443, \u0442\u0435\u043C \u0442\u043E\u0447\u043D\u0435\u0435 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"},null,8,["Lost"])]),_:1})],64)):$("",!0)]),_:1},8,["icon"])])):$("",!0)}},va={__name:"PriceInput",props:{Price:h(null)},emits:["delPrice","updated"],setup(e,{emit:g}){const c=e,m=W(),d=String("https://api.aa.dllib.ru/");y("curAccount");const r=y("AccSets"),l=h({...c.Price}),n=y("Item"),P=h(null);Y(c,()=>{l.value={...c.Price}});const x=R(()=>{switch(!0){case!r.value.serverGroupId:return!0;case!n.value.Pricing.isGoldable:return!0;default:return!1}}),b=R(()=>{if(!r.value.serverGroupId)return"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";switch(!0){case l.value.price===0:return"";case l.value.price>0:return"";case l.value.price==="":return"\u041D\u0435 \u0432\u0438\u0436\u0443";case l.value.price===void 0:return"\u041D\u0435 \u0432\u0438\u0436\u0443";case l.value.price===null:return"\u041D\u0435 \u0432\u0438\u0436\u0443";default:return""}}),I=R(()=>{switch(!0){case!n.value.Pricing.isGoldable:return"\u041D\u0435\u043B\u044C\u0437\u044F \u043F\u0440\u043E\u0434\u0430\u0442\u044C";case l.value.method==="byToNPC":return"\u041D\u041F\u0421 \u043A\u0443\u043F\u0438\u0442 \u0437\u0430";case l.value.method==="empty":return"\u0426\u0435\u043D\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430";case!l.value.author:return"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439";case!r.value.serverGroupId:return"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";case!x.value:return Ie(l.value.updatedAt)+" - "+l.value.author;default:return"\u0426\u0435\u043D\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"}});function v(){P.value.blur(),z.post(d+"api/set/price/price.php",{params:{price:l.value.price,itemId:n.value.id}}).then(_=>{var i,s,o;if(!((i=_==null?void 0:_.data)!=null&&i.result))throw new Error;m.notify(ne((o=(s=_==null?void 0:_.data)==null?void 0:s.result)!=null?o:"\u041E\u0439!")),g("updated")}).catch(_=>{m.notify(K(_))})}return(_,i)=>(u(),k(Ae,{modelValue:l.value.price,"onUpdate:modelValue":i[1]||(i[1]=s=>l.value.price=s),filled:"",label:I.value,"label-color":f(ue)(l.value.method),mask:"## ## ##",ref_key:"priceRef",ref:P,disable:!f(n).Pricing.isGoldable||x.value,"reverse-fill-mask":"",rules:[s=>!b.value.length||b.value]},{append:a(()=>[b.value===""&&!x.value?(u(),k(Z,{key:0,label:"Ok",class:"DefBtn",dense:"","no-caps":"",onClick:i[0]||(i[0]=s=>v())})):$("",!0)]),_:1},8,["modelValue","label","label-color","disable","rules"]))}};const _a={style:{width:"100%"}},ga={key:0},pa={key:1},Ia=["innerHTML"],ha={__name:"PriceCard",emits:["updated"],setup(e,{emit:g}){const c=y("Item");return(m,d)=>(u(),T("div",_a,[f(c)?(u(),k(Te,{key:0,class:"PriceCard"},{default:a(()=>[t(va,{Price:f(c).Pricing.Price,onUpdated:d[0]||(d[0]=r=>g("updated"))},null,8,["Price"]),f(c).isTradeNPC?(u(),T("div",ga,[w("\u041F\u0440\u043E\u0434\u0430\u0435\u0442\u0441\u044F \u0443 NPC: "),t(he,{price:f(c).Pricing.priceFromNPC,currencyId:f(c).Pricing.currencyId},null,8,["price","currencyId"])])):f(c).Pricing.goldable?(u(),T("div",pa,[A("span",{innerHTML:f(le)(f(c).Pricing.Price.price)},null,8,Ia)])):$("",!0)]),_:1})):$("",!0)]))}};var Me=J(ha,[["__scopeId","data-v-59dcf7cc"]]);const ya={__name:"PriceHistory",setup(e){const g=W(),c=String("https://api.aa.dllib.ru/"),m=String("https://auth.symphograph.ru/"),d=ee(),r=y("AccSets"),l=y("PriceHistoryProgress"),n=h([]),P=y("ServerGroupList"),x=h(r.value.serverGroupId),b=R(()=>{var i;return(i=n.value)!=null&&i.length?x.value===100?n.value:n.value.filter(s=>s.serverGroupId===x.value):[]});function I(_){x.value=_}function v(){l.value=!0,z.post(c+"/api/price.php",{params:{method:"history",itemId:d.params.id}}).then(_=>{var i,s;if(!((i=_==null?void 0:_.data)!=null&&i.result))throw new Error;n.value=((s=_==null?void 0:_.data)==null?void 0:s.data)||[]}).catch(_=>{g.notify(K(_))}).finally(()=>{l.value=!1})}return oe(()=>{}),(_,i)=>(u(),k(re,{label:"\u0422\u0435\u043A\u0443\u0449\u0438\u0435 \u0446\u0435\u043D\u044B",onBeforeShow:i[1]||(i[1]=s=>v()),popup:""},{default:a(()=>[t(ge,{dense:"",separator:""},{default:a(()=>[t(q,null,{default:a(()=>[t(C,null,{default:a(()=>[t(B,null,{default:a(()=>[t(mt,{groupId:x.value,onOnSelect:i[0]||(i[0]=s=>I(s)),ref:"refServerGroupSelect"},null,8,["groupId"])]),_:1})]),_:1})]),_:1}),(u(!0),T(j,null,te(b.value,s=>(u(),k(q,{key:String(s.accountId)+String(s.serverGroupId)+s.updatedAt,style:{padding:"1em"}},{default:a(()=>[t(C,{avatar:""},{default:a(()=>[t($e,null,{default:a(()=>[t(st,{src:f(m)+"img/avatars/"+s.avaFileName},null,8,["src"])]),_:2},1024)]),_:2},1024),t(C,null,{default:a(()=>[t(B,{caption:""},{default:a(()=>[w(N(f(Ie)(s.updatedAt)+" - "+s.publicNick),1)]),_:2},1024),x.value===100?(u(),k(B,{key:0,caption:""},{default:a(()=>[w(N(f(P).find(o=>o.id===s.serverGroupId).label),1)]),_:2},1024)):$("",!0),t(B,null,{default:a(()=>[t(he,{price:s.price},null,8,["price"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}};const ba={key:0,class:"ItemArea"},Ca={key:4},Pa={key:5},xa={__name:"ItemArea",setup(e,{expose:g}){const c=W(),m=String("https://api.aa.dllib.ru/"),d=ee(),r=y("Item");y("itemId");const l=y("progress"),n=y("ItemProgress"),P=h("PriceHistoryProgress");H("PriceHistoryProgress",P);const x=h(null);g({loadItem:b}),oe(()=>{d.params.id&&b()});function b(){n.value=!0,z.post(m+"/api/get/item.php",{params:{id:d.params.id}}).then(I=>{var v,_,i;if(!((v=I==null?void 0:I.data)!=null&&v.result))throw new Error;r.value=(i=(_=I==null?void 0:I.data)==null?void 0:_.data)!=null?i:null,n.value=!1,console.log("Item loaded"),ut(()=>{r.value.craftable&&x.value.loadCrafts()}),fe.set("lastItem",r.value.id)}).catch(I=>{r.value=null,c.notify(K(I))}).finally(()=>{l.value=!1,n.value=!1})}return(I,v)=>{var _,i;return f(r)?(u(),T("div",ba,[f(r)&&((_=f(r).Info)==null?void 0:_.CraftResults)?(u(),k(bt,{key:0,CraftResults:f(r).Info.CraftResults},null,8,["CraftResults"])):$("",!0),f(c).platform.is.mobile?(u(),k(Me,{key:1,onUpdated:b})):$("",!0),f(n)?$("",!0):(u(),T(j,{key:2},[f(r).currencyId&&f(r).currencyId!==500||f(r).categId===173?(u(),k(ma,{key:0})):$("",!0)],64)),(i=f(r))!=null&&i.craftable?(u(),k(Wt,{key:3,ref_key:"refCraftList",ref:x},null,512)):$("",!0),f(r).craftable?$("",!0):(u(),T("div",Ca,"\u041D\u0435\u043A\u0440\u0430\u0444\u0442\u0430\u0431\u0435\u043B\u044C\u043D\u043E")),!f(n)&&f(r).Pricing.isGoldable?(u(),T("div",Pa,[t(ya)])):$("",!0)])):$("",!0)}}};var Sa=J(xa,[["__scopeId","data-v-51ce70cc"]]);const ka={class:"WindowArea column"},La={style:{"min-width":"20em",width:"calc(100% - 20em)"}},wa={key:0,style:{width:"20em"}},$a={__name:"ItemPage",setup(e){const g=ee(),c=ce(),m=W();y("curAccount");const d=y("AccSets");h(122345678);const r=y("categMode"),l=h(null),n=y("progress"),P=h(!1);H("ItemProgress",P);const x=h(!1);H("CraftProgress",x);const b=h(!1);H("CurrencyProgress",b);const I=h(0);H("itemId",I);const v=h(null);H("Item",v);const _=h(!1);H("needUpdate",_);const i=h(null);H("selectedItem",i);const s=h([]);H("SearchList",s);const o=h(null);function L(){return n.value||P.value||x.value||b.value}y("CategoriesList"),Y(g,()=>{g.params.id&&s.value.length&&o.value.loadItem()},{deep:!0}),oe(()=>{d.value.serverGroupId||p(),g.params.id?I.value=g.params.id*1:fe.getItem("lastItem")&&(g.params.id=fe.getItem("lastItem"),c.push({path:"/item/"+g.params.id}))});function U(){r.value=!1}function p(){m.dialog({component:vt,componentProps:{text:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D.<br>\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438?",okBtnText:"\u0412 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",cancelBtnText:"\u041D\u0435 \u0441\u0435\u0439\u0447\u0430\u0441"},cancel:!0,persistent:!0}).onOk(()=>{}).onOk(()=>{c.push("/account")}).onCancel(()=>{}).onDismiss(()=>{})}return(D,M)=>(u(),T("div",ka,[A("div",{class:"navigator",ref_key:"navigatorRef",ref:l},[A("div",La,[t(gt,{onIAmSelected:U}),t(B,{style:{padding:"0 1em"},caption:""},{default:a(()=>[w(N(v.value&&v.value.personal?"\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0439":"\u041F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0439"),1)]),_:1})]),f(m).platform.is.desktop?(u(),T("div",wa,[t(Me)])):$("",!0)],512),t(Ee,{"animation-speed":200,color:"green",indeterminate:L()},null,8,["indeterminate"]),t(He,{class:"col myScrollArea"},{default:a(()=>[s.value.length?(u(),k(Sa,{key:0,ref_key:"refItemArea",ref:o},null,512)):$("",!0)]),_:1})]))}};var al=J($a,[["__scopeId","data-v-0ebe505e"]]);export{al as default};
