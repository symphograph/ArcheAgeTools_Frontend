import{Q as V}from"./QLinearProgress.87b14ffb.js";import{b as w,Q as c,a as m}from"./position-engine.fab5a7b7.js";import{I as E,Q as F}from"./ItemIcon.23b1ef6d.js";import{r as s,n as u,t as v,G as t,f as e,af as M,H as i,I as _,J as g,q as y,F as S,Q as $,P as A,l as P,d as N,i as B,o as D,O as T,bf as U}from"./index.85a18687.js";import{Q as O}from"./QList.559d0f30.js";import{Q as q}from"./QScrollArea.34a033e9.js";import{u as R}from"./use-meta.946c3654.js";import{u as j}from"./use-quasar.bc7896a7.js";import{api as z}from"./axios.84dd43a9.js";import{e as H,n as J}from"./myFuncts.325243df.js";import{P as W}from"./PriceImagerComponent.79c11853.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as K}from"./ServerGroupSelect.5aff6b35.js";import{m as X}from"./myAxios.910d7995.js";import"./selection.a1f2ef76.js";import"./QScrollObserver.75ce28c9.js";import"./TouchPan.a58a75fc.js";import"./format.959830d0.js";import"./price.2525409f.js";import"./QSelect.8eed0032.js";import"./QMenu.a0aa64e9.js";import"./myAuth.dbe1fc94.js";const Y={__name:"MemberLastItem",props:{member:s(null)},setup(r){return(d,I)=>(u(),v(w,{dense:""},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(M,{dense:"",flat:"",to:"/item/"+r.member.LastPricedItem.id},{default:t(()=>[e(E,{icon:r.member.LastPricedItem.icon,grade:r.member.LastPricedItem.grade},null,8,["icon","grade"])]),_:1},8,["to"])]),_:1}),e(c,{avatar:""},{default:t(()=>[e(m,{caption:""},{default:t(()=>[i(_(g(H)(r.member.LastPricedItem.Price.updatedAt)),1)]),_:1}),e(m,null,{default:t(()=>[i(_(r.member.LastPricedItem.name),1)]),_:1}),e(m,null,{default:t(()=>[e(W,{currencyId:500,price:r.member.LastPricedItem.Price.price},null,8,["price"])]),_:1})]),_:1})]),_:1}))}};const Z=["src"],ee={__name:"MemberAvaCell",props:{member:s(null)},setup(r){const d=String("https://auth.symphograph.ru/");return(I,n)=>(u(),y(S,null,[e(c,{avatar:""},{default:t(()=>[e(M,{round:"",glossy:"",class:"MemberAva",to:"/prices/"+r.member.accountId},{default:t(()=>[e($,{size:"40px"},{default:t(()=>[A("img",{class:"MemberAvaImg",src:g(d)+"img/avatars/"+r.member.avaFileName,alt:""},null,8,Z)]),_:1})]),_:1},8,["to"])]),_:1}),e(c,{class:"MemberInfo"},{default:t(()=>[e(m,null,{default:t(()=>[i(_(r.member.publicNick),1)]),_:1}),e(m,{caption:""},{default:t(()=>[i("\u0417\u0430\u043F\u0438\u0441\u0435\u0439:"+_(r.member.pricesCount),1)]),_:1}),r.member.followersCount?(u(),v(m,{key:0,caption:""},{default:t(()=>[i(" \u0414\u043E\u0432\u0435\u0440\u044F\u044E\u0442:"+_(r.member.followersCount),1)]),_:1})):P("",!0)]),_:1})],64))}};var te=L(ee,[["__scopeId","data-v-2052e84a"]]);const ae={class:"WindowArea column"},re=N({__name:"MembersPage",setup(r){const d=j(),I=String("https://aa.dllib.ru/be/"),n=B("curAccount"),f=s([]),b=s(!1),x=s(null);function C(o,l){const a={method:"followToggle",master:o,serverGroupId:n.value.settings.serverGroupId,isFollow:l};X.set(d,"api/member.php",a)}D(()=>{Q()});function Q(){if(n.value.settings.serverGroupId===100){f.value=[];return}b.value=!0,z.post(I+"/api/member.php",{params:{method:"list",serverGroupId:n.value.settings.serverGroupId}}).then(o=>{var l,a,p;if(!((l=o==null?void 0:o.data)!=null&&l.result))throw new Error;f.value=(p=(a=o==null?void 0:o.data)==null?void 0:a.data)!=null?p:[]}).catch(o=>{f.value=[],d.notify(J(o))}).finally(()=>{b.value=!1})}function G(){return b.value}const h=s();function k(){h.value.saveServerGroup()}return R({title:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E",meta:{viewport:{name:"viewport",content:"initial-scale=0.6,width=device-width, user-scalable=yes"}}}),(o,l)=>(u(),y("div",ae,[A("div",{class:"navigator",ref_key:"navigatorRef",ref:x},[e(K,{groupId:g(n).settings.serverGroupId,onOnSelect:l[0]||(l[0]=a=>k()),onOnSave:l[1]||(l[1]=a=>Q()),ref_key:"refServerGroupSelect",ref:h},null,8,["groupId"])],512),e(V,{"animation-speed":200,color:"green",indeterminate:G()},null,8,["indeterminate"]),f.value.length?(u(),v(q,{key:0,class:"col"},{default:t(()=>[e(O,{dense:"",separator:""},{default:t(()=>[(u(!0),y(S,null,T(f.value,a=>(u(),v(w,{key:a.accountId,dense:""},{default:t(()=>[e(te,{member:a},null,8,["member"]),e(c,null,{default:t(()=>[e(Y,{member:a},null,8,["member"])]),_:2},1024),e(c,{side:""},{default:t(()=>[a.accountId!==g(n).id?(u(),v(U,{key:0,modelValue:a.isFollow,"onUpdate:modelValue":[p=>a.isFollow=p,p=>C(a.accountId,a.isFollow)]},{default:t(()=>[e(F,null,{default:t(()=>l[2]||(l[2]=[i("\u0414\u043E\u0432\u0435\u0440\u044F\u0442\u044C")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):P("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):P("",!0)]))}});var Ae=L(re,[["__scopeId","data-v-52870343"]]);export{Ae as default};
